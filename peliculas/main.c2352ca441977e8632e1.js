(self.webpackChunkpeliculas=self.webpackChunkpeliculas||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7368:(t,e,n)=>{"use strict";n.d(e,{deG:()=>rn,tb:()=>du,AFp:()=>uu,ip1:()=>ou,CZH:()=>au,hGG:()=>oc,z2F:()=>Wu,sBO:()=>ga,Sil:()=>Tu,_Vd:()=>jo,EJc:()=>mu,SBq:()=>Go,qLn:()=>Er,vpe:()=>za,gxx:()=>rs,tBr:()=>Sn,XFs:()=>D,OlP:()=>nn,zs3:()=>vs,ZZ4:()=>ua,aQg:()=>la,soG:()=>gu,YKP:()=>Ca,v3s:()=>Yu,h0i:()=>Ta,PXZ:()=>Hu,R0b:()=>Au,FiY:()=>Tn,Lbi:()=>fu,g9A:()=>hu,Qsj:()=>$o,FYo:()=>Ho,JOm:()=>Cr,Tiy:()=>Zo,q3G:()=>dr,tp0:()=>Cn,EAV:()=>ec,Rgc:()=>ba,dDg:()=>Pu,DyG:()=>sn,q4F:()=>Wo,GfV:()=>Ko,s_b:()=>Aa,ifc:()=>V,eFA:()=>$u,G48:()=>Gu,Gpc:()=>g,X6Q:()=>Bu,_c5:()=>ic,VLi:()=>Vu,c2e:()=>pu,zSh:()=>ss,wAp:()=>Co,vHH:()=>v,EiD:()=>hr,mCW:()=>Zn,qzn:()=>Vn,JVY:()=>jn,pB0:()=>Gn,eBb:()=>qn,L6k:()=>Un,LAX:()=>Bn,cg1:()=>Eo,Tjo:()=>rc,kL8:()=>So,yhl:()=>Mn,dqk:()=>B,sIi:()=>As,CqO:()=>Gs,QGY:()=>qs,F4k:()=>Bs,RDi:()=>It,AaK:()=>f,z3N:()=>Fn,qOj:()=>bs,TTD:()=>bt,_Bn:()=>Fo,xp6:()=>ui,uIk:()=>Os,Tol:()=>no,ekj:()=>eo,Suo:()=>ru,Xpm:()=>X,lG2:()=>ot,Yz7:()=>E,cJS:()=>S,oAB:()=>rt,Yjl:()=>at,Y36:()=>Ns,_UZ:()=>Vs,BQk:()=>js,ynx:()=>Ms,qZA:()=>Fs,TgZ:()=>Ls,EpF:()=>Us,n5z:()=>Je,Ikx:()=>yo,LFG:()=>bn,$8M:()=>Xe,NdJ:()=>zs,CRH:()=>iu,oxw:()=>Qs,Q6J:()=>Rs,VKq:()=>Ba,iGM:()=>nu,CHM:()=>zt,oJD:()=>pr,LSH:()=>gr,kYT:()=>it,Udp:()=>to,d8E:()=>vo,YNc:()=>Ds,_uU:()=>po,Oqu:()=>go,hij:()=>mo});var r=n(5959),i=n(7570),s=n(8318),o=n(1906),a=n(2875),u=n(1564);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function _(t){return"string"==typeof t?t:null==t?"":String(t)}function b(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_(t)}function w(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${b(t)} found${n}`)}function E(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function S(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return C(t,A)||C(t,k)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(O))?t[x]:null}const A=l({"\u0275prov":l}),x=l({"\u0275inj":l}),k=l({ngInjectableDef:l}),O=l({ngInjectorDef:l});var D=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function R(t){const e=N;return N=t,e}function P(t,e,n){const r=T(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&D.Optional?null:void 0!==e?e:void w(f(t),"Injector")}function L(t){return{toString:t}.toString()}var F=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),V=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=M||q||j||U,G={},z=[],H=l({"\u0275cmp":l}),$=l({"\u0275dir":l}),Q=l({"\u0275pipe":l}),Z=l({"\u0275mod":l}),K=l({"\u0275loc":l}),W=l({"\u0275fac":l}),J=l({__NG_ELEMENT_ID__:l});let Y=0;function X(t){return L(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||V.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=Y++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[$]||null}(t)}function et(t){return function(t){return t[Q]||null}(t)}const nt={};function rt(t){return L(()=>{const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(nt[t.id]=t.type),e})}function it(t,e){return L(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function st(t,e){if(null==t)return G;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const ot=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[H]||null}function ct(t,e){const n=t[Z]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(W)?t[W]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Et}function Et(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===G)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:G,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new _t(u&&u.currentValue,e,o===G),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}let Ct;function It(t){Ct=t}function At(){return void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0}function xt(t){return!!t.listen}bt.ngInherit=!0;const kt={createRenderer:(t,e)=>At()};function Ot(t){for(;Array.isArray(t);)t=t[0];return t}function Dt(t,e){return Ot(e[t])}function Nt(t,e){return Ot(e[t.index])}function Rt(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return ft(n)?n:n[0]}function Lt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function Mt(t){t[18]=0}function jt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:ce(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return Ut.bindingsEnabled}function Bt(){return Ut.lFrame.lView}function Gt(){return Ut.lFrame.tView}function zt(t){return Ut.lFrame.contextLView=t,t[8]}function Ht(){let t=$t();for(;null!==t&&64===t.type;)t=t.parent;return t}function $t(){return Ut.lFrame.currentTNode}function Qt(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function Zt(){return Ut.lFrame.isParent}function Kt(){Ut.lFrame.isParent=!1}function Wt(){return Ut.isInCheckNoChangesMode}function Jt(t){Ut.isInCheckNoChangesMode=t}function Yt(){return Ut.lFrame.bindingIndex++}function Xt(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function te(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,ee(e)}function ee(t){Ut.lFrame.currentDirectiveIndex=t}function ne(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function re(){return Ut.lFrame.currentQueryIndex}function ie(t){Ut.lFrame.currentQueryIndex=t}function se(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&D.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&D.Host||(r=se(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=ue();return r.currentTNode=e,r.lView=t,!0}function ae(t){const e=ue(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ue(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?ce(t):e}function ce(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function le(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const he=le;function fe(){const t=le();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function de(){return Ut.lFrame.selectedIndex}function pe(t){Ut.lFrame.selectedIndex=t}function ge(){const t=Ut.lFrame;return Rt(t.tView,t.selectedIndex)}function me(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ye(t,e,n){be(t,e,3,n)}function ve(t,e,n,r){(3&t[2])===n&&be(t,e,n,r)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function be(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(we(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function we(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Ee=-1;class Se{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Ie(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ce(t){return 3===t||4===t||6===t}function Ie(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||xe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function xe(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function ke(t){return t!==Ee}function Oe(t){return 32767&t}function De(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ne=!0;function Re(t){const e=Ne;return Ne=t,e}let Pe=0;function Le(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Fe(r.data,t),Fe(e,null),Fe(r.blueprint,null));const i=Me(t,e),s=t.injectorIndex;if(ke(i)){const t=Oe(i),n=De(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Fe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Me(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ee;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ee}function je(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Pe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ue(t,e,n){if(n&D.Optional)return t;w(e,"NodeInjector")}function qe(t,e,n,r){if(n&D.Optional&&void 0===r&&(r=null),0==(n&(D.Self|D.Host))){const i=t[9],s=R(void 0);try{return i?i.get(e,r,n&D.Optional):P(e,r,n&D.Optional)}finally{R(s)}}return Ue(r,e,n)}function Be(t,e,n,r=D.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:ze:e}(n);if("function"==typeof s){if(!oe(e,t,r))return r&D.Host?Ue(i,n,r):qe(e,n,r,i);try{const t=s(r);if(null!=t||r&D.Optional)return t;w(n)}finally{he()}}else if("number"==typeof s){let i=null,o=Ve(t,e),a=Ee,u=r&D.Host?e[16][6]:null;for((-1===o||r&D.SkipSelf)&&(a=-1===o?Me(t,e):e[o+8],a!==Ee&&Ke(r,!1)?(i=e[1],o=Oe(a),e=De(a,e)):o=-1);-1!==o;){const t=e[1];if(Ze(s,o,t.data)){const t=He(o,e,n,i,r,u);if(t!==Ge)return t}a=e[o+8],a!==Ee&&Ke(r,e[1].data[o+8]===u)&&Ze(s,o,e)?(i=t,o=Oe(a),e=De(a,e)):o=-1}}}return qe(e,n,r,i)}const Ge={};function ze(){return new We(Ht(),Bt())}function He(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=$e(a,o,n,null==r?gt(a)&&Ne:r!=o&&0!=(3&a.type),i&D.Host&&s===a);return null!==u?Qe(e,o,u,a):Ge}function $e(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&yt(t)&&t.type===n)return u}return null}function Qe(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof Se){const o=i;o.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(b(s[n]));const a=Re(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?R(o.injectImpl):null;oe(t,r,D.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&R(u),Re(a),o.resolving=!1,he()}}return i}function Ze(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ke(t,e){return!(t&D.Self||t&D.Host&&e)}class We{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Be(this._tNode,this._lView,t,void 0,e)}}function Je(t){return L(()=>{const e=t.prototype.constructor,n=e[W]||Ye(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[W]||Ye(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ye(t){return y(t)?()=>{const e=Ye(m(t));return e&&e()}:vt(t)}function Xe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ce(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const tn="__parameters__";function en(t,e,n){return L(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(tn)?t[tn]:Object.defineProperty(t,tn,{value:[]})[tn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class nn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=E({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rn=new nn("AnalyzeForEntryComponents"),sn=Function;function on(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),on(r,e)):e!==t&&e.push(r)}return e}function an(t,e){t.forEach(t=>Array.isArray(t)?an(t,e):e(t))}function un(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function cn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ln(t,e,n){let r=fn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function hn(t,e){const n=fn(t,e);if(n>=0)return t[1|n]}function fn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const dn={},pn=/\n/gm,gn="__source",mn=l({provide:String,useValue:l});let yn;function vn(t){const e=yn;return yn=t,e}function _n(t,e=D.Default){if(void 0===yn)throw new Error("inject() must be called from an injection context");return null===yn?P(t,void 0,e):yn.get(t,e&D.Optional?null:void 0,e)}function bn(t,e=D.Default){return(N||_n)(m(t),e)}function wn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=D.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(bn(t,n))}else e.push(bn(r))}return e}function En(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Sn=En(en("Inject",t=>({token:t})),-1),Tn=En(en("Optional"),8),Cn=En(en("SkipSelf"),4);let In,An;function xn(t){var e;return(null===(e=function(){if(void 0===In&&(In=null,B.trustedTypes))try{In=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return In}())||void 0===e?void 0:e.createHTML(t))||t}function kn(t){var e;return(null===(e=function(){if(void 0===An&&(An=null,B.trustedTypes))try{An=B.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return An}())||void 0===e?void 0:e.createHTML(t))||t}class On{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Dn extends On{getTypeName(){return"HTML"}}class Nn extends On{getTypeName(){return"Style"}}class Rn extends On{getTypeName(){return"Script"}}class Pn extends On{getTypeName(){return"URL"}}class Ln extends On{getTypeName(){return"ResourceURL"}}function Fn(t){return t instanceof On?t.changingThisBreaksApplicationSecurity:t}function Vn(t,e){const n=Mn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Mn(t){return t instanceof On&&t.getTypeName()||null}function jn(t){return new Dn(t)}function Un(t){return new Nn(t)}function qn(t){return new Rn(t)}function Bn(t){return new Pn(t)}function Gn(t){return new Ln(t)}class zn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(xn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Hn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=xn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=xn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const $n=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(t){return(t=String(t)).match($n)||t.match(Qn)?t:"unsafe:"+t}function Kn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Wn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Jn=Kn("area,br,col,hr,img,wbr"),Yn=Kn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xn=Kn("rp,rt"),tr=Wn(Xn,Yn),er=Wn(Jn,Wn(Yn,Kn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wn(Xn,Kn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=Kn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=Kn("srcset"),ir=Wn(nr,rr,Kn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Kn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sr=Kn("script,style,template");class or{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!sr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!ir.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;nr[s]&&(o=Zn(o)),rr[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Zn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Jn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lr;function hr(t,e){let n=null;try{lr=lr||function(t){const e=new Hn(t);return function(){try{return!!(new window.DOMParser).parseFromString(xn(""),"text/html")}catch(t){return!1}}()?new zn(e):e}(t);let r=e?String(e):"";n=lr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==s);return xn((new or).sanitizeChildren(fr(n)||n))}finally{if(n){const t=fr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function fr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var dr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function pr(t){const e=mr();return e?kn(e.sanitize(dr.HTML,t)||""):Vn(t,"HTML")?kn(Fn(t)):hr(At(),_(t))}function gr(t){const e=mr();return e?e.sanitize(dr.URL,t)||"":Vn(t,"URL")?Fn(t):Zn(_(t))}function mr(){const t=Bt();return t&&t[12]}function yr(t,e){t.__ngContext__=e}function vr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function _r(t){return t.ngDebugContext}function br(t){return t.ngOriginalError}function wr(t,...e){t.error(...e)}class Er{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||wr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_r(t)?_r(t):this._findContext(br(t)):null}_findOriginalError(t){let e=br(t);for(;e&&br(e);)e=br(e);return e}}const Sr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function Tr(t){return t instanceof Function?t():t}var Cr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Ir(t,e){return(void 0)(t,e)}function Ar(t){const e=t[3];return dt(e)?e[3]:e}function xr(t){return Or(t[13])}function kr(t){return Or(t[4])}function Or(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Dr(t,e,n,r,i){if(null!=r){let s,o=!1;dt(r)?s=r:ft(r)&&(o=!0,r=r[0]);const a=Ot(r);0===t&&null!==n?null==i?Mr(e,n,a):Vr(e,n,a,i||null,!0):1===t&&null!==n?Vr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ur(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==Ot(n)&&Dr(e,t,r,s,i);for(let o=ht;o<n.length;o++){const i=n[o];$r(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Nr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Rr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,jt(i,-1)),n.splice(r,1)}function Pr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Rr(s,r),e>0&&(t[n-1][4]=r[4]);const o=cn(t,ht+e);$r(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Lr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&$r(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Fr(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&Fr(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&Fr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Fr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Se)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):Ot(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Rr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Vr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Mr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function jr(t,e,n,r,i){null!==r?Vr(t,e,n,r,i):Mr(t,e,n)}function Ur(t,e){return xt(t)?t.parentNode(e):e.parentNode}function qr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===V.None||e===V.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),s=e[11],o=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)jr(s,i,n[a],o,!1);else jr(s,i,n,o,!1)}function Br(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return zr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Br(t,n);{const n=t[e.index];return dt(n)?zr(-1,n):Ot(n)}}if(32&n)return Ir(e,t)()||Ot(t[e.index]);{const n=Gr(t,e);return null!==n?Array.isArray(n)?n[0]:Br(Ar(t[16]),n):Br(t,e.next)}}return null}function Gr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function zr(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Br(t,r)}return e[7]}function Hr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&yr(Ot(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Hr(t,e,n.child,r,i,s,!1),Dr(e,t,i,a,s);else if(32&u){const o=Ir(n,r);let u;for(;u=o();)Dr(e,t,i,u,s);Dr(e,t,i,a,s)}else 16&u?Qr(t,e,r,n,i,s):Dr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function $r(t,e,n,r,i,s){Hr(n,r,t.firstChild,e,i,s,!1)}function Qr(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Dr(e,t,i,a[u],s);else Hr(t,e,a,o[3],i,s,!0)}function Zr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Kr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Wr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Jr="ng-template";function Yr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Wr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Xr(t){return 4===t.type&&t.value!==Jr}function ti(t,e,n){return e===(4!==t.type||n?t.value:Jr)}function ei(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ce(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!ti(t,u,n)||""===u&&1===e.length){if(ni(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Yr(t.attrs,c,n)){if(ni(r))return!1;o=!0}continue}const l=ri(8&r?"class":u,i,Xr(t),n);if(-1===l){if(ni(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Wr(e,c,0)||2&r&&c!==t){if(ni(r))return!1;o=!0}}}}else{if(!o&&!ni(r)&&!ni(u))return!1;if(o&&ni(u))continue;o=!1,r=u|1&r}}return ni(r)||o}function ni(t){return 0==(1&t)}function ri(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ii(t,e,n=!1){for(let r=0;r<e.length;r++)if(ei(t,e[r],n))return!0;return!1}function si(t,e){return t?":not("+e.trim()+")":e}function oi(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ni(o)||(e+=si(s,i),i=""),r=o,s=s||!ni(r);n++}return""!==i&&(e+=si(s,i)),e}const ai={};function ui(t){ci(Gt(),Bt(),de()+t,Wt())}function ci(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ye(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ve(e,r,0,n)}pe(n)}function li(t,e){return t<<17|e<<2}function hi(t){return t>>17&32767}function fi(t){return 2|t}function di(t){return(131068&t)>>2}function pi(t,e){return-131069&t|e<<2}function gi(t){return 1|t}function mi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];ie(i),n.contentQueries(2,e[s],s)}}}function yi(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Mt(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function vi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=$t(),o=Zt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Qt(s,!0),s}function _i(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bi(t,e,n){ae(e);try{const r=t.viewQuery;null!==r&&Wi(1,r,n);const i=t.template;null!==i&&Si(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&mi(t,e),t.staticViewQueries&&Wi(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Hi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,fe()}}function wi(t,e,n,r){const i=e[2];if(256==(256&i))return;ae(e);const s=Wt();try{Mt(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Si(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&ye(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ve(e,n,0,null),_e(e,0)}if(function(t){for(let e=xr(t);null!==e;e=kr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&jt(r,1),n[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=kr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&wi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&mi(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&ye(e,n)}else{const n=t.contentHooks;null!==n&&ve(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)pe(~r);else{const i=r,s=n[++t],o=n[++t];te(s,i),o(2,e[i])}}}finally{pe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Gi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Wi(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&ye(e,n)}else{const n=t.viewHooks;null!==n&&ve(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,jt(e[3],-1))}finally{fe()}}function Ei(t,e,n,r){const i=e[10],s=!Wt(),o=Lt(e);try{s&&!o&&i.begin&&i.begin(),o&&bi(t,e,r),wi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Si(t,e,n,r,i){const s=de(),o=2&r;try{pe(-1),o&&e.length>lt&&ci(t,e,lt,Wt()),n(r,i)}finally{pe(s)}}function Ti(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ci(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Le(n,e),yr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=yt(r);s&&ji(e,n,r);const u=Qe(e,t,a,n);yr(u,e),null!==o&&Ui(0,a-i,u,r,0,o),s&&(Pt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ut.lFrame.currentDirectiveIndex;try{pe(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ee(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Pi(r,i)}}finally{pe(-1),ee(o)}}(t,e,n))}function Ii(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Ai(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=xi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function xi(t,e,n,r,i,s,o,a,u,c){const l=lt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ai);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function ki(t,e,n,r){const i=Yi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Xi(t).push(r,i.length-1))}function Oi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Di(t,e,n,r,i,s,o,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(es(t,n,c,r,i),gt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,xt(s)?s.setProperty(u,r,i):Ie(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ni(t,e,n,r){let i=!1;if(qt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ii(n,o.selectors,!1)&&(i||(i=[]),je(Le(n,e),t,o.type),yt(o)?(Li(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Vi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=_i(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),Mi(t,n,e,u,c),Fi(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Xr(e)?null:qi(n,i);s.push(c),o=Oi(n,u,o),a=Oi(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function Ri(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Pi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Li(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Fi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Vi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Mi(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=vt(i.type)),o=new Se(s,yt(i),null);t.blueprint[r]=o,n[r]=o,Ri(t,e,0,r,_i(t,n,i.hostVars,ai),i)}function ji(t,e,n){const r=Nt(e,t),i=Ai(n),s=t[10],o=$i(t,yi(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Ui(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function qi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Bi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Gi(t,e){const n=Pt(e,t);if(Ft(n)){const t=n[1];80&n[2]?wi(t,n,t.template,n[8]):n[5]>0&&zi(n)}}function zi(t){for(let n=xr(t);null!==n;n=kr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];wi(t,e,t.template,e[8])}else e[5]>0&&zi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Ft(r)&&r[5]>0&&zi(r)}}function Hi(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),bi(r,n,n[8])}function $i(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Qi(t){for(;t;){t[2]|=64;const e=Ar(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Zi(t,e,n){const r=e[10];r.begin&&r.begin();try{wi(t,e,t.template,n)}catch(i){throw ts(e,i),i}finally{r.end&&r.end()}}function Ki(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=vr(n),i=r[1];Ei(i,r,i.template,n)}}(t[8])}function Wi(t,e,n){ie(0),e(t,n)}const Ji=(()=>Promise.resolve(null))();function Yi(t){return t[7]||(t[7]=[])}function Xi(t){return t.cleanup||(t.cleanup=[])}function ts(t,e){const n=t[9],r=n?n.get(Er,null):null;r&&r.handleError(e)}function es(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ns(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=d(i,t):2==s&&(r=d(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const rs=new nn("INJECTOR",-1);class is{get(t,e=dn){if(e===dn){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const ss=new nn("Set Injector scope."),os={},as={};let us;function cs(){return void 0===us&&(us=new is),us}function ls(t,e=null,n=null,r){return new hs(t,n,e||cs(),r)}class hs{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&an(e,n=>this.processProvider(n,t,e)),an([t],t=>this.processInjectorType(t,[],i)),this.records.set(rs,ps(void 0,this));const s=this.records.get(ss);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=dn,n=D.Default){this.assertNotDestroyed();const r=vn(this);try{if(!(n&D.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof nn)&&T(t);e=n&&this.injectableDefInScope(n)?ps(fs(t),os):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&D.Self?cs():this.parent).get(t,e=n&D.Optional&&e===dn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(f(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[gn]&&i.unshift(e[gn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(pn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{vn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{an(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];an(r,t=>this.processProvider(t,n,r||z))}}this.injectorDefTypes.add(s);const a=vt(s)||(()=>new s);this.records.set(s,ps(a,os));const u=r.providers;if(null!=u&&!o){const e=t;an(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ms(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return gs(t)?ps(void 0,t.useValue):ps(ds(t),os)}(t);if(ms(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ps(void 0,os,!0),e.factory=()=>wn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===os&&(e.value=as,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=m(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function fs(t){const e=T(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof nn)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[A]||t[k]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ds(t,e,n){let r;if(ms(t)){const e=m(t);return vt(e)||fs(e)}if(gs(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...wn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>bn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||fs(e);r=()=>new e(...wn(t.deps))}var i;return r}function ps(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gs(t){return null!==t&&"object"==typeof t&&mn in t}function ms(t){return"function"==typeof t}const ys=function(t,e,n){return function(t,e=null,n=null,r){const i=ls(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let vs=(()=>{class t{static create(t,e){return Array.isArray(t)?ys(t,e,""):ys(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=dn,t.NULL=new is,t.\u0275prov=E({token:t,providedIn:"any",factory:()=>bn(rs)}),t.__NG_ELEMENT_ID__=-1,t})();function _s(t,e){me(vr(t)[1],Ht())}function bs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ws(t.inputs),e.declaredInputs=ws(t.declaredInputs),e.outputs=ws(t.outputs);const n=i.hostBindings;n&&Ts(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Es(t,s),o&&Ss(t,o),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===bs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function ws(t){return t===G?{}:t===z?[]:t}function Es(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ss(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ts(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Cs=null;function Is(){if(!Cs){const t=B.Symbol;if(t&&t.iterator)Cs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Cs=n)}}}return Cs}function As(t){return!!xs(t)&&(Array.isArray(t)||!(t instanceof Map)&&Is()in t)}function xs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ks(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Os(t,e,n,r){const i=Bt();return ks(i,Yt(),e)&&(Gt(),function(t,e,n,r,i,s){const o=Nt(t,e);!function(t,e,n,r,i,s,o){if(null==s)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?_(s):o(s,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(ge(),i,t,e,n,r)),Os}function Ds(t,e,n,r,i,s,o,a){const u=Bt(),c=Gt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=vi(e,t,4,o||null,Vt(c,a));Ni(e,n,l,Vt(c,u)),me(e,l);const h=l.tViews=xi(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Qt(h,!1);const f=u[11].createComment("");qr(c,u,f,h),yr(f,u),$i(u,u[l]=Bi(f,u,f,h)),mt(h)&&Ci(c,u,h),null!=o&&Ii(u,h,a)}function Ns(t,e=D.Default){const n=Bt();return null===n?bn(t,e):Be(Ht(),n,m(t),e)}function Rs(t,e,n){const r=Bt();return ks(r,Yt(),e)&&Di(Gt(),ge(),r,t,e,r[11],n,!1),Rs}function Ps(t,e,n,r,i){const s=i?"class":"style";es(t,n,e.inputs[s],s,r)}function Ls(t,e,n,r){const i=Bt(),s=Gt(),o=lt+t,a=i[11],u=i[o]=Nr(a,e,Ut.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=vi(e,t,2,i,Vt(a,s));return Ni(e,n,u,Vt(a,o)),null!==u.attrs&&ns(u,u.attrs,!1),null!==u.mergedAttrs&&ns(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Qt(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&Kr(a,u,h);const f=c.styles;null!==f&&Zr(a,u,f),64!=(64&c.flags)&&qr(s,i,u,c),0===Ut.lFrame.elementDepthCount&&yr(u,i),Ut.lFrame.elementDepthCount++,mt(c)&&(Ci(s,i,c),Ti(s,c,i)),null!==r&&Ii(i,c)}function Fs(){let t=Ht();Zt()?Kt():(t=t.parent,Qt(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(me(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ps(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ps(n,e,Bt(),e.stylesWithoutHost,!1)}function Vs(t,e,n,r){Ls(t,e,n,r),Fs()}function Ms(t,e,n){const r=Bt(),i=Gt(),s=t+lt,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=Vt(s,r),a=vi(e,t,8,"ng-container",o);return null!==o&&ns(a,o,!0),Ni(e,n,a,Vt(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Qt(o,!0);const a=r[s]=r[11].createComment("");qr(i,r,a,o),yr(a,r),mt(o)&&(Ci(i,r,o),Ti(i,o,r)),null!=n&&Ii(r,o)}function js(){let t=Ht();const e=Gt();Zt()?Kt():(t=t.parent,Qt(t,!1)),e.firstCreatePass&&(me(e,t),pt(t)&&e.queries.elementEnd(t))}function Us(){return Bt()}function qs(t){return!!t&&"function"==typeof t.then}function Bs(t){return!!t&&"function"==typeof t.subscribe}const Gs=Bs;function zs(t,e,n,r){const i=Bt(),s=Gt(),o=Ht();return function(t,e,n,r,i,s,o,a){const u=mt(r),c=t.firstCreatePass&&Xi(t),l=Yi(e);let h=!0;if(3&r.type||a){const f=Nt(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(Ot(t[r.index])):r.index;if(xt(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=$s(r,e,0,s,!1);const t=n.listen(d,i,s);l.push(s,t),c&&c.push(i,g,p,p+1)}}else s=$s(r,e,0,s,!0),d.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=$s(r,e,0,s,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),zs}function Hs(t,e,n,r){try{return!1!==n(r)}catch(i){return ts(t,i),!1}}function $s(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Qi(o);let a=Hs(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Hs(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Qs(t=1){return function(t){return(Ut.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ut.lFrame.contextLView))[8]}(t)}function Zs(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?hi(s):di(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Ks(t[a],e)&&(u=!0,t[a+1]=r?gi(n):fi(n)),a=r?hi(n):di(n)}u&&(t[n+1]=r?fi(s):gi(s))}function Ks(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&fn(t,e)>=0}const Ws={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Js(t){return t.substring(Ws.key,Ws.keyEnd)}function Ys(t,e){const n=Ws.textEnd;return n===e?-1:(e=Ws.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ws.key=e,n),Xs(t,e,n))}function Xs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function to(t,e,n){return io(t,e,n,!1),to}function eo(t,e){return io(t,e,null,!0),eo}function no(t){!function(t,e,n,r){const i=Gt(),s=Xt(2);i.firstUpdatePass&&oo(i,null,s,r);const o=Bt();if(n!==ai&&ks(o,s,n)){const a=i.data[de()];if(fo(a,r)&&!so(i,s)){let t=a.classesWithoutHost;null!==t&&(n=d(t,n||"")),Ps(i,a,o,n,r)}else!function(t,e,n,r,i,s,o,a){i===ai&&(i=z);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const o=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let d,p=null;l===h?(u+=2,c+=2,o!==f&&(p=h,d=f)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,d=f),null!==p&&co(t,e,n,r,p,d,true,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return z;const r=[],i=Fn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,s)}}(ln,ro,t,!0)}function ro(t,e){for(let n=function(t){return function(t){Ws.key=0,Ws.keyEnd=0,Ws.value=0,Ws.valueEnd=0,Ws.textEnd=t.length}(t),Ys(t,Xs(t,0,Ws.textEnd))}(e);n>=0;n=Ys(e,n))ln(t,Js(e),!0)}function io(t,e,n,r){const i=Bt(),s=Gt(),o=Xt(2);s.firstUpdatePass&&oo(s,t,o,r),e!==ai&&ks(i,o,e)&&co(s,s.data[de()],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=f(Fn(t)))),t}(e,n),r,o)}function so(t,e){return e>=t.expandoStartIndex}function oo(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[de()],o=so(t,n);fo(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=ne(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=uo(n=ao(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=ao(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==di(r))return t[hi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ao(null,t,e,n[1],r),n=uo(n,e.attrs,r),function(t,e,n,r){t[hi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=uo(r,t[s].hostAttrs,n);return uo(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=hi(o),u=di(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||fn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=hi(t[a+1]);t[r+1]=li(e,a),0!==e&&(t[e+1]=pi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=li(a,0),0!==a&&(t[a+1]=pi(t[a+1],r)),a=r;else t[r+1]=li(u,0),0===a?a=r:t[u+1]=pi(t[u+1],r),u=r;l&&(t[r+1]=fi(t[r+1])),Zs(t,c,r,!0),Zs(t,c,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&fn(s,e)>=0&&(n[r+1]=gi(n[r+1]))}(e,c,t,r,s),o=li(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function ao(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=uo(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function uo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ln(t,o,!!n||e[++s]))}return void 0===t?null:t}function co(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];ho(1==(1&c)?lo(u,e,n,i,di(c),o):void 0)||(ho(s)||2==(2&c)&&(s=lo(u,null,n,i,a,o)),function(t,e,n,r,i){const s=xt(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Cr.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=Cr.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Dt(de(),n),i,s))}function lo(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ai&&(l=c?z:void 0);let h=c?hn(l,r):u===r?l:void 0;if(s&&!ho(h)&&(h=hn(e,r)),ho(h)&&(a=h,o))return a;const f=t[i+1];i=o?hi(f):di(f)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=hn(t,r))}return a}function ho(t){return void 0!==t}function fo(t,e){return 0!=(t.flags&(e?16:32))}function po(t,e=""){const n=Bt(),r=Gt(),i=t+lt,s=r.firstCreatePass?vi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);qr(r,n,o,s),Qt(s,!1)}function go(t){return mo("",t,""),go}function mo(t,e,n){const r=Bt(),i=function(t,e,n,r){return ks(t,Yt(),n)?e+_(n)+r:ai}(r,t,e,n);return i!==ai&&function(t,e,n){const r=Dt(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,de(),i),mo}function yo(t,e,n){const r=Bt();return ks(r,Yt(),e)&&Di(Gt(),ge(),r,t,e,r[11],n,!0),yo}function vo(t,e,n){const r=Bt();if(ks(r,Yt(),e)){const i=Gt(),s=ge();Di(i,s,r,t,e,function(t,e,n){return(null===t||yt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}(ne(i.data),s,r),n,!0)}return vo}const _o=void 0;var bo=["en",[["a","p"],["AM","PM"],_o],[["AM","PM"],_o,_o],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_o,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_o,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_o,"{1} 'at' {0}",_o],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let wo={};function Eo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=To(e);if(n)return n;const r=e.split("-")[0];if(n=To(r),n)return n;if("en"===r)return bo;throw new Error(`Missing locale data for the locale "${t}".`)}function So(t){return Eo(t)[Co.PluralCase]}function To(t){return t in wo||(wo[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),wo[t]}var Co=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Io="en-US";let Ao=Io;function xo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ao=t.toLowerCase().replace(/_/g,"-"))}function ko(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let s=0;s<t.length;s++)ko(t[s],e,n,r,i);else{const s=Gt(),o=Bt();let a=ms(t)?t:m(t.provide),u=ds(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(ms(t)||!t.multi){const r=new Se(u,i,Ns),d=No(a,e,i?l:l+f,h);-1===d?(je(Le(c,o),s,a),Oo(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[d]=r,o[d]=r)}else{const d=No(a,e,l+f,h),p=No(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){je(Le(c,o),s,a);const l=function(t,e,n,r,i){const s=new Se(t,n,Ns);return s.multi=[],s.index=e,s.componentProviders=0,Do(s,i,r&&!n),s}(i?Po:Ro,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Oo(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Oo(s,t,d>-1?d:p,Do(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Oo(t,e,n,r){const i=ms(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function Do(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function No(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ro(t,e,n,r){return Lo(this.multi,[])}function Po(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Qe(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Lo(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Lo(i,s);return s}function Lo(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Fo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=yt(t);ko(n,r.data,r.blueprint,i,!0),ko(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Vo{}class Mo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let jo=(()=>{class t{}return t.NULL=new Mo,t})();function Uo(...t){}function qo(t,e){return new Go(Nt(t,e))}const Bo=function(){return qo(Ht(),Bt())};let Go=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Bo,t})();function zo(t){return t instanceof Go?t.nativeElement:t}class Ho{}let $o=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Qo(),t})();const Qo=function(){const t=Bt(),e=Pt(Ht().index,t);return function(t){return t[11]}(ft(e)?e:t)};let Zo=(()=>{class t{}return t.\u0275prov=E({token:t,providedIn:"root",factory:()=>null}),t})();class Ko{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Wo=new Ko("12.0.5");class Jo{constructor(){}supports(t){return As(t)}create(t){return new Xo(t)}}const Yo=(t,e)=>e;class Xo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Yo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<ra(n,r,i)?e:n,o=ra(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!As(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Is()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ta(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new na),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new na),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ta{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ea{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class na{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ea,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ra(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ia{constructor(){}supports(t){return t instanceof Map||xs(t)}create(){return new sa}}class sa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||xs(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new oa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class oa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aa(){return new ua([new Jo])}let ua=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||aa()),deps:[[t,new Cn,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=E({token:t,providedIn:"root",factory:aa}),t})();function ca(){return new la([new ia])}let la=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ca()),deps:[[t,new Cn,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=E({token:t,providedIn:"root",factory:ca}),t})();function ha(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Ot(s)),dt(s))for(let t=ht;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&ha(e[1],e,n,r)}const o=n.type;if(8&o)ha(t,e,n.child,r);else if(32&o){const t=Ir(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Gr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Ar(e[16]);ha(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class fa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ha(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Pr(t,n),cn(e,n))}this._attachedToViewContainer=!1}Lr(this._lView[1],this._lView)}onDestroy(t){ki(this._lView[1],this._lView,null,t)}markForCheck(){Qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{Zi(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,$r(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class da extends fa{constructor(t){super(t),this._view=t}detectChanges(){Ki(this._view)}checkNoChanges(){!function(t){Jt(!0);try{Ki(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const pa=function(t){return function(t,e,n){if(gt(t)&&!n){const n=Pt(t.index,e);return new fa(n,n)}return 47&t.type?new fa(e[16],e):null}(Ht(),Bt(),16==(16&t))};let ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=pa,t})();const ma=[new ia],ya=new ua([new Jo]),va=new la(ma),_a=function(){return Sa(Ht(),Bt())};let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=_a,t})();const wa=ba,Ea=class extends wa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=yi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),bi(e,n,t),new fa(n)}};function Sa(t,e){return 4&t.type?new Ea(e,t,qo(t,e)):null}class Ta{}class Ca{}const Ia=function(){return Na(Ht(),Bt())};let Aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ia,t})();const xa=Aa,ka=class extends xa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return qo(this._hostTNode,this._hostLView)}get injector(){return new We(this._hostTNode,this._hostLView)}get parentInjector(){const t=Me(this._hostTNode,this._hostLView);if(ke(t)){const e=De(t,this._hostLView),n=Oe(t);return new We(e[1].data[n+8],e)}return new We(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Oa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Ta,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ka(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ht+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ht?(e[4]=n[i],un(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=zr(i,s),a=n[11],u=Ur(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,$r(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),un(Da(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Oa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Pr(this._lContainer,e);n&&(cn(Da(this._lContainer),e),Lr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Pr(this._lContainer,e);return n&&null!=cn(Da(this._lContainer),e)?new fa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Oa(t){return t[8]}function Da(t){return t[8]||(t[8]=[])}function Na(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=Ot(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Vr(n,Ur(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Bi(r,e,i,t),$i(e,n)}return new ka(n,t,e)}const Ra={};class Pa extends jo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new Va(e,this.ngModule)}}function La(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Fa=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sr});class Va extends Vo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(oi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return La(this.componentDef.inputs)}get outputs(){return La(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ra,i);return s!==Ra||r===Ra?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Ho,kt),o=i.get(Zo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===V.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Nr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Sr,clean:Ji,playerHandler:null,flags:0},f=xi(0,null,null,1,0,null,null,null,null,null),d=yi(null,f,h,l,null,null,s,a,o,i);let p,g;ae(d);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=vi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ns(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&Kr(i,t,a.classes),null!==a.styles&&Zr(i,t,a.styles)));const c=r.createRenderer(t,e),l=yi(n,Ai(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(je(Le(a,n),o,e.type),Li(o,a),Vi(a,n.length,1)),$i(n,l),n[20]=l}(c,this.componentDef,d,s,a);if(c)if(n)Te(a,c,["ng-version",Wo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!ni(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&Kr(a,c,e.join(" "))}if(g=Rt(f,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Mi(t,r,e,_i(t,e,1,null),n));const i=Qe(e,t,r.directiveStart,r);yr(i,e);const s=Nt(r,e);return s&&yr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Ht();e.contentQueries(1,o,t.directiveStart)}const a=Ht();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(pe(a.index),Ri(n[1],a,0,a.directiveStart,a.directiveEnd,e),Pi(e,o)),o}(t,this.componentDef,d,h,[_s]),bi(f,d,null)}finally{fe()}return new Ma(this.componentType,p,qo(g,d),d,g)}}class Ma extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new da(r),this.componentType=t}get injector(){return new We(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ja=new Map;class Ua extends Ta{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Pa(this);const n=ct(t),r=t[K]||null;r&&xo(r),this._bootstrapComponents=Tr(n.bootstrap),this._r3Injector=ls(t,e,[{provide:Ta,useValue:this},{provide:jo,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=vs.THROW_IF_NOT_FOUND,n=D.Default){return t===vs||t===Ta||t===rs?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class qa extends Ca{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,ja.get(i),n),ja.set(i,n));const s=Tr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Ua(this.moduleType,t)}}function Ba(t,e,n,r){return function(t,e,n,r,i,s){const o=e+n;return ks(t,o,i)?function(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function(t,e){const n=t[e];return n===ai?void 0:n}(t,o+1)}(Bt(),function(){const t=Ut.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}function Ga(t){return e=>{setTimeout(t,void 0,e)}}const za=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Ga(u),a&&(a=Ga(a)),c&&(c=Ga(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Ha(){return this._results[Is()]()}class $a{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Is(),n=$a.prototype;n[e]||(n[e]=Ha)}get changes(){return this._changes||(this._changes=new za)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=on(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Qa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Qa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Za{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Za(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==su(t,e).matches&&this.queries[e].setDirty()}}class Ka{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Wa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Wa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ja{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ja(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ya(e,i)),this.matchTNodeWithReadOption(t,e,$e(e,t,i,!1,!1))}else n===ba?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,$e(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Go||r===Aa||r===ba&&4&e.type)this.addMatch(e.index,-2);else{const n=$e(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ya(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Xa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?qo(t,e):4&t.type?Sa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Go?qo(e,t):n===ba?Sa(e,t):n===Aa?Na(e,t):void 0}(t,e,r):Qe(t,t[1],n,e)}function tu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Xa(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function eu(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=tu(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ht;t<o.length;t++){const e=o[t];e[17]===e[3]&&eu(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];eu(n[1],n,i,r)}}}}}return r}function nu(t){const e=Bt(),n=Gt(),r=re();ie(r+1);const i=su(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?eu(n,e,r,[]):tu(n,e,i,r);t.reset(s,zo),t.notifyOnChanges()}return!0}return!1}function ru(t,e,n,r){const i=Gt();if(i.firstCreatePass){const s=Ht();(function(t,e,n){null===t.queries&&(t.queries=new Wa),t.queries.track(new Ja(e,n))})(i,new Ka(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new $a(4==(4&n));ki(t,e,r,r.destroy),null===e[19]&&(e[19]=new Za),e[19].queries.push(new Qa(r))}(i,Bt(),n)}function iu(){return t=Bt(),e=re(),t[19].queries[e].queryList;var t,e}function su(t,e){return t.queries.getByIndex(e)}const ou=new nn("Application Initializer");let au=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Uo,this.reject=Uo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(qs(e))t.push(e);else if(Gs(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(bn(ou,8))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const uu=new nn("AppId"),cu={provide:uu,useFactory:function(){return`${lu()}${lu()}${lu()}`},deps:[]};function lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hu=new nn("Platform Initializer"),fu=new nn("Platform ID"),du=new nn("appBootstrapListener");let pu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const gu=new nn("LocaleId"),mu=new nn("DefaultCurrencyCode");class yu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const vu=function(t){return new qa(t)},_u=vu,bu=function(t){return Promise.resolve(vu(t))},wu=function(t){const e=vu(t),n=Tr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new Va(n)),t},[]);return new yu(e,n)},Eu=wu,Su=function(t){return Promise.resolve(wu(t))};let Tu=(()=>{class t{constructor(){this.compileModuleSync=_u,this.compileModuleAsync=bu,this.compileModuleAndAllComponentsSync=Eu,this.compileModuleAndAllComponentsAsync=Su}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const Cu=(()=>Promise.resolve(0))();function Iu(t){"undefined"==typeof Zone?Cu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Au{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new za(!1),this.onMicrotaskEmpty=new za(!1),this.onStable=new za(!1),this.onError=new za(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ou(t),t.isCheckStableRunning=!0,ku(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ou(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Du(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Nu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Du(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Nu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ou(t),ku(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Au.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Au.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,xu,Uo,Uo);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const xu={};function ku(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ou(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Du(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nu(t){t._nesting--,ku(t)}class Ru{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new za,this.onMicrotaskEmpty=new za,this.onStable=new za,this.onError=new za}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Pu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Au.assertNotInAngularZone(),Iu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Iu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(bn(Au))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})(),Lu=(()=>{class t{constructor(){this._applications=new Map,ju.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ju.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();class Fu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Vu(t){ju=t}let Mu,ju=new Fu,Uu=!0,qu=!1;function Bu(){return qu=!0,Uu}function Gu(){if(qu)throw new Error("Cannot enable prod mode after platform setup.");Uu=!1}const zu=new nn("AllowMultipleToken");class Hu{constructor(t,e){this.name=t,this.token=e}}function $u(t,e,n=[]){const r=`Platform: ${e}`,i=new nn(r);return(e=[])=>{let s=Qu();if(!s||s.injector.get(zu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ss,useValue:"platform"});!function(t){if(Mu&&!Mu.destroyed&&!Mu.injector.get(zu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Mu=t.get(Zu);const e=t.get(hu,null);e&&e.forEach(t=>t())}(vs.create({providers:t,name:r}))}return function(t){const e=Qu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Qu(){return Mu&&!Mu.destroyed?Mu:null}let Zu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ru:("zone.js"===t?void 0:t)||new Au({enableLongStackTrace:Bu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Au,useValue:n}];return n.run(()=>{const e=vs.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(Er,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Ju(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return qs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(au);return t.runInitializers(),t.donePromise.then(()=>(xo(i.injector.get(gu,Io)||Io),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ku({},e);return function(t,e,n){const r=new qa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Wu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(bn(vs))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function Ku(t,e){return Array.isArray(e)?e.reduce(Ku,t):Object.assign(Object.assign({},t),e)}let Wu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Au.assertNotInAngularZone(),Iu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Au.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Vo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ta),i=n.create(vs.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Pu,null),a=o&&i.injector.get(Lu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Ju(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ju(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(du,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(bn(Au),bn(vs),bn(Er),bn(jo),bn(au))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function Ju(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Yu{}class Xu{}const tc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ec=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||tc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>nc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>nc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(bn(Tu),bn(Xu,8))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function nc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const rc=function(t){return null},ic=$u(null,"core",[{provide:fu,useValue:"unknown"},{provide:Zu,deps:[vs]},{provide:Lu,deps:[]},{provide:pu,deps:[]}]),sc=[{provide:Wu,useClass:Wu,deps:[Au,vs,Er,jo,au]},{provide:Fa,deps:[Au],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:au,useClass:au,deps:[[new Tn,ou]]},{provide:Tu,useClass:Tu,deps:[]},cu,{provide:ua,useFactory:function(){return ya},deps:[]},{provide:la,useFactory:function(){return va},deps:[]},{provide:gu,useFactory:function(t){return xo(t=t||"undefined"!=typeof $localize&&$localize.locale||Io),t},deps:[[new Sn(gu),new Tn,new Cn]]},{provide:mu,useValue:"USD"}];let oc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(bn(Wu))},t.\u0275mod=rt({type:t}),t.\u0275inj=S({providers:sc}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>I,xv:()=>_,Dh:()=>v,HU:()=>d,GT:()=>y,sI:()=>T,on:()=>w,ss:()=>p,pX:()=>m,yq:()=>E});var r=n(8489),i=n(8569),s=n(6599),o=n(4187),a=n(9098),u=n(7368),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(g.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig"),b=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&S("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const E=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:w,deps:[v,u.R0b,[new u.FiY,_]]};let I=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",b.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,s=n(4762),o=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=f);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(b);const w=b},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(250),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>d});var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>_,r3:()=>E,Sg:()=>u,ne:()=>S,p$:()=>s,ZB:()=>o,m9:()=>I,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>g,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>y});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,_.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),_=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?b(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new v(i,a,r);return u},t}();function b(t,e){return t.replace(w,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var w=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){var n=new T(t,e);return n.subscribe.bind(n)}var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function I(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062),i="8.7.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),s=n(7498),o=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(1484),i=n(4294);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),s=n(7570),o=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),s=n(7570),o=n(5331),a=n(1484),u=n(4294);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),s=n(5024);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,s.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),s=n(6015);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),s=n(7570),o=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(8318);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),s=n(7570),o=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(8318),i=n(625),s=n(2570);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),s=n(7471),o=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(6163),i=n(9342),s=n(2570);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(3982),i=n(3392);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(9996),i=n(9764),s=n(6882);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),s=n(878),o=n(8318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return t=this.error,new o.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(8318);let i=1;const s=(()=>Promise.resolve())(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class f extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n(8470);class g extends r.y{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(6673);function i(){}var s=n(5024);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(8318),i=n(7570);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(8277);const i=new(n(1098).v)(r.o)},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var s=n(1098);class o extends s.v{}const a=new o(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),s=n(5686),o=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},766:(t,e,n)=>{"use strict";var r=n(7368);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(o))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(S(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,S(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function S(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const C=r.kL8;class I{}let A=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class x{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Qd){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new O(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new O(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class O{constructor(t,e){this.record=t,this.view=e}}let D=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:I,useClass:A}]}),t})();function L(t){return"server"===t}let F=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new V((0,r.LFG)(o),window)}),t})();class V{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=M(this.window.history)||M(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Qd){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Qd){return!1}}}function M(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class j extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new j,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(q=q||document.querySelector("base"),q?q.getAttribute("href"):null);return null==e?null:function(t){U=U||document.createElement("a"),U.setAttribute("href",t);const e=U.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){q=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let U,q=null;const B=new r.OlP("TRANSITION_ID"),G=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[B,o,r.zs3],multi:!0}];class z{static init(){(0,r.VLi)(new z)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let H=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const $=new r.OlP("EventManagerPlugins");let Q=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let K=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),W=(()=>{class t extends K{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(J),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(J))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function J(t){s().remove(t)}const Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(X,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Q),r.LFG(W),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class st extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends Z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends Z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(pt)},token:t,providedIn:"root"}),t})();function dt(t){return new pt(t.get(o))}let pt=(()=>{class t extends ft{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.q3G.NONE:return e;case r.q3G.HTML:return(0,r.qzn)(e,"HTML")?(0,r.z3N)(e):(0,r.EiD)(this._doc,String(e)).toString();case r.q3G.STYLE:return(0,r.qzn)(e,"Style")?(0,r.z3N)(e):e;case r.q3G.SCRIPT:if((0,r.qzn)(e,"Script"))return(0,r.z3N)(e);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(e),(0,r.qzn)(e,"URL")?(0,r.z3N)(e):(0,r.mCW)(String(e));case r.q3G.RESOURCE_URL:if((0,r.qzn)(e,"ResourceURL"))return(0,r.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,r.JVY)(t)}bypassSecurityTrustStyle(t){return(0,r.L6k)(t)}bypassSecurityTrustScript(t){return(0,r.eBb)(t)}bypassSecurityTrustUrl(t){return(0,r.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,r.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:function(){return dt((0,r.LFG)(r.gxx))},token:t,providedIn:"root"}),t})();const gt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){j.makeCurrent(),z.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),mt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:$,useClass:ot,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:$,useClass:ht,multi:!0,deps:[o]},[],{provide:nt,useClass:nt,deps:[Q,W,r.AFp]},{provide:r.FYo,useExisting:nt},{provide:K,useExisting:W},{provide:W,useClass:W,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:Q,useClass:Q,deps:[$,r.R0b]},{provide:class{},useClass:H,deps:[]},[]];let yt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:B,useExisting:r.AFp},G]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:mt,imports:[P,r.hGG]}),t})();"undefined"!=typeof window&&window;var vt=n(8569),_t=n(8318),bt=n(9764),wt=n(878),Et=n(7471);function St(...t){return(0,Et.J)(1)((0,wt.of)(...t))}var Tt=n(6163);function Ct(...t){const e=t[t.length-1];return(0,Tt.K)(e)?(t.pop(),n=>St(t,n,e)):e=>St(t,e)}var It=n(6673);function At(){return t=>t.lift(new xt)}class xt{call(t,e){return e.subscribe(new kt(t))}}class kt extends It.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Ot=n(9996);function Dt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Nt(t,e,n))}}class Nt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Rt(t,this.accumulator,this.seed,this.hasSeed))}}class Rt extends It.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Pt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Lt(t,this.compare,this.keySelector))}}class Lt extends It.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function Ft(t,e){return function(n){return n.lift(new Vt(t,e))}}class Vt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Mt(t,this.predicate,this.thisArg))}}class Mt extends It.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var jt=n(9098),Ut=n(2346),qt=n(1858),Bt=n(1062),Gt=n(4762),zt=n(250),Ht=n(308),$t=function(t,e){return($t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Qt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Zt,Kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wt=Wt||{},Jt=Kt||self;function Yt(){}function Xt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function te(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ee="closure_uid_"+(1e9*Math.random()>>>0),ne=0;function re(t,e,n){return t.call.apply(t.bind,arguments)}function ie(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function se(t,e,n){return(se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?re:ie).apply(null,arguments)}function oe(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ae(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function ue(){this.s=this.s,this.o=this.o}var ce={};ue.prototype.s=!1,ue.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ee)&&t[ee]||(t[ee]=++ne)}(this);delete ce[t]}},ue.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var le=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},he=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function fe(t){return Array.prototype.concat.apply([],arguments)}function de(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function pe(t){return/^[\s\xa0]*$/.test(t)}var ge,me=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ye(t,e){return-1!=t.indexOf(e)}function ve(t,e){return t<e?-1:t>e?1:0}t:{var _e=Jt.navigator;if(_e){var be=_e.userAgent;if(be){ge=be;break t}}ge=""}function we(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ee(t){var e={};for(var n in t)e[n]=t[n];return e}var Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<Se.length;s++)n=Se[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ce(t){return Ce[" "](t),t}Ce[" "]=Yt;var Ie,Ae,xe=ye(ge,"Opera"),ke=ye(ge,"Trident")||ye(ge,"MSIE"),Oe=ye(ge,"Edge"),De=Oe||ke,Ne=ye(ge,"Gecko")&&!(ye(ge.toLowerCase(),"webkit")&&!ye(ge,"Edge"))&&!(ye(ge,"Trident")||ye(ge,"MSIE"))&&!ye(ge,"Edge"),Re=ye(ge.toLowerCase(),"webkit")&&!ye(ge,"Edge");function Pe(){var t=Jt.document;return t?t.documentMode:void 0}t:{var Le="",Fe=(Ae=ge,Ne?/rv:([^\);]+)(\)|;)/.exec(Ae):Oe?/Edge\/([\d\.]+)/.exec(Ae):ke?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ae):Re?/WebKit\/(\S+)/.exec(Ae):xe?/(?:Version)[ \/]?(\S+)/.exec(Ae):void 0);if(Fe&&(Le=Fe?Fe[1]:""),ke){var Ve=Pe();if(null!=Ve&&Ve>parseFloat(Le)){Ie=String(Ve);break t}}Ie=Le}var Me={};var je=Jt.document&&ke&&(Pe()||parseInt(Ie,10))||void 0,Ue=function(){if(!Jt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Jt.addEventListener("test",Yt,e),Jt.removeEventListener("test",Yt,e)}catch(n){}return t}();function qe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ne){t:{try{Ce(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Be.Z.h.call(this)}}qe.prototype.h=function(){this.defaultPrevented=!0},ae(Be,qe);var Ge={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),He=0;function $e(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++He,this.ca=this.fa=!1}function Qe(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ze(t){this.src=t,this.g={},this.h=0}function Ke(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=le(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Qe(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function We(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Ze.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=We(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new $e(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),Ye={};function Xe(t,e,n,r,i){if(r&&r.once)return en(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Xe(t,e[s],n,r,i);return null}return n=cn(n),t&&t[ze]?t.N(e,n,te(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=te(i)?!!i.capture:!!i,a=an(t);if(a||(t[Je]=a=new Ze(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=on;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ue||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function en(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)en(t,e[s],n,r,i);return null}return n=cn(n),t&&t[ze]?t.O(e,n,te(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)nn(t,e[s],n,r,i);else r=te(r)?!!r.capture:!!r,n=cn(n),t&&t[ze]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=We(s=t.g[e],n,r,i))&&(Qe(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=an(t))&&(e=t.g[e.toString()],t=-1,e&&(t=We(e,n,r,i)),(n=-1<t?e[t]:null)&&rn(n))}function rn(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ze])Ke(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=an(e))?(Ke(n,t),0==n.h&&(n.src=null,e[Je]=null)):Qe(t)}}}function sn(t){return t in Ye?Ye[t]:Ye[t]="on"+t}function on(t,e){if(t.ca)t=!0;else{e=new Be(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&rn(t),t=n.call(r,e)}return t}function an(t){return(t=t[Je])instanceof Ze?t:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(t){return"function"==typeof t?t:(t[un]||(t[un]=function(e){return t.handleEvent(e)}),t[un])}function ln(){ue.call(this),this.i=new Ze(this),this.P=this,this.I=null}function hn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new qe(e,t);else if(e instanceof qe)e.target=e.target||t;else{var i=e;Te(e=new qe(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=fn(o,r,!0,e)&&i}if(i=fn(o=e.g=t,r,!0,e)&&i,i=fn(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=fn(o=e.g=n[s],r,!1,e)&&i}function fn(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Ke(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ae(ln,ue),ln.prototype[ze]=!0,ln.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},ln.prototype.M=function(){if(ln.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Qe(n[r]);delete e.g[t],e.h--}}this.I=null},ln.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ln.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var dn=Jt.JSON.stringify;function pn(){var t=En,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var gn,mn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=yn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),yn=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new vn},function(t){return t.reset()}),vn=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function _n(t){Jt.setTimeout(function(){throw t},0)}function bn(t,e){gn||function(){var t=Jt.Promise.resolve(void 0);gn=function(){t.then(Sn)}}(),wn||(gn(),wn=!0),En.add(t,e)}var wn=!1,En=new mn;function Sn(){for(var t;t=pn();){try{t.h.call(t.g)}catch(n){_n(n)}var e=yn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}wn=!1}function Tn(t,e){ln.call(this),this.h=t||1,this.g=e||Jt,this.j=se(this.kb,this),this.l=Date.now()}function Cn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function In(t,e,n){if("function"==typeof t)n&&(t=se(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=se(t.handleEvent,t)}return 2147483647<Number(e)?-1:Jt.setTimeout(t,e||0)}function An(t){t.g=In(function(){t.g=null,t.i&&(t.i=!1,An(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}ae(Tn,ln),(Zt=Tn.prototype).da=!1,Zt.S=null,Zt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hn(this,"tick"),this.da&&(Cn(this),this.start()))}},Zt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zt.M=function(){Tn.Z.M.call(this),Cn(this),delete this.g};var xn=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}$t(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:An(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ue);function kn(t){ue.call(this),this.h=t,this.g={}}ae(kn,ue);var On=[];function Dn(t,e,n,r){Array.isArray(n)||(n&&(On[0]=n.toString()),n=On);for(var i=0;i<n.length;i++){var s=Xe(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Nn(t){we(t.g,function(t,e){this.g.hasOwnProperty(e)&&rn(t)},t),t.g={}}function Rn(){this.g=!0}function Pn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return dn(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}kn.prototype.M=function(){kn.Z.M.call(this),Nn(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rn.prototype.Aa=function(){this.g=!1},Rn.prototype.info=function(){};var Ln={},Fn=null;function Vn(){return Fn=Fn||new ln}function Mn(t){qe.call(this,Ln.Ma,t)}function jn(t){var e=Vn();hn(e,new Mn(e,t))}function Un(t,e){qe.call(this,Ln.STAT_EVENT,t),this.stat=e}function qn(t){var e=Vn();hn(e,new Un(e,t))}function Bn(t,e){qe.call(this,Ln.Na,t),this.size=e}function Gn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Jt.setTimeout(function(){t()},e)}Ln.Ma="serverreachability",ae(Mn,qe),Ln.STAT_EVENT="statevent",ae(Un,qe),Ln.Na="timingevent",ae(Bn,qe);var zn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $n(){}function Qn(){}$n.prototype.h=null;var Zn,Kn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wn(){qe.call(this,"d")}function Jn(){qe.call(this,"c")}function Yn(){}function Xn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new kn(this),this.P=er,this.W=new Tn(t=De?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tr}function tr(){this.i=null,this.g="",this.h=!1}ae(Wn,qe),ae(Jn,qe),ae(Yn,$n),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Zn=new Yn;var er=45e3,nr={},rr={};function ir(t,e,n){t.K=1,t.v=Ar(wr(e)),t.s=n,t.U=!0,sr(t,null)}function sr(t,e){t.F=Date.now(),cr(t),t.A=wr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ur(n.h,"t",r),t.C=0,n=t.l.H,t.h=new tr,t.g=qi(t.l,n?e:null,!t.s),0<t.O&&(t.L=new xn(se(t.Ia,t,t.g),t.O)),Dn(t.V,t.g,"readystatechange",t.gb),e=t.H?Ee(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),jn(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function or(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function ar(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=ur(t,n))==rr){4==e&&(t.o=4,qn(14),i=!1),Pn(t.j,t.m,null,"[Incomplete Response]");break}if(r==nr){t.o=4,qn(15),Pn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Pn(t.j,t.m,r,null),pr(t,r)}or(t)&&r!=rr&&r!=nr&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,qn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ri(e),e.L=!0,qn(11))):(Pn(t.j,t.m,n,"[Invalid Chunked Response]"),dr(t),fr(t))}function ur(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?rr:(n=Number(e.substring(n,r)),isNaN(n)?nr:(r+=1)+n>e.length?rr:(e=e.substr(r,n),t.C=r+n,e))}function cr(t){t.Y=Date.now()+t.P,lr(t,t.P)}function lr(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Gn(se(t.eb,t),e)}function hr(t){t.B&&(Jt.clearTimeout(t.B),t.B=null)}function fr(t){0==t.l.G||t.I||Fi(t.l,t)}function dr(t){hr(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Cn(t.W),Nn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function pr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Qr(n.i,t)))if(n.I=t.N,!t.J&&Qr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Li(n),Ti(n)}Ni(n),qn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Gn(se(n.ab,n),6e3));if(1>=$r(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else Mi(n,11)}else if((t.J||n.g==t)&&Li(n),!pe(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ye(l,"spdy")||ye(l,"quic")||ye(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Zr(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ir(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Ui(r,r.H?r.la:null,r.W),d.J){Kr(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(hr(p),cr(p)),r.g=d}else Di(r);0<n.l.length&&Ai(n)}else"stop"!=s[0]&&"close"!=s[0]||Mi(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Mi(n,7):Si(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}jn(4)}catch(s){}}function gr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Xt(t)||"string"==typeof t)he(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Xt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Xt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function mr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mr)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function yr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];vr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)vr(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function vr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Zt=Xn.prototype).setTimeout=function(t){this.P=t},Zt.gb=function(t){t=t.target;var e=this.L;e&&3==vi(t)?e.l():this.Ia(t)},Zt.Ia=function(t){try{if(t==this.g)t:{var e=vi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||De||this.g&&(this.h.h||this.g.ga()||_i(this.g)))){this.I||4!=e||7==n||jn(8==n||0>=r?3:2),hr(this);var i=this.g.ba();this.N=i;e:if(or(this)){var s=_i(this.g);t="";var o=s.length,a=4==vi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){dr(this),fr(this);var u="";break e}this.h.i=new Jt.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,qn(12),dr(this),fr(this);break t}Pn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pr(this,i)}this.U?(ar(this,e,u),De&&this.i&&3==e&&(Dn(this.V,this.W,"tick",this.fb),this.W.start())):(Pn(this.j,this.m,u,null),pr(this,u)),4==e&&dr(this),this.i&&!this.I&&(4==e?Fi(this.l,this):(this.i=!1,cr(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,qn(12)):(this.o=0,qn(13)),dr(this),fr(this)}}}catch(e){}},Zt.fb=function(){if(this.g){var t=vi(this.g),e=this.g.ga();this.C<e.length&&(hr(this),ar(this,t,e),this.i&&4!=t&&cr(this))}},Zt.cancel=function(){this.I=!0,dr(this)},Zt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(jn(3),qn(17)),dr(this),this.o=2,fr(this)):lr(this,this.Y-t)},(Zt=mr.prototype).R=function(){yr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Zt.T=function(){return yr(this),this.g.concat()},Zt.get=function(t,e){return vr(this.h,t)?this.h[t]:e},Zt.set=function(t,e){vr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Zt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var _r=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function br(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof br){this.g=void 0!==e?e:t.g,Er(this,t.j),this.s=t.s,Sr(this,t.i),Tr(this,t.m),this.l=t.l,e=t.h;var n=new Fr;n.i=e.i,e.g&&(n.g=new mr(e.g),n.h=e.h),Cr(this,n),this.o=t.o}else t&&(n=String(t).match(_r))?(this.g=!!e,Er(this,n[1]||"",!0),this.s=xr(n[2]||""),Sr(this,n[3]||"",!0),Tr(this,n[4]),this.l=xr(n[5]||"",!0),Cr(this,n[6]||"",!0),this.o=xr(n[7]||"")):(this.g=!!e,this.h=new Fr(null,this.g))}function wr(t){return new br(t)}function Er(t,e,n){t.j=n?xr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Sr(t,e,n){t.i=n?xr(e,!0):e}function Tr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Cr(t,e,n){e instanceof Fr?(t.h=e,function(t,e){e&&!t.j&&(Vr(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Mr(this,e),Ur(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=kr(e,Pr)),t.h=new Fr(e,t.g))}function Ir(t,e,n){t.h.set(e,n)}function Ar(t){return Ir(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function xr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Or),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Or(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}br.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kr(e,Dr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(kr(e,Dr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(kr(n,"/"==n.charAt(0)?Rr:Nr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kr(n,Lr)),t.join("")};var Dr=/[#\/\?@]/g,Nr=/[#\?:]/g,Rr=/[#\?]/g,Pr=/[#\?@]/g,Lr=/#/g;function Fr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vr(t){t.g||(t.g=new mr,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Mr(t,e){Vr(t),e=qr(t,e),vr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,vr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&yr(t)))}function jr(t,e){return Vr(t),e=qr(t,e),vr(t.g.h,e)}function Ur(t,e,n){Mr(t,e),0<n.length&&(t.i=null,t.g.set(qr(t,e),de(n)),t.h+=n.length)}function qr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Zt=Fr.prototype).add=function(t,e){Vr(this),this.i=null,t=qr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Zt.forEach=function(t,e){Vr(this),this.g.forEach(function(n,r){he(n,function(n){t.call(e,n,r,this)},this)},this)},Zt.T=function(){Vr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},Zt.R=function(t){Vr(this);var e=[];if("string"==typeof t)jr(this,t)&&(e=fe(e,this.g.get(qr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=fe(e,t[n])}return e},Zt.set=function(t,e){return Vr(this),this.i=null,jr(this,t=qr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Zt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Zt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var Br=function(){return function(t,e){this.h=t,this.g=e}}();function Gr(t){this.l=t||zr,t=Jt.PerformanceNavigationTiming?0<(t=Jt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Jt.g&&Jt.g.Ea&&Jt.g.Ea()&&Jt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zr=10;function Hr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function $r(t){return t.h?1:t.g?t.g.size:0}function Qr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Zr(t,e){t.g?t.g.add(e):t.h=e}function Kr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Wr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Qt(t.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return de(t.i)}function Jr(){}function Yr(){this.g=new Jr}function Xr(t,e,n){var r=n||"";try{gr(t,function(t,n){var i=t;te(t)&&(i=dn(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(ug){throw e.push(r+"type="+encodeURIComponent("_badmap")),ug}}function ti(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function ei(t){this.l=t.$b||null,this.j=t.ib||!1}function ni(t,e){ln.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=ri,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gr.prototype.cancel=function(){var t,e;if(this.i=Wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Qt(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Jr.prototype.stringify=function(t){return Jt.JSON.stringify(t,void 0)},Jr.prototype.parse=function(t){return Jt.JSON.parse(t,void 0)},ae(ei,$n),ei.prototype.g=function(){return new ni(this.l,this.j)},ei.prototype.i=function(t){return function(){return t}}({}),ae(ni,ln);var ri=0;function ii(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function si(t){t.readyState=4,t.l=null,t.j=null,t.A=null,oi(t)}function oi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Zt=ni.prototype).open=function(t,e){if(this.readyState!=ri)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,oi(this)},Zt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Jt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Zt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,si(this)),this.readyState=ri},Zt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Jt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ii(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Zt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?si(this):oi(this),3==this.readyState&&ii(this)}},Zt.Ua=function(t){this.g&&(this.response=this.responseText=t,si(this))},Zt.Ta=function(t){this.g&&(this.response=t,si(this))},Zt.ha=function(){this.g&&si(this)},Zt.setRequestHeader=function(t,e){this.v.append(t,e)},Zt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Zt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ni.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ai=Jt.JSON.parse;function ui(t){ln.call(this),this.headers=new mr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ci,this.K=this.L=!1}ae(ui,ln);var ci="",li=/^https?$/i,hi=["POST","PUT"];function fi(t){return"content-type"==t.toLowerCase()}function di(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,pi(t),mi(t)}function pi(t){t.D||(t.D=!0,hn(t,"complete"),hn(t,"error"))}function gi(t){if(t.h&&void 0!==Wt&&(!t.C[1]||4!=vi(t)||2!=t.ba()))if(t.v&&4==vi(t))In(t.Fa,0,t);else if(hn(t,"readystatechange"),4==vi(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.H).match(_r)[1]||null;if(!s&&Jt.self&&Jt.self.location){var o=Jt.self.location.protocol;s=o.substr(0,o.length-1)}i=!li.test(s?s.toLowerCase():"")}e=i}if(e)hn(t,"complete"),hn(t,"success");else{t.m=6;try{var a=2<vi(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",pi(t)}}finally{mi(t)}}}function mi(t,e){if(t.g){yi(t);var n=t.g,r=t.C[0]?Yt:null;t.g=null,t.C=null,e||hn(t,"ready");try{n.onreadystatechange=r}catch(ug){}}}function yi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Jt.clearTimeout(t.A),t.A=null)}function vi(t){return t.g?t.g.readyState:0}function _i(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ci:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function bi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return we(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ir(t,e,n))}function wi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ei(t){this.za=0,this.l=[],this.h=new Rn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=wi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=wi("baseRetryDelayMs",5e3,t),this.$a=wi("retryDelaySeedMs",1e4,t),this.Ya=wi("forwardChannelMaxRetries",2,t),this.ra=wi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Gr(t&&t.concurrentRequestLimit),this.Ca=new Yr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Si(t){if(Ci(t),3==t.G){var e=t.V++,n=wr(t.F);Ir(n,"SID",t.J),Ir(n,"RID",e),Ir(n,"TYPE","terminate"),ki(t,n),(e=new Xn(t,t.h,e,void 0)).K=2,e.v=Ar(wr(n)),n=!1,Jt.navigator&&Jt.navigator.sendBeacon&&(n=Jt.navigator.sendBeacon(e.v.toString(),"")),!n&&Jt.Image&&((new Image).src=e.v,n=!0),n||(e.g=qi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),cr(e)}ji(t)}function Ti(t){t.g&&(Ri(t),t.g.cancel(),t.g=null)}function Ci(t){Ti(t),t.u&&(Jt.clearTimeout(t.u),t.u=null),Li(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Jt.clearTimeout(t.m),t.m=null)}function Ii(t,e){t.l.push(new Br(t.Za++,e)),3==t.G&&Ai(t)}function Ai(t){Hr(t.i)||t.m||(t.m=!0,bn(t.Ha,t),t.C=0)}function xi(t,e){var n;n=e?e.m:t.V++;var r=wr(t.F);Ir(r,"SID",t.J),Ir(r,"RID",n),Ir(r,"AID",t.U),ki(t,r),t.o&&t.s&&bi(r,t.o,t.s),n=new Xn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Oi(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Zr(t.i,n),ir(n,r,e)}function ki(t,e){t.j&&gr({},function(t,n){Ir(e,n,t)})}function Oi(t,e,n){n=Math.min(t.l.length,n);var r=t.j?se(t.j.Oa,t.j,t):null;t:for(var i=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{Xr(l,o,"req"+c+"_")}catch(ws){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Di(t){t.g||t.u||(t.Y=1,bn(t.Ga,t),t.A=0)}function Ni(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Gn(se(t.Ga,t),Vi(t,t.A)),t.A++,0))}function Ri(t){null!=t.B&&(Jt.clearTimeout(t.B),t.B=null)}function Pi(t){t.g=new Xn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=wr(t.oa);Ir(e,"RID","rpc"),Ir(e,"SID",t.J),Ir(e,"CI",t.N?"0":"1"),Ir(e,"AID",t.U),ki(t,e),Ir(e,"TYPE","xmlhttp"),t.o&&t.s&&bi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ar(wr(e)),n.s=null,n.U=!0,sr(n,t)}function Li(t){null!=t.v&&(Jt.clearTimeout(t.v),t.v=null)}function Fi(t,e){var n=null;if(t.g==e){Li(t),Ri(t),t.g=null;var r=2}else{if(!Qr(t.i,e))return;n=e.D,Kr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;hn(r=Vn(),new Bn(r,n,e,i)),Ai(t)}else Di(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!($r(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Gn(se(t.Ha,t,e),Vi(t,t.C)),t.C++,0)))}(t,e)||2==r&&Ni(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Mi(t,5);break;case 4:Mi(t,10);break;case 3:Mi(t,6);break;default:Mi(t,2)}}function Vi(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Mi(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=se(t.jb,t);n||(n=new br("//www.google.com/images/cleardot.gif"),Jt.location&&"http"==Jt.location.protocol||Er(n,"https"),Ar(n)),function(t,e){var n=new Rn;if(Jt.Image){var r=new Image;r.onload=oe(ti,n,r,"TestLoadImage: loaded",!0,e),r.onerror=oe(ti,n,r,"TestLoadImage: error",!1,e),r.onabort=oe(ti,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=oe(ti,n,r,"TestLoadImage: timeout",!1,e),Jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else qn(2);t.G=0,t.j&&t.j.va(e),ji(t),Ci(t)}function ji(t){t.G=0,t.I=-1,t.j&&(0==Wr(t.i).length&&0==t.l.length||(t.i.i.length=0,de(t.l),t.l.length=0),t.j.ua())}function Ui(t,e,n){var r=function(t){return t instanceof br?wr(t):new br(t,void 0)}(n);if(""!=r.i)e&&Sr(r,e+"."+r.i),Tr(r,r.m);else{var i=Jt.location;r=function(t,e,n,r){var i=new br(null,void 0);return t&&Er(i,t),e&&Sr(i,e),n&&Tr(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&we(t.aa,function(t,e){Ir(r,e,t)}),n=t.sa,(e=t.D)&&n&&Ir(r,e,n),Ir(r,"VER",t.ma),ki(t,r),r}function qi(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ui(n&&t.Ba&&!t.qa?new ei({ib:!0}):t.qa)).L=t.H,e}function Bi(){}function Gi(){if(ke&&!(10<=Number(je)))throw Error("Environmental error: no available transport.")}function zi(t,e){ln.call(this),this.g=new Ei(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!pe(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pe(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Qi(this)}function Hi(t){Wn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function $i(){Jn.call(this),this.status=1}function Qi(t){this.g=t}(Zt=ui.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zn.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Zn),this.g.onreadystatechange=se(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void di(this,s)}t=n||"";var i=new mr(this.headers);r&&gr(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=fi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Jt.FormData&&t instanceof Jt.FormData,!(0<=le(hi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yi(this),0<this.B&&((this.K=function(t){return ke&&function(){return t=Me,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=me(String(Ie)).split("."),n=me("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var s=e[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=ve(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||ve(0==s[2].length,0==o[2].length)||ve(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=se(this.pa,this)):this.A=In(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){di(this,s)}},Zt.pa=function(){void 0!==Wt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))},Zt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,hn(this,"complete"),hn(this,"abort"),mi(this))},Zt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mi(this,!0)),ui.Z.M.call(this)},Zt.Fa=function(){this.s||(this.F||this.v||this.l?gi(this):this.cb())},Zt.cb=function(){gi(this)},Zt.ba=function(){try{return 2<vi(this)?this.g.status:-1}catch(Ae){return-1}},Zt.ga=function(){try{return this.g?this.g.responseText:""}catch(Ae){return""}},Zt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ai(e)}},Zt.Da=function(){return this.m},Zt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Zt=Ei.prototype).ma=8,Zt.G=1,Zt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Zt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Xn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Te(n=Ee(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Oi(this,e,r),Ir(i=wr(this.F),"RID",t),Ir(i,"CVER",22),this.D&&Ir(i,"X-HTTP-Session-Id",this.D),ki(this,i),this.o&&n&&bi(i,this.o,n),Zr(this.i,e),this.Ra&&Ir(i,"TYPE","init"),this.ja?(Ir(i,"$req",r),Ir(i,"SID","null"),e.$=!0,ir(e,i,null)):ir(e,i,r),this.G=2}}else 3==this.G&&(t?xi(this,t):0==this.l.length||Hr(this.i)||xi(this))},Zt.Ga=function(){if(this.u=null,Pi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Gn(se(this.bb,this),t)}},Zt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qn(10),Ti(this),Pi(this))},Zt.ab=function(){null!=this.v&&(this.v=null,Ti(this),Ni(this),qn(19))},Zt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),qn(2)):(this.h.info("Failed to ping google.com"),qn(1))},(Zt=Bi.prototype).xa=function(){},Zt.wa=function(){},Zt.va=function(){},Zt.ua=function(){},Zt.Oa=function(){},Gi.prototype.g=function(t,e){return new zi(t,e)},ae(zi,ln),zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),bn(se(t.hb,t,e))),qn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Ui(t,null,t.W),Ai(t)},zi.prototype.close=function(){Si(this.g)},zi.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Ii(this.g,e)}else this.v?((e={}).__data__=dn(t),Ii(this.g,e)):Ii(this.g,t)},zi.prototype.M=function(){this.g.j=null,delete this.j,Si(this.g),delete this.g,zi.Z.M.call(this)},ae(Hi,Wn),ae($i,Jn),ae(Qi,Bi),Qi.prototype.xa=function(){hn(this.g,"a")},Qi.prototype.wa=function(t){hn(this.g,new Hi(t))},Qi.prototype.va=function(t){hn(this.g,new $i(t))},Qi.prototype.ua=function(){hn(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,zn.NO_ERROR=0,zn.TIMEOUT=8,zn.HTTP_ERROR=6,Hn.COMPLETE="complete",Qn.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",ln.prototype.listen=ln.prototype.N,ui.prototype.listenOnce=ui.prototype.O,ui.prototype.getLastError=ui.prototype.La,ui.prototype.getLastErrorCode=ui.prototype.Da,ui.prototype.getStatus=ui.prototype.ba,ui.prototype.getResponseJson=ui.prototype.Qa,ui.prototype.getResponseText=ui.prototype.ga,ui.prototype.send=ui.prototype.ea;var Zi=zn,Ki=Hn,Wi=Ln,Ji=ei,Yi=Qn,Xi=ui,ts=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ts.o=-1;var es={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ns=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Gt.ZT)(e,t),e}(Error),rs=new Ht.Yd("@firebase/firestore");function is(){return rs.logLevel}function ss(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(rs.logLevel<=Ht.in.DEBUG){var r=e.map(us);rs.debug.apply(rs,(0,Gt.ev)(["Firestore (8.7.0): "+t],r))}}function os(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(rs.logLevel<=Ht.in.ERROR){var r=e.map(us);rs.error.apply(rs,(0,Gt.ev)(["Firestore (8.7.0): "+t],r))}}function as(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(rs.logLevel<=Ht.in.WARN){var r=e.map(us);rs.warn.apply(rs,(0,Gt.ev)(["Firestore (8.7.0): "+t],r))}}function us(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(ug){return t}}function cs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw os(e),new Error(e)}function ls(t,e){t||cs()}function hs(t,e){return t}function fs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ds=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=fs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ps(t,e){return t<e?-1:t>e?1:0}function gs(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function ms(t){return t+"\0"}var ys=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ns(es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ns(es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ns(es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ns(es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?ps(this.nanoseconds,t.nanoseconds):ps(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),vs=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ys(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function _s(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ws(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Es=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&cs(),void 0===n?n=t.length-e:n>t.length-e&&cs(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new ns(es.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Es),Ts=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ts.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new ns(es.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ns(es.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ns(es.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ns(es.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Es),Is=function(){function t(t){this.fields=t,t.sort(Cs.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return gs(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),As=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return ps(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();As.EMPTY_BYTE_STRING=new As("");var xs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(ls(!!t),"string"==typeof t){var e=0,n=xs.exec(t);if(ls(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Os(t.seconds),nanos:Os(t.nanos)}}function Os(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ds(t){return"string"==typeof t?As.fromBase64String(t):As.fromUint8Array(t)}function Ns(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Rs(t){var e=t.mapValue.fields.__previous_value__;return Ns(e)?Rs(e):e}function Ps(t){var e=ks(t.mapValue.fields.__local_write_time__.timestampValue);return new ys(e.seconds,e.nanos)}function Ls(t){return null==t}function Fs(t){return 0===t&&1/t==-1/0}function Vs(t){return"number"==typeof t&&Number.isInteger(t)&&!Fs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ms=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ss.fromString(e))},t.fromName=function(e){return new t(Ss.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ss.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ss.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ss(e.slice()))},t}();function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ns(t)?4:10:cs()}function Us(t,e){var n=js(t);if(n!==js(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ps(t).isEqual(Ps(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ks(t.timestampValue),r=ks(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ds(t.bytesValue).isEqual(Ds(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Os(t.geoPointValue.latitude)===Os(e.geoPointValue.latitude)&&Os(t.geoPointValue.longitude)===Os(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Os(t.integerValue)===Os(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Os(t.doubleValue),r=Os(e.doubleValue);return n===r?Fs(n)===Fs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return gs(t.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(_s(n)!==_s(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Us(n[i],r[i])))return!1;return!0}(t,e);default:return cs()}}function qs(t,e){return void 0!==(t.values||[]).find(function(t){return Us(t,e)})}function Bs(t,e){var n=js(t),r=js(e);if(n!==r)return ps(n,r);switch(n){case 0:return 0;case 1:return ps(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Os(t.integerValue||t.doubleValue),r=Os(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Gs(t.timestampValue,e.timestampValue);case 4:return Gs(Ps(t),Ps(e));case 5:return ps(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ds(t),r=Ds(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=ps(n[i],r[i]);if(0!==s)return s}return ps(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ps(Os(t.latitude),Os(e.latitude));return 0!==n?n:ps(Os(t.longitude),Os(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=Bs(n[i],r[i]);if(s)return s}return ps(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=ps(r[o],s[o]);if(0!==a)return a;var u=Bs(n[r[o]],i[s[o]]);if(0!==u)return u}return ps(r.length,s.length)}(t.mapValue,e.mapValue);default:throw cs()}}function Gs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ps(t,e);var n=ks(t),r=ks(e),i=ps(n.seconds,r.seconds);return 0!==i?i:ps(n.nanos,r.nanos)}function zs(t){return Hs(t)}function Hs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ks(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ds(t.bytesValue).toBase64():"referenceValue"in t?Ms.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Hs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+Hs(t.fields[s])}return e+"}"}(t.mapValue):cs();var e}function $s(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Qs(t){return!!t&&"integerValue"in t}function Zs(t){return!!t&&"arrayValue"in t}function Ks(t){return!!t&&"nullValue"in t}function Ws(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Js(t){return!!t&&"mapValue"in t}function Ys(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},ks(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return bs(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Ys(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ys(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Xs=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Js(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ys(e)},t.prototype.setAll=function(t){var e=this,n=Cs.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=Ys(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Js(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Us(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Js(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){bs(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Ys(this.value))},t}();function to(t){var e=[];return bs(t.fields,function(t,n){var r=new Cs([t]);if(Js(n)){var i=to(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new Is(e)}var eo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,vs.min(),Xs.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Xs.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Xs.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Xs.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Xs.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),no=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function ro(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new no(t,e,n,r,i,s,o)}function io(t){var e=hs(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+zs(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Ls(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=vo(e.startAt)),e.endAt&&(n+="|ub:",n+=vo(e.endAt)),e.h=n}return e.h}function so(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!bo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!Us(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Eo(t.startAt,e.startAt)&&Eo(t.endAt,e.endAt)}function oo(t){return Ms.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ao=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Gt.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new uo(t,n,r):"array-contains"===n?new fo(t,r):"in"===n?new po(t,r):"not-in"===n?new go(t,r):"array-contains-any"===n?new mo(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new co(t,n):new lo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Bs(e,this.value)):null!==e&&js(this.value)===js(e)&&this.m(Bs(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return cs()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),uo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ms.fromName(r.referenceValue),i}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=Ms.comparator(t.key,this.key);return this.m(e)},e}(ao),co=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ho(0,n),r}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(ao),lo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ho(0,n),r}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(ao);function ho(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Ms.fromName(t.referenceValue)})}var fo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Zs(e)&&qs(e.arrayValue,this.value)},e}(ao),po=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&qs(this.value.arrayValue,e)},e}(ao),go=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){if(qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!qs(this.value.arrayValue,e)},e}(ao),mo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Zs(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return qs(e.value.arrayValue,t)})},e}(ao),yo=function(t,e){this.position=t,this.before=e};function vo(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return zs(t)}).join(",")}var _o=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function bo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function wo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Ms.comparator(Ms.fromName(o.referenceValue),n.key):Bs(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Eo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Us(t.position[n],e.position[n]))return!1;return!0}var So=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function To(t,e,n,r,i,s,o,a){return new So(t,e,n,r,i,s,o,a)}function Co(t){return new So(t)}function Io(t){return!Ls(t.limit)&&"F"===t.limitType}function Ao(t){return!Ls(t.limit)&&"L"===t.limitType}function xo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ko(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Oo(t){return null!==t.collectionGroup}function Do(t){var e=hs(t);if(null===e.p){e.p=[];var n=ko(e),r=xo(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new _o(n)),e.p.push(new _o(Cs.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new _o(Cs.keyField(),u))}}}return e.p}function No(t){var e=hs(t);if(!e.T)if("F"===e.limitType)e.T=ro(e.path,e.collectionGroup,Do(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Do(e);r<i.length;r++){var s=i[r];n.push(new _o(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new yo(e.endAt.position,!e.endAt.before):null,a=e.startAt?new yo(e.startAt.position,!e.startAt.before):null;e.T=ro(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function Ro(t,e,n){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Po(t,e){return so(No(t),No(e))&&t.limitType===e.limitType}function Lo(t){return io(No(t))+"|lt:"+t.limitType}function Fo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+zs(e.value);var e}).join(", ")+"]"),Ls(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+vo(t.startAt)),t.endAt&&(e+=", endAt: "+vo(t.endAt)),"Target("+e+")"}(No(t))+"; limitType="+t.limitType+")"}function Vo(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ms.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!wo(t.startAt,Do(t),e)||t.endAt&&wo(t.endAt,Do(t),e))}(t,e)}function Mo(t){return function(e,n){for(var r=!1,i=0,s=Do(t);i<s.length;i++){var o=s[i],a=jo(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function jo(t,e,n){var r=t.field.isKeyField()?Ms.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Bs(r,i):cs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return cs()}}function Uo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fs(e)?"-0":e}}function qo(t){return{integerValue:""+t}}function Bo(t,e){return Vs(e)?qo(e):Uo(t,e)}var Go=function(){this._=void 0};function zo(t,e,n){return t instanceof Qo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Zo?Ko(t,e):t instanceof Wo?Jo(t,e):function(t,e){var n=$o(t,e),r=Xo(n)+Xo(t.A);return Qs(n)&&Qs(t.A)?qo(r):Uo(t.R,r)}(t,e)}function Ho(t,e,n){return t instanceof Zo?Ko(t,e):t instanceof Wo?Jo(t,e):n}function $o(t,e){return t instanceof Yo?Qs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e}(Go),Zo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Gt.ZT)(e,t),e}(Go);function Ko(t,e){for(var n=ta(e),r=function(t){n.some(function(e){return Us(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Wo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Gt.ZT)(e,t),e}(Go);function Jo(t,e){for(var n=ta(e),r=function(t){n=n.filter(function(e){return!Us(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Yo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Gt.ZT)(e,t),e}(Go);function Xo(t){return Os(t.integerValue||t.doubleValue)}function ta(t){return Zs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ea=function(t,e){this.field=t,this.transform=e},na=function(t,e){this.version=t,this.transformResults=e},ra=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ia(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var sa=function(){};function oa(t,e,n){t instanceof ha?function(t,e,n){var r=t.value.clone(),i=pa(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof fa?function(t,e,n){if(ia(t.precondition,e)){var r=pa(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(da(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n){t instanceof ha?function(t,e,n){if(ia(t.precondition,e)){var r=t.value.clone(),i=ga(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(la(e),r).setHasLocalMutations()}}(t,e,n):t instanceof fa?function(t,e,n){if(ia(t.precondition,e)){var r=ga(t.fieldTransforms,n,e),i=e.data;i.setAll(da(t)),i.setAll(r),e.convertToFoundDocument(la(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ia(t.precondition,e)&&e.convertToNoDocument(vs.min())}(t,e)}function ua(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=$o(s.transform,o||null);null!=a&&(null==n&&(n=Xs.empty()),n.set(s.field,a))}return n||null}function ca(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&gs(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Zo&&e instanceof Zo||t instanceof Wo&&e instanceof Wo?gs(t.elements,e.elements,Us):t instanceof Yo&&e instanceof Yo?Us(t.A,e.A):t instanceof Qo&&e instanceof Qo}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function la(t){return t.isFoundDocument()?t.version:vs.min()}var ha=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,Gt.ZT)(e,t),e}(sa),fa=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,Gt.ZT)(e,t),e}(sa);function da(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function pa(t,e,n){var r=new Map;ls(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ho(o,a,n[i]))}return r}function ga(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,zo(a,u,e))}return r}var ma,ya,va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Gt.ZT)(e,t),e}(sa),_a=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Gt.ZT)(e,t),e}(sa),ba=function(t){this.count=t};function wa(t){switch(t){case es.OK:return cs();case es.CANCELLED:case es.UNKNOWN:case es.DEADLINE_EXCEEDED:case es.RESOURCE_EXHAUSTED:case es.INTERNAL:case es.UNAVAILABLE:case es.UNAUTHENTICATED:return!1;case es.INVALID_ARGUMENT:case es.NOT_FOUND:case es.ALREADY_EXISTS:case es.PERMISSION_DENIED:case es.FAILED_PRECONDITION:case es.ABORTED:case es.OUT_OF_RANGE:case es.UNIMPLEMENTED:case es.DATA_LOSS:return!0;default:return cs()}}function Ea(t){if(void 0===t)return os("GRPC error has no .code"),es.UNKNOWN;switch(t){case ma.OK:return es.OK;case ma.CANCELLED:return es.CANCELLED;case ma.UNKNOWN:return es.UNKNOWN;case ma.DEADLINE_EXCEEDED:return es.DEADLINE_EXCEEDED;case ma.RESOURCE_EXHAUSTED:return es.RESOURCE_EXHAUSTED;case ma.INTERNAL:return es.INTERNAL;case ma.UNAVAILABLE:return es.UNAVAILABLE;case ma.UNAUTHENTICATED:return es.UNAUTHENTICATED;case ma.INVALID_ARGUMENT:return es.INVALID_ARGUMENT;case ma.NOT_FOUND:return es.NOT_FOUND;case ma.ALREADY_EXISTS:return es.ALREADY_EXISTS;case ma.PERMISSION_DENIED:return es.PERMISSION_DENIED;case ma.FAILED_PRECONDITION:return es.FAILED_PRECONDITION;case ma.ABORTED:return es.ABORTED;case ma.OUT_OF_RANGE:return es.OUT_OF_RANGE;case ma.UNIMPLEMENTED:return es.UNIMPLEMENTED;case ma.DATA_LOSS:return es.DATA_LOSS;default:return cs()}}(ya=ma||(ma={}))[ya.OK=0]="OK",ya[ya.CANCELLED=1]="CANCELLED",ya[ya.UNKNOWN=2]="UNKNOWN",ya[ya.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ya[ya.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ya[ya.NOT_FOUND=5]="NOT_FOUND",ya[ya.ALREADY_EXISTS=6]="ALREADY_EXISTS",ya[ya.PERMISSION_DENIED=7]="PERMISSION_DENIED",ya[ya.UNAUTHENTICATED=16]="UNAUTHENTICATED",ya[ya.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ya[ya.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ya[ya.ABORTED=10]="ABORTED",ya[ya.OUT_OF_RANGE=11]="OUT_OF_RANGE",ya[ya.UNIMPLEMENTED=12]="UNIMPLEMENTED",ya[ya.INTERNAL=13]="INTERNAL",ya[ya.UNAVAILABLE=14]="UNAVAILABLE",ya[ya.DATA_LOSS=15]="DATA_LOSS";var Sa=function(){function t(t,e){this.comparator=t,this.root=e||Ca.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ca.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ca.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ta(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ta(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ta(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ta(this.root,t,this.comparator,!0)},t}(),Ta=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ca=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw cs();if(this.right.isRed())throw cs();var t=this.left.check();if(t!==this.right.check())throw cs();return t+(this.isRed()?0:1)},t}();Ca.EMPTY=null,Ca.RED=!0,Ca.BLACK=!1,Ca.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw cs()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ca(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ia=function(){function t(t){this.comparator=t,this.data=new Sa(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Aa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Aa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Aa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),xa=new Sa(Ms.comparator);function ka(){return xa}var Oa=new Sa(Ms.comparator);function Da(){return Oa}var Na=new Sa(Ms.comparator);function Ra(){return Na}var Pa=new Ia(Ms.comparator);function La(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Pa,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var Fa=new Ia(ps);function Va(){return Fa}var Ma=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ja.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(vs.min(),r,Va(),ka(),La())},t}(),ja=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(As.EMPTY_BYTE_STRING,n,La(),La(),La())},t}(),Ua=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},qa=function(t,e){this.targetId=t,this.V=e},Ba=function(t,e,n,r){void 0===n&&(n=As.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ga=function(){function t(){this.S=0,this.D=$a(),this.C=As.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=La(),e=La(),n=La();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:cs()}}),new ja(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=$a()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),za=function(){function t(t){this.W=t,this.G=new Map,this.H=ka(),this.J=Ha(),this.Y=new Ia(ps)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:cs()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(oo(i))if(0===n){var s=new Ms(i.path);this.tt(e,s,eo.newNoDocument(s,vs.min()))}else ls(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&oo(s.target)){var o=new Ms(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,eo.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=La();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ma(t,n,this.Y,this.H,r);return this.H=ka(),this.J=Ha(),this.Y=new Ia(ps),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ga,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ia(ps),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||ss("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ga),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ha(){return new Sa(Ms.comparator)}function $a(){return new Sa(Ms.comparator)}var Qa={asc:"ASCENDING",desc:"DESCENDING"},Za={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ka=function(t,e){this.databaseId=t,this.I=e};function Wa(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ja(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ya(t,e){return Wa(t,e.toTimestamp())}function Xa(t){return ls(!!t),vs.fromTimestamp(function(t){var e=ks(t);return new ys(e.seconds,e.nanos)}(t))}function tu(t,e){return function(t){return new Ss(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function eu(t){var e=Ss.fromString(t);return ls(Cu(e)),e}function nu(t,e){return tu(t.databaseId,e.path)}function ru(t,e){var n=eu(e);if(n.get(1)!==t.databaseId.projectId)throw new ns(es.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ns(es.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ms(au(n))}function iu(t,e){return tu(t.databaseId,e)}function su(t){var e=eu(t);return 4===e.length?Ss.emptyPath():au(e)}function ou(t){return new Ss(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function au(t){return ls(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function uu(t,e,n){return{name:nu(t,e),fields:n.value.mapValue.fields}}function cu(t,e,n){var r=ru(t,e.name),i=Xa(e.updateTime),s=new Xs({mapValue:{fields:e.fields}}),o=eo.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function lu(t,e){var n;if(e instanceof ha)n={update:uu(t,e.key,e.value)};else if(e instanceof va)n={delete:nu(t,e.key)};else if(e instanceof fa)n={update:uu(t,e.key,e.data),updateMask:Tu(e.fieldMask)};else{if(!(e instanceof _a))return cs();n={verify:nu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Qo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yo)return{fieldPath:e.field.canonicalString(),increment:n.A};throw cs()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ya(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:cs()}(t,e.precondition)),n}function hu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ra.updateTime(Xa(t.updateTime)):void 0!==t.exists?ra.exists(t.exists):ra.none()}(e.currentDocument):ra.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(ls("REQUEST_TIME"===e.setToServerValue),n=new Qo):"appendMissingElements"in e?n=new Zo(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Wo(e.removeAllFromArray.values||[]):"increment"in e?n=new Yo(t,e.increment):cs();var r=Cs.fromServerFormat(e.fieldPath);return new ea(r,n)}(t,e)}):[];if(e.update){var i=ru(t,e.update.name),s=new Xs({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Is((t.fieldPaths||[]).map(function(t){return Cs.fromServerFormat(t)}))}(e.updateMask);return new fa(i,s,o,n,r)}return new ha(i,s,n,r)}if(e.delete){var a=ru(t,e.delete);return new va(a,n)}if(e.verify){var u=ru(t,e.verify);return new _a(u,n)}return cs()}function fu(t,e){return{documents:[iu(t,e.path)]}}function du(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=iu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=iu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ws(t.value))return{unaryFilter:{field:bu(t.field),op:"IS_NAN"}};if(Ks(t.value))return{unaryFilter:{field:bu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ws(t.value))return{unaryFilter:{field:bu(t.field),op:"IS_NOT_NAN"}};if(Ks(t.value))return{unaryFilter:{field:bu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bu(t.field),op:_u(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:bu(t.field),direction:vu(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||Ls(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=mu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=mu(e.endAt)),n}function pu(t){var e=su(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ls(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=gu(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new _o(wu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Ls(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=yu(n.startAt));var l=null;return n.endAt&&(l=yu(n.endAt)),To(e,i,a,o,u,"F",c,l)}function gu(t){return t?void 0!==t.unaryFilter?[Su(t)]:void 0!==t.fieldFilter?[Eu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return gu(t)}).reduce(function(t,e){return t.concat(e)}):cs():[]}function mu(t){return{before:t.before,values:t.position}}function yu(t){return new yo(t.values||[],!!t.before)}function vu(t){return Qa[t]}function _u(t){return Za[t]}function bu(t){return{fieldPath:t.canonicalString()}}function wu(t){return Cs.fromServerFormat(t.fieldPath)}function Eu(t){return ao.create(wu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return cs()}}(t.fieldFilter.op),t.fieldFilter.value)}function Su(t){switch(t.unaryFilter.op){case"IS_NAN":var e=wu(t.unaryFilter.field);return ao.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=wu(t.unaryFilter.field);return ao.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=wu(t.unaryFilter.field);return ao.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=wu(t.unaryFilter.field);return ao.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return cs()}}function Tu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Cu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Iu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=xu(e)),e=Au(t.get(n),e);return xu(e)}function Au(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function xu(t){return t+"\x01\x01"}function ku(t){var e=t.length;if(ls(e>=2),2===e)return ls("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ss.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&cs(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:cs()}s=o+2}return new Ss(r)}var Ou=function(t,e){this.seconds=t,this.nanoseconds=e},Du=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Du.store="owner",Du.key="owner";var Nu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Nu.store="mutationQueues",Nu.keyPath="userId";var Ru=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ru.store="mutations",Ru.keyPath="batchId",Ru.userMutationsIndex="userMutationsIndex",Ru.userMutationsKeyPath=["userId","batchId"];var Pu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Iu(e)]},t.key=function(t,e,n){return[t,Iu(e),n]},t}();Pu.store="documentMutations",Pu.PLACEHOLDER=new Pu;var Lu=function(t,e){this.path=t,this.readTime=e},Fu=function(t,e){this.path=t,this.version=e},Vu=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Vu.store="remoteDocuments",Vu.readTimeIndex="readTimeIndex",Vu.readTimeIndexPath="readTime",Vu.collectionReadTimeIndex="collectionReadTimeIndex",Vu.collectionReadTimeIndexPath=["parentPath","readTime"];var Mu=function(t){this.byteSize=t};Mu.store="remoteDocumentGlobal",Mu.key="remoteDocumentGlobalKey";var ju=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};ju.store="targets",ju.keyPath="targetId",ju.queryTargetsIndexName="queryTargetsIndex",ju.queryTargetsKeyPath=["canonicalId","targetId"];var Uu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Uu.store="targetDocuments",Uu.keyPath=["targetId","path"],Uu.documentTargetsIndex="documentTargetsIndex",Uu.documentTargetsKeyPath=["path","targetId"];var qu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};qu.key="targetGlobalKey",qu.store="targetGlobal";var Bu=function(t,e){this.collectionId=t,this.parent=e};Bu.store="collectionParents",Bu.keyPath=["collectionId","parent"];var Gu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Gu.store="clientMetadata",Gu.keyPath="clientId";var zu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};zu.store="bundles",zu.keyPath="bundleId";var Hu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Hu.store="namedQueries",Hu.keyPath="name";var $u=(0,Gt.ev)((0,Gt.ev)([],(0,Gt.ev)((0,Gt.ev)([],(0,Gt.ev)((0,Gt.ev)([],(0,Gt.ev)((0,Gt.ev)([],[Nu.store,Ru.store,Pu.store,Vu.store,ju.store,Du.store,qu.store,Uu.store]),[Gu.store])),[Mu.store])),[Bu.store])),[zu.store,Hu.store]),Qu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Ku=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Wu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&cs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Ju=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ku,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new tc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=sc(e.target.error);n.ft.reject(new tc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new tc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(ss("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new nc(e)},t}(),Yu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,zt.z$)())&&os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ss("SimpleDb","Removing database:",t),rc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,zt.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(ss("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new tc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ns(es.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new tc(t,n))},i.onupgradeneeded=function(t){ss("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){ss("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,Gt.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Ju.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Wu.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return ss("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Xu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return rc(this.Pt.delete())},t}(),tc=function(t){function e(e,n){var r=this;return(r=t.call(this,es.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Gt.ZT)(e,t),e}(ns);function ec(t){return"IndexedDbTransactionError"===t.name}var nc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ss("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ss("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),rc(n)},t.prototype.add=function(t){return ss("SimpleDb","ADD",this.store.name,t,t),rc(this.store.add(t))},t.prototype.get=function(t){var e=this;return rc(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ss("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ss("SimpleDb","DELETE",this.store.name,t),rc(this.store.delete(t))},t.prototype.count=function(){return ss("SimpleDb","COUNT",this.store.name),rc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){ss("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Wu(function(n,r){e.onerror=function(t){var e=sc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Wu(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Xu(i),o=e(i.primaryKey,i.value,s);if(o instanceof Wu){var a=o.catch(function(t){return s.done(),Wu.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Wu.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function rc(t){return new Wu(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=sc(t.target.error);n(e)}})}var ic=!1;function sc(t){var e=Yu._t((0,zt.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ns("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ic||(ic=!0,setTimeout(function(){throw r},0)),r}}return t}var oc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Gt.ZT)(e,t),e}(Zu);function ac(t,e){var n=hs(t);return Yu.It(n.Mt,e)}var uc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&oa(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&aa(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&aa(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vs.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},La())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&gs(this.mutations,t.mutations,function(t,e){return ca(t,e)})&&gs(this.baseMutations,t.baseMutations,function(t,e){return ca(t,e)})},t}(),cc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ls(e.mutations.length===r.length);for(var i=Ra(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),lc=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=vs.min()),void 0===s&&(s=vs.min()),void 0===o&&(o=As.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),hc=function(t){this.Lt=t};function fc(t,e){if(e.document)return cu(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ms.fromSegments(e.noDocument.path),r=yc(e.noDocument.readTime),i=eo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=Ms.fromSegments(e.unknownDocument.path);return r=yc(e.unknownDocument.version),eo.newUnknownDocument(s,r)}return cs()}function dc(t,e,n){var r=pc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:nu(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Wa(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new Vu(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=mc(e.version);return o=e.hasCommittedMutations,new Vu(null,new Lu(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=mc(e.version);return new Vu(new Fu(c,l),null,null,!0,r,i)}return cs()}function pc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function gc(t){var e=new ys(t[0],t[1]);return vs.fromTimestamp(e)}function mc(t){var e=t.toTimestamp();return new Ou(e.seconds,e.nanoseconds)}function yc(t){var e=new ys(t.seconds,t.nanoseconds);return vs.fromTimestamp(e)}function vc(t,e){for(var n=(e.baseMutations||[]).map(function(e){return hu(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return hu(t.Lt,e)}),s=ys.fromMillis(e.localWriteTimeMs);return new uc(e.batchId,s,n,i)}function _c(t){var e,n,r=yc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?yc(t.lastLimboFreeSnapshotVersion):vs.min();return void 0!==t.query.documents?(ls(1===(n=t.query).documents.length),e=No(Co(su(n.documents[0])))):e=function(t){return No(pu(t))}(t.query),new lc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,As.fromBase64String(t.resumeToken))}function bc(t,e){var n,r=mc(e.snapshotVersion),i=mc(e.lastLimboFreeSnapshotVersion);n=oo(e.target)?fu(t.Lt,e.target):du(t.Lt,e.target);var s=e.resumeToken.toBase64();return new ju(e.targetId,io(e.target),r,s,e.sequenceNumber,i,n)}function wc(t){var e=pu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ro(e,e.limit,"L"):e}var Ec=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Sc(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:yc(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Sc(t).put({bundleId:(n=e).id,createTime:mc(Xa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Tc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:wc(e.bundledQuery),readTime:yc(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Tc(t).put(function(t){return{name:t.name,readTime:mc(Xa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Sc(t){return ac(t,zu.store)}function Tc(t){return ac(t,Hu.store)}var Cc=function(){function t(){this.Bt=new Ic}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Wu.resolve()},t.prototype.getCollectionParents=function(t,e){return Wu.resolve(this.Bt.getEntries(e))},t}(),Ic=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ia(Ss.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ia(Ss.comparator)).toArray()},t}(),Ac=function(){function t(){this.qt=new Ic}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:Iu(i)};return xc(t).put(s)}return Wu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ms(e),""],!1,!0);return xc(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(ku(s.parent))}return n})},t}();function xc(t){return ac(t,Bu.store)}var kc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Oc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Dc(t,e,n){var r=t.store(Ru.store),i=t.store(Pu.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){ls(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Pu.key(e,f.key.path,n.batchId);s.push(i.delete(d)),c.push(f.key)}return Wu.waitFor(s).next(function(){return c})}function Nc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw cs();e=t.noDocument}return JSON.stringify(e).length}Oc.DEFAULT_COLLECTION_PERCENTILE=10,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oc.DEFAULT=new Oc(41943040,Oc.DEFAULT_COLLECTION_PERCENTILE,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oc.DISABLED=new Oc(-1,0,0);var Rc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ls(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lc(t).$t({index:Ru.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=Fc(t),o=Lc(t);return o.add({}).next(function(a){ls("number"==typeof a);for(var u=new uc(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return lu(t.Lt,e)}),i=n.mutations.map(function(e){return lu(t.Lt,e)});return new Ru(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ia(function(t,e){return ps(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Pu.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(g,Pu.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Wu.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Lc(t).get(e).next(function(t){return t?(ls(t.userId===n.userId),vc(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Wu.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Lc(t).$t({index:Ru.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(ls(e.batchId>=r),s=vc(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Lc(t).$t({index:Ru.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lc(t).Nt(Ru.userMutationsIndex,n).next(function(t){return t.map(function(t){return vc(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Pu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Fc(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=ku(r[1]);if(a===n.userId&&e.path.isEqual(c))return Lc(t).get(u).next(function(t){if(!t)throw cs();ls(t.userId===n.userId),s.push(vc(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ia(ps),i=[];return e.forEach(function(e){var s=Pu.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Fc(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=ku(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Wu.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=Pu.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ia(ps);return Fc(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=ku(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Lc(t).get(e).next(function(t){if(null===t)throw cs();ls(t.userId===n.userId),r.push(vc(n.R,t))}))}),Wu.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Dc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Wu.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Wu.resolve();var r=IDBKeyRange.lowerBound(Pu.prefixForUser(e.userId)),i=[];return Fc(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=ku(t[1]);i.push(s)}else r.done()}).next(function(){ls(0===i.length)})})},t.prototype.containsKey=function(t,e){return Pc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Vc(t).get(this.userId).next(function(t){return t||new Nu(e.userId,-1,"")})},t}();function Pc(t,e,n){var r=Pu.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Fc(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function Lc(t){return ac(t,Ru.store)}function Fc(t){return ac(t,Pu.store)}function Vc(t){return ac(t,Nu.store)}var Mc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),jc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Mc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return vs.fromTimestamp(new ys(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Uc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return ls(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return Uc(t).$t(function(o,a){var u=_c(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Wu.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Uc(t).$t(function(t,n){var r=_c(n);e(r)})},t.prototype.Xt=function(t){return qc(t).get(qu.key).next(function(t){return ls(null!==t),t})},t.prototype.Zt=function(t,e){return qc(t).put(qu.key,e)},t.prototype.te=function(t,e){return Uc(t).put(bc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=io(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Uc(t).$t({range:r,index:ju.queryTargetsIndexName},function(t,n,r){var s=_c(n);so(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=Bc(t);return e.forEach(function(e){var o=Iu(e.path);i.push(s.put(new Uu(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Wu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Bc(t);return Wu.forEach(e,function(e){var s=Iu(e.path);return Wu.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Bc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Bc(t),i=La();return r.$t({range:n,kt:!0},function(t,e,n){var r=ku(t[1]),s=new Ms(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Iu(e.path),r=IDBKeyRange.bound([n],[ms(n)],!1,!0),i=0;return Bc(t).$t({index:Uu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Uc(t).get(e).next(function(t){return t?_c(t):null})},t}();function Uc(t){return ac(t,ju.store)}function qc(t){return ac(t,qu.store)}function Bc(t){return ac(t,Uu.store)}function Gc(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){if(t.code!==es.FAILED_PRECONDITION||t.message!==Qu)throw t;return ss("LocalStore","Unexpectedly lost primary lease"),[2]})})}function zc(t,e){var n=t[1],r=e[1],i=ps(t[0],e[0]);return 0===i?ps(n,r):i}var Hc=function(){function t(t){this.ne=t,this.buffer=new Ia(zc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();zc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),$c=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;ss("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ec(e=n.sent())?(ss("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Gc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Qc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Wu.resolve(ts.o);var r=new Hc(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ss("LruGarbageCollector","Garbage collection skipped; disabled"),Wu.resolve(kc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(ss("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),kc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(ss("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),is()<=Ht.in.DEBUG&&ss("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Wu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Zc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Qc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Kc(t,n)},t.prototype.removeReference=function(t,e,n){return Kc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Kc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Vc(t).Ot(function(r){return Pc(t,r,e).next(function(t){return t&&(n=!0),Wu.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),Bc(t).delete([0,Iu(o.path)])})});i.push(u)}}).next(function(){return Wu.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Kc(t,e)},t.prototype.we=function(t,e){var n,r=Bc(t),i=ts.o;return r.$t({index:Uu.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==ts.o&&e(new Ms(ku(n)),i),i=o,n=s):i=ts.o}).next(function(){i!==ts.o&&e(new Ms(ku(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Kc(t,e){return Bc(t).put(function(t,e){return new Uu(0,Iu(t.path),e)}(e,t.currentSequenceNumber))}var Wc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){bs(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return ws(this.inner)},t}(),Jc=function(){function t(){this.changes=new Wc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:vs.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:eo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Wu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Yc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return el(t).put(nl(e),n)},t.prototype.removeEntry=function(t,e){var n=el(t),r=nl(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return el(t).get(nl(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return el(t).get(nl(e)).next(function(t){return{document:n.ye(e,t),size:Nc(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ka();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ka(),i=new Sa(Ms.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,Nc(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Wu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return el(t).$t({range:r},function(t,e,r){for(var o=Ms.fromSegments(t);s&&Ms.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ka(),s=e.path.length+1,o={};if(n.isEqual(vs.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=pc(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Vu.collectionReadTimeIndex}return el(t).$t(o,function(t,n,o){if(t.length===s){var a=fc(r.R,n);e.path.isPrefixOf(a.key.path)?Vo(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Xc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return tl(t).get(Mu.key).next(function(t){return ls(!!t),t})},t.prototype.me=function(t,e){return tl(t).put(Mu.key,e)},t.prototype.ye=function(t,e){if(e){var n=fc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(vs.min()))return n}return eo.newInvalidDocument(t)},t}(),Xc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Wc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Gt.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ia(function(t,e){return ps(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=dc(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=Nc(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=dc(e.Ie.R,eo.newNoDocument(s,vs.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Wu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Jc);function tl(t){return ac(t,Mu.store)}function el(t){return ac(t,Vu.store)}function nl(t){return t.path.toArray()}var rl=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ls(n<r&&n>=0&&r<=11);var s=new Ju("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Du.store)}(t),function(t){t.createObjectStore(Nu.store,{keyPath:Nu.keyPath}),t.createObjectStore(Ru.store,{keyPath:Ru.keyPath,autoIncrement:!0}).createIndex(Ru.userMutationsIndex,Ru.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Pu.store)}(t),il(t),function(t){t.createObjectStore(Vu.store)}(t));var o=Wu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Uu.store),t.deleteObjectStore(ju.store),t.deleteObjectStore(qu.store)}(t),il(t)),o=o.next(function(){return function(t){var e=t.store(qu.store),n=new qu(0,0,vs.min().toTimestamp(),0);return e.put(qu.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Ru.store).Nt().next(function(n){t.deleteObjectStore(Ru.store),t.createObjectStore(Ru.store,{keyPath:Ru.keyPath,autoIncrement:!0}).createIndex(Ru.userMutationsIndex,Ru.userMutationsKeyPath,{unique:!0});var r=e.store(Ru.store),i=n.map(function(t){return r.put(t)});return Wu.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(Gu.store,{keyPath:Gu.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Mu.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Vu.store);e.createIndex(Vu.readTimeIndex,Vu.readTimeIndexPath,{unique:!1}),e.createIndex(Vu.collectionReadTimeIndex,Vu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(zu.store,{keyPath:zu.keyPath})}(t),function(t){t.createObjectStore(Hu.store,{keyPath:Hu.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(Vu.store).$t(function(t,n){e+=Nc(n)}).next(function(){var n=new Mu(e);return t.store(Mu.store).put(Mu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Nu.store),r=t.store(Ru.store);return n.Nt().next(function(n){return Wu.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ru.userMutationsIndex,i).next(function(r){return Wu.forEach(r,function(r){ls(r.userId===n.userId);var i=vc(e.R,r);return Dc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Uu.store),n=t.store(Vu.store);return t.store(qu.store).get(qu.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new Ss(n),o=function(t){return[0,Iu(t)]}(s);r.push(e.get(o).next(function(n){return n?Wu.resolve():function(n){return e.put(new Uu(0,Iu(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Wu.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Bu.store,{keyPath:Bu.keyPath});var n=e.store(Bu.store),r=new Ic,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Iu(i)})}};return e.store(Vu.store).$t({kt:!0},function(t,e){var n=new Ss(t);return i(n.popLast())}).next(function(){return e.store(Pu.store).$t({kt:!0},function(t,e){var n=ku(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(ju.store);return n.$t(function(t,r){var i=_c(r),s=bc(e.R,i);return n.put(s)})},t}();function il(t){t.createObjectStore(Uu.store,{keyPath:Uu.keyPath}).createIndex(Uu.documentTargetsIndex,Uu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ju.store,{keyPath:ju.keyPath}).createIndex(ju.queryTargetsIndexName,ju.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(qu.store)}var sl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ol=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new ns(es.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zc(this,i),this.Le=n+"main",this.R=new hc(u),this.Be=new Yu(this.Le,11,new rl(this.R)),this.qe=new jc(this.referenceDelegate,this.R),this.Ut=new Ac,this.Ue=function(t,e){return new Yc(t,e)}(this.R,this.Ut),this.Ke=new Ec,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ns(es.FAILED_PRECONDITION,sl);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new ts(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return ul(e).put(new Gu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(ec(e))return ss("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ss("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return al(t).get(Du.key).next(function(t){return Wu.resolve(e.tn(t))})},t.prototype.en=function(t){return ul(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ac(t,Gu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Wu.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Wu.resolve(!0):al(t).get(Du.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ns(es.FAILED_PRECONDITION,sl);return!1}}return!(!e.networkEnabled||!e.inForeground)||ul(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&ss("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t=this;return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Du.store,Gu.store],function(e){var n=new oc(e,ts.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return ul(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Rc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ss("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",$u,function(s){return r=new oc(s,i.Ne?i.Ne.next():ts.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw os("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new ns(es.FAILED_PRECONDITION,Qu);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return al(t).get(Du.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ns(es.FAILED_PRECONDITION,sl)})},t.prototype.Ze=function(t){var e=new Du(this.clientId,this.allowTabSynchronization,Date.now());return al(t).put(Du.key,e)},t.yt=function(){return Yu.yt()},t.prototype.Xe=function(t){var e=this,n=al(t);return n.get(Du.key).next(function(t){return e.tn(t)?(ss("IndexedDbPersistence","Releasing primary lease."),n.delete(Du.key)):Wu.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(os("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return ss("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return os("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){os("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function al(t){return ac(t,Du.store)}function ul(t){return ac(t,Gu.store)}function cl(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ll=function(t,e){this.progress=t,this.wn=e},hl=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ms.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Oo(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ms(e)).next(function(t){var e=Da();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=Da();return this.Ut.getCollectionParents(t,i).next(function(o){return Wu.forEach(o,function(o){var a=function(t,e){return new So(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=eo.newInvalidDocument(c),r=r.insert(c,l)),aa(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Vo(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=La(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof fa&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),fl=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=La(),i=La(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),dl=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(vs.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(Io(e)||Ao(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(is()<=Ht.in.DEBUG&&ss("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Fo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Ia(Mo(t));return e.forEach(function(e,r){Vo(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return is()<=Ht.in.DEBUG&&ss("QueryEngine","Using full collection scan to execute query:",Fo(e)),this.Sn.getDocumentsMatchingQuery(t,e,vs.min())},t}(),pl=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Sa(ps),this.kn=new Wc(function(t){return io(t)},so),this.$n=vs.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new hl(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function gl(t,e,n,r){return new pl(t,e,n,r)}function ml(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return n=hs(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new hl(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=La(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)o=o.add(m[g].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function yl(t,e){var n=hs(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Wu.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);ls(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function vl(t){var e=hs(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function _l(t,e){var n=hs(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return ls(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=ka();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(bl(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(vs.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Wu.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function bl(t,e,n,r,i){var s=La();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=ka();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(vs.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):ss("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function wl(t,e){var n=hs(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function El(t,e){var n=hs(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Wu.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new lc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Sl(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:r=hs(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ec(o=a.sent()))throw o;return ss("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Tl(t,e,n){var r=hs(t),i=vs.min(),s=La();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=hs(t),i=r.kn.get(n);return void 0!==i?Wu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,No(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:vs.min(),n?s:La())}).next(function(t){return{documents:t,Bn:s}})})}function Cl(t,e){var n=hs(t),r=hs(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Il(t){var e=hs(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=hs(t),i=ka(),s=pc(n),o=el(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:Vu.readTimeIndex,range:a},function(t,e){var n=fc(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:gc(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Al(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){return[2,(e=hs(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=el(t),n=vs.min();return e.$t({index:Vu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=gc(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function xl(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,f,d;return(0,Gt.Jh)(this,function(p){switch(p.label){case 0:for(i=hs(t),s=La(),o=ka(),a=Ra(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,El(i,function(t){return No(Co(Ss.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return bl(t,f,o,vs.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,s,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function kl(t,e,n){return void 0===n&&(n=La()),(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return[4,El(t,No(wc(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=hs(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=Xa(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ke.saveNamedQuery(t,e);var o=r.withResumeToken(As.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Ol=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Wu.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Xa(n.createTime)}),Wu.resolve()},t.prototype.getNamedQuery=function(t,e){return Wu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:wc(t.bundledQuery),readTime:Xa(t.readTime)}}(e)),Wu.resolve()},t}(),Dl=function(){function t(){this.Wn=new Ia(Nl.Gn),this.zn=new Ia(Nl.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Nl(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Nl(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Ms(new Ss([])),r=new Nl(n,t),i=new Nl(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ms(new Ss([])),n=new Nl(e,t),r=new Nl(e,t+1),i=La();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Nl(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Nl=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ms.comparator(t.key,e.key)||ps(t.ns,e.ns)},t.Hn=function(t,e){return ps(t.ns,e.ns)||Ms.comparator(t.key,e.key)},t}(),Rl=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ia(Nl.Gn)}return t.prototype.checkEmpty=function(t){return Wu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new uc(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new Nl(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Wu.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Wu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Wu.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Wu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Wu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Nl(e,0),i=new Nl(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Wu.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ia(ps);return e.forEach(function(t){var e=new Nl(t,0),i=new Nl(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Wu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ms.isDocumentKey(i)||(i=i.child(""));var s=new Nl(new Ms(i),0),o=new Ia(ps);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Wu.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ls(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Wu.forEach(e.mutations,function(i){var s=new Nl(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Nl(e,0),r=this.rs.firstAfterOrEqual(n);return Wu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Wu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Pl=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Sa(Ms.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Wu.resolve(n?n.document.clone():eo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ka();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():eo.newInvalidDocument(t))}),Wu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ka(),i=new Ms(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||Vo(e,u)&&(r=r.insert(u.key,u.clone()))}return Wu.resolve(r)},t.prototype.fs=function(t,e){return Wu.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Ll(this)},t.prototype.getSize=function(t){return Wu.resolve(this.size)},t}(),Ll=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Gt.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Wu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Jc),Fl=function(){function t(t){this.persistence=t,this.ds=new Wc(function(t){return io(t)},so),this.lastRemoteSnapshotVersion=vs.min(),this.highestTargetId=0,this.ws=0,this._s=new Dl,this.targetCount=0,this.ys=Mc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Wu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Wu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Wu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Wu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Wu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Mc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Wu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Wu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Wu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Wu.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Wu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Wu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Wu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Wu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Wu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Wu.resolve(n)},t.prototype.containsKey=function(t,e){return Wu.resolve(this._s.containsKey(e))},t}(),Vl=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ts(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Fl(this),this.Ut=new Cc,this.Ue=function(t,e){return new Pl(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new hc(e),this.Ke=new Ol(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Rl(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;ss("MemoryPersistence","Starting transaction:",t);var i=new Ml(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Wu.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Ml=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Gt.ZT)(e,t),e}(Zu),jl=function(){function t(t){this.persistence=t,this.As=new Dl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw cs()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Wu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Wu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Wu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wu.forEach(this.vs,function(r){var i=Ms.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Wu.or([function(){return Wu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Ul=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function ql(t,e){return"firestore_clients_"+t+"_"+e}function Bl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Gl(t,e){return"firestore_targets_"+t+"_"+e}Ul.UNAUTHENTICATED=new Ul(null),Ul.GOOGLE_CREDENTIALS=new Ul("google-credentials-uid"),Ul.FIRST_PARTY=new Ul("first-party-uid");var zl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new ns(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(os("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ns(i.error.code,i.error.message)),s?new t(e,i.state,r):(os("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),$l=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Va(),o=0;i&&o<r.activeTargetIds.length;++o)i=Vs(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(os("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ql=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(os("SharedClientState","Failed to parse online state: "+e),null)},t}(),Zl=function(){function t(){this.activeTargetIds=Va()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Kl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Sa(ps),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=ql(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Zl),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,Gt.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(ql(this.persistenceKey,r)))&&(s=$l.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Gl(this.persistenceKey,t));if(n){var r=Hl.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Gl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ss("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ss("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ss("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ss("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,Gt.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=ts.o;if(null!=t)try{var n=JSON.parse(t);ls("number"==typeof n),e=n}catch(t){os("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ts.o&&this.sequenceNumberHandler(o);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new zl(this.currentUser,t,e,n),i=Bl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Bl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Gl(this.persistenceKey,t),i=new Hl(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return $l.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return zl.Vs(new Ul(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Hl.Vs(r,e)},t.prototype.js=function(t){return Ql.Vs(t)},t.prototype.ii=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(ss("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Va();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Wl=function(){function t(){this.li=new Zl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Zl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Jl=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Yl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){ss("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){ss("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Xl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},th=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),eh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Gt.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new Xi;o.listenOnce(Ki.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Zi.NO_ERROR:var e=o.getResponseJson();ss("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Zi.TIMEOUT:ss("Connection",'RPC "'+t+'" timed out'),s(new ns(es.DEADLINE_EXCEEDED,"Request time out"));break;case Zi.HTTP_ERROR:var n=o.getStatus();if(ss("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(es).indexOf(e)>=0?e:es.UNKNOWN}(r.status);s(new ns(a,r.message))}else s(new ns(es.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new ns(es.UNAVAILABLE,"Connection failed."));break;default:cs()}}finally{ss("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Gi,i=Vn(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Ji({})),this.Fi(s.initMessageHeaders,e),(0,zt.uI)()||(0,zt.b$)()||(0,zt.d)()||(0,zt.w1)()||(0,zt.Mn)()||(0,zt.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");ss("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new th({Ei:function(t){c?ss("Connection","Not sending because WebChannel is closed:",t):(u||(ss("Connection","Opening WebChannel transport."),a.open(),u=!0),ss("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Yi.EventType.OPEN,function(){c||ss("Connection","WebChannel transport opened.")}),h(a,Yi.EventType.CLOSE,function(){c||(c=!0,ss("Connection","WebChannel transport closed"),l.Vi())}),h(a,Yi.EventType.ERROR,function(t){c||(c=!0,as("Connection","WebChannel transport errored:",t),l.Vi(new ns(es.UNAVAILABLE,"The operation could not be completed")))}),h(a,Yi.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];ls(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ss("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=ma[t];if(void 0!==e)return Ea(e)}(i),o=r.message;void 0===s&&(s=es.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new ns(s,o)),a.close()}else ss("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Wi.STAT_EVENT,function(t){10===t.stat?ss("Connection","Detected buffering proxy"):11===t.stat&&ss("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);ss("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return ss("RestConnection","Received: ",t),t},function(e){throw as("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Xl[t]},t}());function nh(){return"undefined"!=typeof window?window:null}function rh(){return"undefined"!=typeof document?document:null}function ih(t){return new Ka(t,!0)}var sh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&ss("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),oh=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===es.RESOURCE_EXHAUSTED?(os(e.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===es.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new ns(es.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Gt.mG)(t,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return ss("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(ss("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ah=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,Gt.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:cs()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(ls(void 0===e||"string"==typeof e),As.fromBase64String(e||"")):(ls(void 0===e||e instanceof Uint8Array),As.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?es.UNKNOWN:Ea(t.code);return new ns(e,t.message||"")}(a);n=new Ba(r,i,s,o||null)}else if("documentChange"in e){i=ru(t,(r=e.documentChange).document.name),s=Xa(r.document.updateTime);var a=new Xs({mapValue:{fields:r.document.fields}}),u=(o=eo.newFoundDocument(i,s,a),r.targetIds||[]);n=new Ua(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=ru(t,(r=e.documentDelete).document),s=r.readTime?Xa(r.readTime):vs.min(),a=eo.newNoDocument(i,s),n=new Ua([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=ru(t,(r=e.documentRemove).document),n=new Ua([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return cs();var c=e.filter;i=new ba(r=c.count||0),n=new qa(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return vs.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?vs.min():e.readTime?Xa(e.readTime):vs.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ou(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=oo(r)?{documents:fu(t,r)}:{query:du(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ja(t,e.resumeToken):e.snapshotVersion.compareTo(vs.min())>0&&(n.readTime=Wa(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cs()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ou(this.R),e.removeTarget=t,this.cr(e)},e}(oh),uh=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,Gt.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ls(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(ls(void 0!==e),t.map(function(t){return function(t,e){var n=Xa(t.updateTime?t.updateTime:e);return n.isEqual(vs.min())&&(n=Xa(e)),new na(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Xa(t.commitTime);return this.listener.Tr(n,e)}return ls(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ou(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return lu(e.R,t)})};this.cr(n)},e}(oh),ch=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Gt.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new ns(es.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===es.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ns(es.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===es.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ns(es.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),lh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(os(e),this.Vr=!1):ss("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),hh=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Gt.mG)(s,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return bh(this)?(ss("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return(e=hs(t)).Or.add(4),[4,dh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,fh(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new lh(n,r)};function fh(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:if(!bh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function dh(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ph(t,e){var n=hs(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),_h(n)?vh(n):Lh(n).er()&&mh(n,e))}function gh(t,e){var n=hs(t),r=Lh(n);n.$r.delete(e),r.er()&&yh(n,e),0===n.$r.size&&(r.er()?r.ir():bh(n)&&n.Br.set("Unknown"))}function mh(t,e){t.qr.U(e.targetId),Lh(t).mr(e)}function yh(t,e){t.qr.U(e),Lh(t).yr(e)}function vh(t){t.qr=new za({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Lh(t).start(),t.Br.Sr()}function _h(t){return bh(t)&&!Lh(t).tr()&&t.$r.size>0}function bh(t){return 0===hs(t).Or.size}function wh(t){t.qr=void 0}function Eh(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return t.$r.forEach(function(e,n){mh(t,e)}),[2]})})}function Sh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){return wh(t),_h(t)?(t.Br.Nr(e),vh(t)):t.Br.set("Unknown"),[2]})})}function Th(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,s;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof Ba&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),ss("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ch(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ua?t.qr.X(e):e instanceof qa?t.qr.rt(e):t.qr.et(e),n.isEqual(vs.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,vl(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(As.EMPTY_BYTE_STRING,n.snapshotVersion)),yh(t,e);var r=new lc(n.target,e,1,n.sequenceNumber);mh(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return ss("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,Ch(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function Ch(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r=this;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:if(!ec(e))throw e;return t.Or.add(1),[4,dh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return vl(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Gt.mG)(r,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return ss("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,fh(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ih(t,e){return e().catch(function(n){return Ch(t,n,e)})}function Ah(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:e=hs(t),n=Fh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return bh(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,wl(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Fh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,Ch(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return xh(e)&&kh(e),[2]}})})}function xh(t){return bh(t)&&!Fh(t).tr()&&t.kr.length>0}function kh(t){Fh(t).start()}function Oh(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return Fh(t).Ar(),[2]})})}function Dh(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Gt.Jh)(this,function(i){for(e=Fh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Nh(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=cc.from(r,e,n),[4,Ih(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,Ah(t)];case 2:return s.sent(),[2]}})})}function Rh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e&&Fh(t).pr?[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return wa(r=e.code)&&r!==es.ABORTED?(n=t.kr.shift(),Fh(t).sr(),[4,Ih(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Ah(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return xh(t)&&kh(t),[2]}})})}function Ph(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return n=hs(t),e?(n.Or.delete(2),[4,fh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,dh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Lh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=hs(t);return r.br(),new ah(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Eh.bind(null,t),Ri:Sh.bind(null,t),_r:Th.bind(null,t)}),t.Mr.push(function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),_h(t)?vh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),wh(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Fh(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=hs(t);return r.br(),new uh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Oh.bind(null,t),Ri:Rh.bind(null,t),Ir:Dh.bind(null,t),Tr:Nh.bind(null,t)}),t.Mr.push(function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Ah(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(ss("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Vh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ku,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ns(es.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Mh(t,e){if(os("AsyncQueue",e+": "+t),ec(t))return new ns(es.UNAVAILABLE,e+": "+t);throw t}var jh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ms.comparator(e.key,n.key)}:function(t,e){return Ms.comparator(t.key,e.key)},this.keyedMap=Da(),this.sortedSet=new Sa(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Uh=function(){function t(){this.Qr=new Sa(Ms.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):cs():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),qh=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,jh.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Po(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Bh=function(){this.Wr=void 0,this.listeners=[]},Gh=function(){this.queries=new Wc(function(t){return Lo(t)},Po),this.onlineState="Unknown",this.Gr=new Set};function zh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:if(n=hs(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new Bh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Mh(a,"Initialization of query '"+Fo(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Zh(n),[2]}})})}function Hh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Gt.Jh)(this,function(a){return n=hs(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function $h(t,e){for(var n=hs(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&Zh(n)}function Qh(t,e,n){var r=hs(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function Zh(t){t.Gr.forEach(function(t){t.next()})}var Kh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Wh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Jh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ru(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?cu(this.R,t.document,!1):eo.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Xa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Jh(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||La()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return[4,xl(this.localStore,new Jh(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,kl(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ll(Object.assign({},this.progress),t))]}})})}}();var Yh=function(t){this.key=t},Xh=function(t){this.key=t},tf=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=La(),this.mutatedKeys=La(),this.lo=Mo(t),this.fo=new jh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Uh,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=Io(this.query)&&i.size===this.query.limit?i.last():null,c=Ao(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Vo(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=d?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),Io(this.query)||Ao(this.query))for(;o.size>this.query.limit;){var l=Io(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cs()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new qh(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Uh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=La(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Xh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Yh(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=La();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return qh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ef=function(t,e,n){this.query=t,this.targetId=e,this.view=n},nf=function(t){this.key=t,this.bo=!1},rf=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Wc(function(t){return Lo(t)},Po),this.Vo=new Map,this.So=new Set,this.Do=new Sa(Ms.comparator),this.Co=new Map,this.No=new Dl,this.xo={},this.Fo=new Map,this.ko=Mc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function sf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return n=Pf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,El(n.localStore,No(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,of(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&ph(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function of(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,Gt.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Tl(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(_f(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,Tl(t.localStore,e,!0)];case 1:return i=l.sent(),s=new tf(e,i.Bn),o=s._o(i.documents),a=ja.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),_f(t,n,u.To),c=new ef(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function af(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return n=hs(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Po(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Sl(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),gh(n.remoteStore,r.targetId),yf(n,r.targetId)}).catch(Gc)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return yf(n,r.targetId),[4,Sl(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function uf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:r=Lf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=hs(t),i=ys.now(),s=e.reduce(function(t,e){return t.add(e.key)},La());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ua(c,n.get(c.key));null!=l&&o.push(new fa(c.key,l,to(l.value.mapValue),ra.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Sa(ps)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ef(r,i.changes)];case 3:return a.sent(),[4,Ah(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=Mh(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function cf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:n=hs(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_l(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(ls(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ls(r.bo):t.removedDocuments.size>0&&(ls(r.bo),r.bo=!1))}),[4,Ef(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Gc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function lf(t,e,n){var r=hs(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=hs(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&Zh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:return(r=hs(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new Sa(Ms.comparator)).insert(s,eo.newNoDocument(s,vs.min())),a=La().add(s),u=new Ma(vs.min(),new Map,new Ia(ps),o,a),[4,cf(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),wf(r),[3,4];case 2:return[4,Sl(r.localStore,e,!1).then(function(){return yf(r,e,n)}).catch(Gc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function ff(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:n=hs(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,yl(n.localStore,e)];case 2:return i=s.sent(),mf(n,r,null),gf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ef(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,Gc(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function df(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:r=hs(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=hs(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return ls(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),mf(r,e,n),gf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ef(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,Gc(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function pf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:bh((n=hs(t)).remoteStore)||ss("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=hs(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=Mh(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function gf(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function mf(t,e,n){var r=hs(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function yf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||vf(t,e)})}function vf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(gh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),wf(t))}function _f(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof Yh?(t.No.addReference(s.key,e),bf(t,s)):s instanceof Xh?(ss("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||vf(t,s.key)):cs()}}function bf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(ss("SyncEngine","New document in limbo: "+n),t.So.add(r),wf(t))}function wf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ms(Ss.fromString(e)),r=t.ko.next();t.Co.set(r,new nf(n)),t.Do=t.Do.insert(n,r),ph(t.remoteStore,new lc(No(Co(n.path)),r,2,ts.o))}}function Ef(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return r=hs(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=fl.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,Gt.Jh)(this,function(l){switch(l.label){case 0:n=hs(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Wu.forEach(e,function(e){return Wu.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Wu.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!ec(r=l.sent()))throw r;return ss("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Sf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return(n=hs(t)).currentUser.isEqual(e)?[3,3]:(ss("SyncEngine","User change. New user:",e.toKey()),[4,ml(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new ns(es.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ef(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Tf(t,e){var n=hs(t),r=n.Co.get(e);if(r&&r.bo)return La().add(r.key);var i=La(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function Cf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return[4,Tl((n=hs(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&_f(n,e.targetId,i.To),i)]}})})}function If(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){return[2,Il((e=hs(t)).localStore).then(function(t){return Ef(e,t)})]})})}function Af(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,s;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=hs(t),r=hs(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Wu.resolve(null)})})}((i=hs(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ah(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(mf(i,e,r||null),gf(i,e),function(t,e){hs(hs(t)._n).Gt(e)}(i.localStore,e)):cs(),o.label=4;case 4:return[4,Ef(i,s)];case 5:return o.sent(),[3,7];case 6:ss("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function xf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:return Pf(n=hs(t)),Lf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,kf(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Ph(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)ph(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return yf(n,e),Sl(n.localStore,e,!0)}),gh(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,kf(n,a)];case 5:return c.sent(),function(t){var e=hs(t);e.Co.forEach(function(t,n){gh(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Sa(Ms.comparator)}(n),n.$o=!1,[4,Ph(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function kf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,f,d,p;return(0,Gt.Jh)(this,function(g){switch(g.label){case 0:n=hs(t),r=[],i=[],s=0,o=e,g.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,El(n.localStore,No(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Cf(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Cl(n.localStore,a)];case 8:return p=g.sent(),[4,El(n.localStore,p)];case 9:return u=g.sent(),[4,of(n,Of(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Of(t){return To(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Df(t){var e=hs(t);return hs(hs(e.localStore).persistence).fn()}function Nf(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return(i=hs(t)).$o?(ss("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Il(i.localStore)];case 3:return s=a.sent(),o=Ma.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ef(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,Sl(i.localStore,e,!0)];case 6:return a.sent(),yf(i,e,r),[3,8];case 7:cs(),a.label=8;case 8:return[2]}})})}function Rf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,Gt.Jh)(this,function(f){switch(f.label){case 0:if(!(r=Pf(t)).$o)return[3,10];i=0,s=e,f.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(ss("SyncEngine","Adding an already active target "+o),[3,5]):[4,Cl(r.localStore,o)]:[3,6];case 2:return a=f.sent(),[4,El(r.localStore,a)];case 3:return u=f.sent(),[4,of(r,Of(a),u.targetId,!1)];case 4:f.sent(),ph(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Sl(r.localStore,t,!1).then(function(){gh(r.remoteStore,t),yf(r,t)}).catch(Gc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Pf(t){var e=hs(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hf.bind(null,e),e.vo._r=$h.bind(null,e.eventManager),e.vo.Mo=Qh.bind(null,e.eventManager),e}function Lf(t){var e=hs(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ff.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=df.bind(null,e),e}var Ff=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return this.R=ih(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return gl(this.persistence,new dl,t.initialUser,this.R)},t.prototype.qo=function(t){return new Vl(jl.bs,this.R)},t.prototype.Bo=function(t){return new Wl},t.prototype.terminate=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Gt.ZT)(e,t),e.prototype.initialize=function(e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Al(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Lf(this.Qo.syncEngine)];case 4:return n.sent(),[4,Ah(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return gl(this.persistence,new dl,t.initialUser,this.R)},e.prototype.Uo=function(t){return new $c(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=cl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Oc.withCacheSize(this.cacheSizeBytes):Oc.DEFAULT;return new ol(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,nh(),rh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Wl},e}(Ff),Mf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Gt.ZT)(e,t),e.prototype.initialize=function(e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Kl?(this.sharedClientState.syncEngine={ui:Af.bind(null,n),ai:Nf.bind(null,n),hi:Rf.bind(null,n),fn:Df.bind(null,n),ci:If.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Gt.mG)(r,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return[4,xf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=nh();if(!Kl.yt(e))throw new ns(es.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=cl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Kl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Vf),jf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n=this;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return lf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Sf.bind(null,this.syncEngine),[4,Ph(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Gh},t.prototype.createDatastore=function(t){var e=ih(t.databaseInfo.databaseId),n=new eh(t.databaseInfo);return function(t,e,n){return new ch(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return lf(o.syncEngine,t,0)},s=Yl.yt()?new Yl:new Jl,new hh(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new rf(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=hs(t),ss("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,dh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Uf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),qf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Ku,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Wh(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ns(es.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,Gt.Jh)(this,function(u){switch(u.label){case 0:return n=hs(t),r=ou(n.R)+"/documents",i={documents:e.map(function(t){return nu(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){ls(!!e.found);var n=ru(t,e.found.name),r=Xa(e.found.updateTime),i=new Xs({mapValue:{fields:e.found.fields}});return eo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){ls(!!e.missing),ls(!!e.readTime);var n=ru(t,e.missing),r=Xa(e.readTime);return eo.newNoDocument(n,r)}(t,e):cs()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());ls(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new va(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Ms.fromPath(n);e.mutations.push(new _a(r,e.precondition(r)))}),[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return n=hs(t),r=ou(n.R)+"/documents",i={writes:e.map(function(t){return lu(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw cs();e=vs.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ns(es.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ra.updateTime(e):ra.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(vs.min()))throw new ns(es.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ra.updateTime(e)}return ra.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Bf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Gt.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Gt.Jh)(this,function(r){return t=new qf(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Ls(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!wa(e)}return!1},t}(),Gf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ul.UNAUTHENTICATED,this.clientId=ds.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Gt.mG)(r,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return ss("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ns(es.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ku;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Gt.mG)(t,void 0,void 0,function(){var t,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Mh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function zf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),ss("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Gt.mG)(i,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,ml(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Hf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,$f(t)];case 1:return n=i.sent(),ss("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return(n=hs(t)).asyncQueue.verifyOperationInProgress(),ss("RemoteStore","RemoteStore received new credentials"),r=bh(n),n.Or.add(3),[4,dh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,fh(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function $f(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(ss("FirestoreClient","Using default OfflineComponentProvider"),[4,zf(t,new Ff)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Qf(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(ss("FirestoreClient","Using default OnlineComponentProvider"),[4,Hf(t,new jf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Zf(t){return $f(t).then(function(t){return t.persistence})}function Kf(t){return $f(t).then(function(t){return t.localStore})}function Wf(t){return Qf(t).then(function(t){return t.remoteStore})}function Jf(t){return Qf(t).then(function(t){return t.syncEngine})}function Yf(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return[4,Qf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=sf.bind(null,e.syncEngine),n.onUnlisten=af.bind(null,e.syncEngine),n)]}})})}function Xf(t,e,n){var r=this;void 0===n&&(n={});var i=new Ku;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(r,void 0,void 0,function(){var r;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Uf({next:function(s){e.enqueueAndForget(function(){return Hh(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new ns(es.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ns(es.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Kh(Co(n.path),s,{includeMetadataChanges:!0,so:!0});return zh(t,o)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function td(t,e,n){var r=this;void 0===n&&(n={});var i=new Ku;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(r,void 0,void 0,function(){var r;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Uf({next:function(n){e.enqueueAndForget(function(){return Hh(t,o)}),n.fromCache&&"server"===r.source?i.reject(new ns(es.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Kh(n,s,{includeMetadataChanges:!0,so:!0});return zh(t,o)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var ed=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},nd=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),rd=new Map,id=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},sd=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Ul.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),od=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ad=function(){function t(t){var e=this;this.currentUser=Ul.UNAUTHENTICATED,this.oc=new Ku,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){ss("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(ss("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(ss("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ls("string"==typeof n.accessToken),new id(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Gt.mG)(n,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ls(null===t||"string"==typeof t),new Ul(t)},t}(),ud=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Ul.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),cd=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new ud(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Ul.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ld(t,e,n){if(!n)throw new ns(es.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function hd(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ns(es.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function fd(t,e,n,r){if(!0===e&&!0===r)throw new ns(es.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function dd(t){if(!Ms.isDocumentKey(t))throw new ns(es.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function pd(t){if(Ms.isDocumentKey(t))throw new ns(es.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function gd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":cs()}function md(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ns(es.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=gd(t);throw new ns(es.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function yd(t,e){if(e<=0)throw new ns(es.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var vd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ns(es.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ns(es.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,fd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),_d=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vd({}),this._settingsFrozen=!1,t instanceof nd?(this._databaseId=t,this._credentials=new sd):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ns(es.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nd(t.options.projectId)}(t),this._credentials=new ad(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ns(es.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ns(es.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new sd;switch(t.type){case"gapi":var e=t.client;return ls(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new cd(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ns(es.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=rd.get(this))&&(ss("ComponentProvider","Removing Datastore"),rd.delete(this),t.terminate()),Promise.resolve();var t},t}(),bd=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ed(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),wd=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Co(r))||this)._path=r,i.type="collection",i}return(0,Gt.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new bd(this.firestore,null,new Ms(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(wd);function Sd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,zt.m9)(t),ld("collection","path",e),t instanceof _d)return pd(n=Ss.fromString.apply(Ss,(0,Gt.ev)([e],r))),new Ed(t,null,n);if(!(t instanceof bd||t instanceof Ed))throw new ns(es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pd(n=Ss.fromString.apply(Ss,(0,Gt.ev)([t.path],r)).child(Ss.fromString(e))),new Ed(t.firestore,null,n)}function Td(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,zt.m9)(t),1===arguments.length&&(e=ds.u()),ld("doc","path",e),t instanceof _d)return dd(n=Ss.fromString.apply(Ss,(0,Gt.ev)([e],r))),new bd(t,null,new Ms(n));if(!(t instanceof bd||t instanceof Ed))throw new ns(es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dd(n=t._path.child(Ss.fromString.apply(Ss,(0,Gt.ev)([e],r)))),new bd(t.firestore,t instanceof Ed?t.converter:null,new Ms(n))}function Cd(t,e){return t=(0,zt.m9)(t),e=(0,zt.m9)(e),(t instanceof bd||t instanceof Ed)&&(e instanceof bd||e instanceof Ed)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Id(t,e){return t=(0,zt.m9)(t),e=(0,zt.m9)(e),t instanceof wd&&e instanceof wd&&t.firestore===e.firestore&&Po(t._query,e._query)&&t.converter===e.converter}var Ad=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new sh(this,"async_queue_retry"),this.Tc=function(){var e=rh();e&&ss("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=rh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=rh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ec(t=n.sent()))throw t;return ss("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,os("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=Vh.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&cs()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t;return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function xd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Ku,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var kd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Ad,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Gt.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Dd(this),this._firestoreClient.terminate()},e}(_d);function Od(t){return t._firestoreClient||Dd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Dd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ed(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Gf(t._credentials,t._queue,r)}function Nd(t,e,n){var r=this,i=new Ku;return t.asyncQueue.enqueue(function(){return(0,Gt.mG)(r,void 0,void 0,function(){var r;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,zf(t,n)];case 1:return s.sent(),[4,Hf(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===es.FAILED_PRECONDITION||t.code===es.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Rd(t){if(t._initialized||t._terminated)throw new ns(es.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Pd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ns(es.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cs(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Ld=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(As.fromBase64String(e))}catch(e){throw new ns(es.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(As.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Fd=function(t){this._methodName=t},Vd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ns(es.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ns(es.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return ps(this._lat,t._lat)||ps(this._long,t._long)},t}(),Md=/^__.*__$/,jd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new fa(t,this.data,this.fieldMask,e,this.fieldTransforms):new ha(t,this.data,e,this.fieldTransforms)},t}(),Ud=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new fa(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function qd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cs()}}var Bd=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return up(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(qd(this.Cc)&&Md.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Gd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ih(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Bd({Cc:t,methodName:e,Bc:n,path:Cs.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function zd(t){var e=t._freezeSettings(),n=ih(t._databaseId);return new Gd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hd(t,e,n,r,i,s){void 0===s&&(s={});var o=t.qc(s.merge||s.mergeFields?2:0,e,n,i);ip("Data must be an object, but it was:",o,r);var a,u,c=np(r,o);if(s.merge)a=new Is(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,f=s.mergeFields;h<f.length;h++){var d=sp(e,f[h],n);if(!o.contains(d))throw new ns(es.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");cp(l,d)||l.push(d)}a=new Is(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new jd(new Xs(c),a,u)}var $d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Fd);function Qd(t,e,n){return new Bd({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new ea(t.path,new Qo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Fd),Kd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Qd(this,t,!0),n=this.Uc.map(function(t){return ep(t,e)}),r=new Zo(n);return new ea(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fd),Wd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Qd(this,t,!0),n=this.Uc.map(function(t){return ep(t,e)}),r=new Wo(n);return new ea(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fd),Jd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Yo(t.R,Bo(t.R,this.Kc));return new ea(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Fd);function Yd(t,e,n,r){var i=t.qc(1,e,n);ip("Data must be an object, but it was:",i,r);var s=[],o=Xs.empty();bs(r,function(t,r){var a=ap(e,t,n);r=(0,zt.m9)(r);var u=i.$c(a);if(r instanceof $d)s.push(a);else{var c=ep(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new Is(s);return new Ud(o,a,i.fieldTransforms)}function Xd(t,e,n,r,i,s){var o=t.qc(1,e,n),a=[sp(e,r,n)],u=[i];if(s.length%2!=0)throw new ns(es.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(sp(e,s[c])),u.push(s[c+1]);for(var l=[],h=Xs.empty(),f=a.length-1;f>=0;--f)if(!cp(l,a[f])){var d=a[f],p=u[f];p=(0,zt.m9)(p);var g=o.$c(d);if(p instanceof $d)l.push(d);else{var m=ep(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new Is(l);return new Ud(h,y,o.fieldTransforms)}function tp(t,e,n,r){return void 0===r&&(r=!1),ep(n,t.qc(r?4:3,e))}function ep(t,e){if(rp(t=(0,zt.m9)(t)))return ip("Unsupported field value:",e,t),np(t,e);if(t instanceof Fd)return function(t,e){if(!qd(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=ep(s[i],e.Oc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ys.fromDate(t);return{timestampValue:Wa(e.R,n)}}if(t instanceof ys)return n=new ys(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Wa(e.R,n)};if(t instanceof Vd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ld)return{bytesValue:Ja(e.R,t._byteString)};if(t instanceof bd){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:tu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+gd(t))}(t,e)}function np(t,e){var n={};return ws(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,function(t,r){var i=ep(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function rp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ys||t instanceof Vd||t instanceof Ld||t instanceof bd||t instanceof Fd)}function ip(t,e,n){if(!rp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=gd(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function sp(t,e,n){if((e=(0,zt.m9)(e))instanceof Pd)return e._internalPath;if("string"==typeof e)return ap(t,e);throw up("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var op=new RegExp("[~\\*/\\[\\]]");function ap(t,e,n){if(e.search(op)>=0)throw up("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Pd.bind.apply(Pd,(0,Gt.ev)([void 0],e.split(".")))))._internalPath}catch(ug){throw up("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function up(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new ns(es.INVALID_ARGUMENT,(a+=". ")+t+u)}function cp(t,e){return t.some(function(t){return t.isEqual(e)})}var lp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new bd(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new hp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(fp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(lp);function fp(t,e){return"string"==typeof e?ap(t,e):e instanceof Pd?e._internalPath:e._delegate._internalPath}var dp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),pp=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,Gt.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(fp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(lp),gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(pp),mp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new dp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new gp(n._firestore,n._userDataWriter,r.key,r,new dp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ns(es.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new dp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new dp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:yp(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function yp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cs()}}function vp(t,e){return t instanceof pp&&e instanceof pp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof mp&&e instanceof mp&&t._firestore===e._firestore&&Id(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function _p(t){if(Ao(t)&&0===t.explicitOrderBy.length)throw new ns(es.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bp=function(){};function wp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var Ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=zd(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ns(es.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){kp(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(xp(r,t,l[c]));a={arrayValue:{values:u}}}else a=xp(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||kp(o,s),a=tp(n,"where",o,"in"===s||"not-in"===s);var h=ao.create(i,s,a);return function(t,e){if(e.g()){var n=ko(t);if(null!==n&&!n.isEqual(e.field))throw new ns(es.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=xo(t);null!==r&&Op(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ns(es.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new wd(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(bp),Sp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ns(es.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ns(es.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _o(e,n);return function(t,e){if(null===xo(t)){var n=ko(t);null!==n&&Op(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new wd(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new So(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(bp),Tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){return new wd(t.firestore,t.converter,Ro(t._query,this.zc,this.Hc))},e}(bp),Cp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=Ap(t,this.type,this.Jc,this.Yc);return new wd(t.firestore,t.converter,function(t,e){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(bp),Ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=Ap(t,this.type,this.Jc,this.Yc);return new wd(t.firestore,t.converter,function(t,e){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(bp);function Ap(t,e,n,r){if(n[0]=(0,zt.m9)(n[0]),n[0]instanceof lp)return function(t,e,n,r,i){if(!r)throw new ns(es.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=Do(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push($s(e,r.key));else{var c=r.data.field(u.field);if(Ns(c))throw new ns(es.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new ns(es.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new yo(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=zd(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new ns(es.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new ns(es.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Oo(t)&&-1!==c.indexOf("/"))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ss.fromString(c));if(!Ms.isDocumentKey(l))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ms(l);a.push($s(e,h))}else{var f=tp(n,r,c);a.push(f)}}return new yo(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function xp(t,e,n){if("string"==typeof(n=(0,zt.m9)(n))){if(""===n)throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oo(e)&&-1!==n.indexOf("/"))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ss.fromString(n));if(!Ms.isDocumentKey(r))throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return $s(t,new Ms(r))}if(n instanceof bd)return $s(t,n._key);throw new ns(es.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+gd(n)+".")}function kp(t,e){if(!Array.isArray(t)||0===t.length)throw new ns(es.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ns(es.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Op(t,e,n){if(!n.isEqual(e))throw new ns(es.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Dp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),js(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Os(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ds(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw cs()}},t.prototype.convertObject=function(t,e){var n=this,r={};return bs(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Vd(Os(t.latitude),Os(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Rs(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ps(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ks(t);return new ys(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ss.fromString(t);ls(Cu(n));var r=new nd(n.get(1),n.get(3)),i=new Ms(n.popFirst(5));return r.isEqual(e)||os("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Np(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Rp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Gt.ZT)(e,t),e.prototype.convertBytes=function(t){return new Ld(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new bd(this.firestore,null,e)},e}(Dp),Pp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=zd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Lp(t,this._firestore),i=Np(r.converter,e,n),s=Hd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,ra.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=Lp(t,this._firestore);return s="string"==typeof(e=(0,zt.m9)(e))||e instanceof Pd?Xd(this._dataReader,"WriteBatch.update",o._key,e,n,r):Yd(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,ra.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Lp(t,this._firestore);return this._mutations=this._mutations.concat(new va(e._key,ra.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ns(es.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Lp(t,e){if((t=(0,zt.m9)(t)).firestore!==e)throw new ns(es.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Gt.ZT)(e,t),e.prototype.convertBytes=function(t){return new Ld(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new bd(this.firestore,null,e)},e}(Dp);function Vp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=md(t,bd);var s=md(t.firestore,kd),o=zd(s);return jp(s,[("string"==typeof(e=(0,zt.m9)(e))||e instanceof Pd?Xd(o,"updateDoc",t._key,e,n,r):Yd(o,"updateDoc",t._key,e)).toMutation(t._key,ra.exists(!0))])}function Mp(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,zt.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||xd(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(xd(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof bd)c=md(t.firestore,kd),l=Co(t._key.path),u={next:function(e){i[a]&&i[a](Up(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=md(t,wd);c=md(d.firestore,kd),l=d._query;var p=new Fp(c);u={next:function(t){i[a]&&i[a](new mp(c,p,d,t))},error:i[a+1],complete:i[a+2]},_p(t._query)}return function(t,e,n,r){var i=this,s=new Uf(r),o=new Kh(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(i,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=zh,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(i,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=Hh,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(Od(c),l,h,u)}function jp(t,e){return function(t,e){var n=this,r=new Ku;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return n=uf,[4,Jf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Od(t),e)}function Up(t,e,n){var r=n.docs.get(e._key),i=new Fp(t);return new pp(t,i,e._key,r,new dp(n.hasPendingWrites,n.fromCache),e.converter)}var qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Gt.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Lp(e,this._firestore),i=new Fp(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new pp(n._firestore,i,r._key,t._document,new dp(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=zd(t)}return t.prototype.get=function(t){var e=this,n=Lp(t,this._firestore),r=new Rp(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return cs();var i=t[0];if(i.isFoundDocument())return new lp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new lp(e._firestore,r,n._key,null,n.converter);throw cs()})},t.prototype.set=function(t,e,n){var r=Lp(t,this._firestore),i=Np(r.converter,e,n),s=Hd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=Lp(t,this._firestore);return s="string"==typeof(e=(0,zt.m9)(e))||e instanceof Pd?Xd(this._dataReader,"Transaction.update",o._key,e,n,r):Yd(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=Lp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Bp(){if("undefined"==typeof Uint8Array)throw new ns(es.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Gp(){if("undefined"==typeof atob)throw new ns(es.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var zp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Gp(),new t(Ld.fromBase64String(e))},t.fromUint8Array=function(e){return Bp(),new t(Ld.fromUint8Array(e))},t.prototype.toBase64=function(){return Gp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Bp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Hp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Rd(t=md(t,kd));var n=Od(t),r=t._freezeSettings(),i=new jf;return Nd(n,i,new Vf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Rd(t=md(t,kd));var e=Od(t),n=t._freezeSettings(),r=new jf;return Nd(e,r,new Mf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ns(es.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ku;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return Yu.yt()?[4,Yu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(cl(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),$p=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof nd||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||as("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=md(t,_d))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&as("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,zt.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new ns(es.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new od(new id(s,new Ul(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return[4,Zf(t)];case 1:return e=r.sent(),[4,Wf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=hs(t);return e.Or.delete(0),fh(e)}(n))]}})})})}(Od(md(this._delegate,kd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return[4,Zf(t)];case 1:return e=r.sent(),[4,Wf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return(e=hs(t)).Or.add(0),[4,dh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Od(md(this._delegate,kd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&fd("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ku;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return e=pf,[4,Jf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Od(md(this._delegate,kd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Uf(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){hs(t).Gr.add(e),e.next()},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){hs(t).Gr.delete(e)},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Od(t=md(t,kd)),xd(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new ns(es.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new og(this,Sd(this._delegate,t))}catch(t){throw Yp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Jp(this,Td(this._delegate,t))}catch(t){throw Yp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new rg(this,function(t,e){if(t=md(t,_d),ld("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ns(es.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new wd(t,null,function(t){return new So(Ss.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Yp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ku;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Qf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Bf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Od(t),function(n){return e(new qp(t,n))})}(this._delegate,function(n){return t(new Zp(e,n))})},t.prototype.batch=function(){var t=this;return Od(this._delegate),new Kp(new Pp(this._delegate,function(e){return jp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new ns(es.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new ns(es.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Qp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Gt.ZT)(e,t),e.prototype.convertBytes=function(t){return new zp(new Ld(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Jp.tu(e,this.firestore,null)},e}(Dp),Zp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Qp(t)}return t.prototype.get=function(t){var e=this,n=ag(t);return this._delegate.get(n).then(function(t){return new eg(e._firestore,new pp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=ag(t);return n?(hd("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=ag(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Gt.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=ag(t);return this._delegate.delete(e),this},t}(),Kp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=ag(t);return n?(hd("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=ag(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Gt.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=ag(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Wp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new gp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ng(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new Qp(e),n),i.set(n,s)),s},t}();Wp.nu=new WeakMap;var Jp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Qp(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new ns(es.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new bd(n._delegate,r,new Ms(e)))},t.tu=function(e,n,r){return new t(n,new bd(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new og(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new og(this.firestore,Sd(this._delegate,t))}catch(t){throw Yp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,zt.m9)(t))instanceof bd&&Cd(this._delegate,t)},t.prototype.set=function(t,e){e=hd("DocumentReference.set",e);try{return function(t,e,n){t=md(t,bd);var r=md(t.firestore,kd),i=Np(t.converter,e,n);return jp(r,[Hd(zd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ra.none())])}(this._delegate,t,e)}catch(t){throw Yp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Vp(this._delegate,t):Vp.apply(void 0,(0,Gt.ev)([this._delegate,t,e],n))}catch(t){throw Yp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return jp(md((t=this._delegate).firestore,kd),[new va(t._key,ra.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xp(e),i=tg(e,function(e){return new eg(t.firestore,new pp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Mp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=md(t,bd);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return function(t,e){var n=this,r=new Ku;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=hs(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ns(es.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=Mh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Kf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new pp(e,r,t._key,n,new dp(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=md(t,bd);var e=md(t.firestore,kd);return Xf(Od(e),t._key,{source:"server"}).then(function(n){return Up(e,t,n)})}(this._delegate):function(t){t=md(t,bd);var e=md(t.firestore,kd);return Xf(Od(e),t._key).then(function(n){return Up(e,t,n)})}(this._delegate)).then(function(t){return new eg(e.firestore,new pp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Wp.eu(this.firestore,e):null))},t}();function Yp(t,e,n){return t.message=t.message.replace(e,n),t}function Xp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!xd(r))return r}return{}}function tg(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=xd(t[0])?t[0]:xd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var eg=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Jp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return vp(this._delegate,t._delegate)},t}(),ng=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(eg),rg=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Qp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,wp(this._delegate,function(t,e,n){var r=e,i=fp("where",t);return new Ep(i,r,n)}(e,n,r)))}catch(e){throw Yp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,wp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=fp("orderBy",t);return new Sp(r,n)}(e,n)))}catch(e){throw Yp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,wp(this._delegate,function(t){return yd("limit",t),new Tp("limit",t,"F")}(e)))}catch(e){throw Yp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,wp(this._delegate,function(t){return yd("limitToLast",t),new Tp("limitToLast",t,"L")}(e)))}catch(e){throw Yp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cp("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Yp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cp("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Yp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ip("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Yp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,wp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ip("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Yp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Id(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=md(t,wd);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return function(t,e){var n=this,r=new Ku;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,Gt.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Tl(t,e,!0)];case 1:return a=u.sent(),r=new tf(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=Mh(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Kf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new mp(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=md(t,wd);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return td(n,t._query,{source:"server"}).then(function(n){return new mp(e,r,t,n)})}(this._delegate):function(t){t=md(t,wd);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return _p(t._query),td(n,t._query).then(function(n){return new mp(e,r,t,n)})}(this._delegate)).then(function(t){return new sg(e.firestore,new mp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xp(e),i=tg(e,function(e){return new sg(t.firestore,new mp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Mp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Wp.eu(this.firestore,e):null))},t}(),ig=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new ng(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),sg=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new rg(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new ng(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new ig(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new ng(n._firestore,r))})},t.prototype.isEqual=function(t){return vp(this._delegate,t._delegate)},t}(),og=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Gt.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Jp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Jp(this.firestore,void 0===t?Td(this._delegate):Td(this._delegate,t))}catch(t){throw Yp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=md(t.firestore,kd),r=Td(t),i=Np(t.converter,e);return jp(n,[Hd(zd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ra.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Jp(e.firestore,t)})},e.prototype.isEqual=function(t){return Cd(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Wp.eu(this.firestore,t):null))},e}(rg);function ag(t){return md(t,bd)}var ug,cg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Pd.bind.apply(Pd,(0,Gt.ev)([void 0],t)))}return t.documentId=function(){return new t(Cs.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,zt.m9)(t))instanceof Pd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),lg=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Zd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new $d("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kd("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wd("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Jd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),hg=n(5119),fg={Firestore:$p,GeoPoint:Vd,Timestamp:ys,Blob:zp,Transaction:Zp,WriteBatch:Kp,DocumentReference:Jp,DocumentSnapshot:eg,Query:rg,QueryDocumentSnapshot:ng,QuerySnapshot:sg,CollectionReference:og,FieldPath:cg,FieldValue:lg,setLogLevel:function(t){rs.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new hg.wA("firestore",function(t){return function(t,e){return new $p(t,new kd(t,e),new Hp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},fg)))})(ug=Bt.Z),ug.registerVersion("@firebase/firestore","2.3.8");var dg=n(5959),pg=n(1906),gg=n(6882);function mg(t,e){return"function"==typeof e?n=>n.pipe(mg((n,r)=>(0,bt.D)(t(n,r)).pipe((0,Ot.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new yg(t))}class yg{constructor(t){this.project=t}call(t,e){return e.subscribe(new vg(t,this.project))}}class vg extends gg.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new gg.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,gg.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var _g=n(8489),bg=n(7570),wg=n(3895),Eg=n(9291);class Sg extends dg.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Tg(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new wg.N;if(this.isStopped||this.hasError?s=bg.w.EMPTY:(this.observers.push(t),s=new Eg.W(this,t)),r&&t.add(t=new jt.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||_g.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class Tg{constructor(t,e){this.time=t,this.value=e}}function Cg(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new Sg(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}const Ig=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Ag=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var xg=n(653);function kg(t){return e=>0===t?(0,xg.c)():e.lift(new Og(t))}class Og{constructor(t){if(this.total=t,this.total<0)throw new Ag}call(t,e){return e.subscribe(new Dg(t,this.total))}}class Dg extends It.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ng(t=null){return e=>e.lift(new Rg(t))}class Rg{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Pg(t,this.defaultValue))}}class Pg extends It.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Lg(t=Mg){return e=>e.lift(new Fg(t))}class Fg{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Vg(t,this.errorFactory))}}class Vg extends It.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(ug){t=ug}this.destination.error(t)}}}function Mg(){return new Ig}var jg=n(3392);function Ug(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ft((e,n)=>t(e,n,r)):jg.y,kg(1),n?Ng(e):Lg(()=>new Ig))}function qg(t,e){return e?mg(()=>t,e):mg(()=>t)}var Bg=n(4187);const Gg=new r.OlP("angularfire2.auth.use-emulator"),zg=new r.OlP("angularfire2.auth.settings"),Hg=new r.OlP("angularfire2.auth.tenant-id"),$g=new r.OlP("angularfire2.auth.langugage-code"),Qg=new r.OlP("angularfire2.auth.use-device-language"),Zg=new r.OlP("angularfire.auth.persistence");let Kg=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new Ut.HU(i),f=(0,Ut.ss)(h),d=new dg.xQ,p=(0,wt.of)(void 0).pipe((0,jt.QV)(h.outsideAngular),mg(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,Ot.U)(()=>(0,Ut.on)(t,i,e)),(0,Ot.U)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return(0,Ut.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Cg({bufferSize:1,refCount:!1}));if(L(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,wt.of)(null);else{p.pipe(Ug()).subscribe();const t=p.pipe(mg(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Cg({bufferSize:1,refCount:!1})),e=t=>new _t.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(mg(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(mg(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(qg(n),(0,Bg.R)(h.outsideAngular),(0,jt.QV)(h.insideAngular)),this.user=t.pipe(qg(r),(0,Bg.R)(h.outsideAngular),(0,jt.QV)(h.insideAngular)),this.idToken=this.user.pipe(mg(t=>t?(0,bt.D)(t.getIdToken()):(0,wt.of)(null))),this.idTokenResult=this.user.pipe(mg(t=>t?(0,bt.D)(t.getIdTokenResult()):(0,wt.of)(null))),this.credential=(0,pg.T)(t,d,this.authState.pipe(Ft(t=>!t))).pipe((0,Ot.U)(t=>(null==t?void 0:t.user)?t:null),(0,Bg.R)(h.outsideAngular),(0,jt.QV)(h.insideAngular))}return(0,Ut.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ut.Dh),r.LFG(Ut.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Gg,8),r.LFG(zg,8),r.LFG(Hg,8),r.LFG($g,8),r.LFG(Qg,8),r.LFG(Zg,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Ut.Dh),r.LFG(Ut.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Gg,8),r.LFG(zg,8),r.LFG(Hg,8),r.LFG($g,8),r.LFG(Qg,8),r.LFG(Zg,8))},token:t,providedIn:"any"}),t})();function Wg(t,e){return function(t,e=vt.z){return new _t.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Jg(t,e){return Wg(t,e).pipe((0,Ot.U)(t=>({payload:t,type:"query"})))}function Yg(t,e){return Jg(t,e).pipe(Ct(void 0),At(),(0,Ot.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Xg(t,e,n){return Yg(t,n).pipe(Dt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return tm(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return tm(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tm(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Pt(void 0,void 0)),(0,Ot.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function tm(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function em(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(0,Ut.GT)(Kg,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class nm{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Yg(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ot.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ct(void 0),At(),Ft(([t,e])=>e.length>0||!t),(0,Ot.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Dt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=em(t);return Xg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,bt.D)(this.query.get(t)).pipe((0,jt.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new rm(this.ref.doc(t),this.afs)}}class rm{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=cm(n,e);return new nm(r,i,this.afs)}snapshotChanges(){return Wg(this.ref,this.afs.schedulers.outsideAngular).pipe(Ct(void 0),At(),(0,Ot.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ot.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,bt.D)(this.ref.get(t)).pipe((0,jt.QV)(this.afs.schedulers.insideAngular))}}class im{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Yg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ft(t=>t.length>0),this.afs.keepUnstableUntilFirst):Yg(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Dt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=em(t);return Xg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,bt.D)(this.query.get(t)).pipe((0,jt.QV)(this.afs.schedulers.insideAngular))}}const sm=new r.OlP("angularfire2.enableFirestorePersistence"),om=new r.OlP("angularfire2.firestore.persistenceSettings"),am=new r.OlP("angularfire2.firestore.settings"),um=new r.OlP("angularfire2.firestore.use-emulator");function cm(t,e=(t=>t)){return{query:e(t),ref:t}}let lm=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new Ut.HU(s),this.keepUnstableUntilFirst=(0,Ut.ss)(this.schedulers);const c=(0,Ut.on)(t,s,e);!qt.Z.auth&&u&&(0,Ut.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Ut.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!L(i)){const e=()=>{try{return(0,bt.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(ug){return"undefined"!=typeof console&&console.warn(ug),(0,wt.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,wt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=cm(n,e),s=this.schedulers.ngZone.run(()=>r);return new nm(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new im(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new rm(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ut.Dh),r.LFG(Ut.xv,8),r.LFG(sm,8),r.LFG(am,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(om,8),r.LFG(um,8),r.LFG(Gg,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Ut.Dh),r.LFG(Ut.xv,8),r.LFG(sm,8),r.LFG(am,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(om,8),r.LFG(um,8),r.LFG(Gg,8))},token:t,providedIn:"any"}),t})(),hm=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:sm,useValue:!0},{provide:om,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[lm]}),t})();var fm=n(8470),dm=n(2056);function pm(t,e){return new _t.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,bt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let gm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),mm=(()=>{class t extends gm{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const ym=new r.OlP("NgValueAccessor"),vm={provide:ym,useExisting:(0,r.Gpc)(()=>bm),multi:!0},_m=new r.OlP("CompositionEventMode");let bm=(()=>{class t extends gm{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(_m,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([vm]),r.qOj]}),t})();function wm(t){return null==t||0===t.length}function Em(t){return null!=t&&"number"==typeof t.length}const Sm=new r.OlP("NgValidators"),Tm=new r.OlP("NgAsyncValidators"),Cm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Im{static min(t){return function(t){return e=>{if(wm(e.value)||wm(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(wm(e.value)||wm(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return wm(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return wm(t.value)||Cm.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>wm(e.value)||!Em(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Em(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return Am;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(wm(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Rm(t)}static composeAsync(t){return Lm(t)}}function Am(t){return null}function xm(t){return null!=t}function km(t){const e=(0,r.QGY)(t)?(0,bt.D)(t):t;return(0,r.CqO)(e),e}function Om(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Dm(t,e){return e.map(e=>e(t))}function Nm(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Rm(t){if(!t)return null;const e=t.filter(xm);return 0==e.length?null:function(t){return Om(Dm(t,e))}}function Pm(t){return null!=t?Rm(Nm(t)):null}function Lm(t){if(!t)return null;const e=t.filter(xm);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,fm.k)(e))return pm(e,null);if((0,dm.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return pm(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return pm(t=1===t.length&&(0,fm.k)(t[0])?t[0]:t,null).pipe((0,Ot.U)(t=>e(...t)))}return pm(t,null)}(Dm(t,e).map(km)).pipe((0,Ot.U)(Om))}}function Fm(t){return null!=t?Lm(Nm(t)):null}function Vm(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Mm(t){return t._rawValidators}function jm(t){return t._rawAsyncValidators}let Um=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Pm(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Fm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),qm=(()=>{class t extends Um{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class Bm extends Um{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gm{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let zm=(()=>{class t extends Gm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Bm,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),Hm=(()=>{class t extends Gm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(qm,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function $m(t,e){Km(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Jm(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Jm(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Qm(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Wm(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Zm(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Km(t,e){const n=Mm(t);null!==e.validator?t.setValidators(Vm(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=jm(t);null!==e.asyncValidator?t.setAsyncValidators(Vm(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Zm(e._rawValidators,i),Zm(e._rawAsyncValidators,i)}function Wm(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=Mm(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.validator);i.length!==r.length&&(n=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const r=jm(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.asyncValidator);i.length!==r.length&&(n=!0,t.setAsyncValidators(i))}}}const r=()=>{};return Zm(e._rawValidators,r),Zm(e._rawAsyncValidators,r),n}function Jm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ym(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Xm="VALID",ty="INVALID",ey="PENDING",ny="DISABLED";function ry(t){return(ay(t)?t.validators:t)||null}function iy(t){return Array.isArray(t)?Pm(t):t||null}function sy(t,e){return(ay(e)?e.asyncValidators:t)||null}function oy(t){return Array.isArray(t)?Fm(t):t||null}function ay(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class uy{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=iy(this._rawValidators),this._composedAsyncValidatorFn=oy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Xm}get invalid(){return this.status===ty}get pending(){return this.status==ey}get disabled(){return this.status===ny}get enabled(){return this.status!==ny}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=iy(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=oy(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ey,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ny,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Xm,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Xm&&this.status!==ey||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ny:Xm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ey,this._hasOwnPendingAsyncValidator=!0;const e=km(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ly?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof hy&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?ny:this.errors?ty:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ey)?ey:this._anyControlsHaveStatus(ty)?ty:Xm}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ay(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cy extends uy{constructor(t=null,e,n){super(ry(e),sy(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ym(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ym(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ly extends uy{constructor(t,e,n){super(ry(e),sy(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof cy?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class hy extends uy{constructor(t,e,n){super(ry(e),sy(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof cy?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let fy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),dy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const py=new r.OlP("NgModelWithFormControlWarning"),gy={provide:qm,useExisting:(0,r.Gpc)(()=>my)};let my=(()=>{class t extends qm{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Wm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return $m(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Qm(t.control||null,t,!1),Ym(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(Qm(e||null,t),n instanceof cy&&($m(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){Km(t,e)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Wm(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Km(this.form,this),this._oldForm&&Wm(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Sm,10),r.Y36(Tm,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([gy]),r.qOj,r.TTD]}),t})();const yy={provide:Bm,useExisting:(0,r.Gpc)(()=>vy)};let vy=(()=>{class t extends Bm{constructor(t,e,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===bm?n=t:Object.getPrototypeOf(t.constructor)===mm?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(qm,13),r.Y36(Sm,10),r.Y36(Tm,10),r.Y36(ym,10),r.Y36(py,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([yy]),r.qOj,r.TTD]}),t._ngModelWarningSentOnce=!1,t})(),_y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[dy]]}),t})(),by=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:py,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[_y]}),t})(),wy=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,s=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new ly(n,{asyncValidators:s,updateOn:r,validators:i})}control(t,e,n){return new cy(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new hy(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof cy||t instanceof ly||t instanceof hy?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t},token:t,providedIn:by}),t})();class Ey extends dg.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new wg.N;return this._value}next(t){super.next(this._value=t)}}class Sy extends It.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ty extends It.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Cy=n(6015);function Iy(t,e,n,r,i=new Ty(t,n,r)){if(!i.closed)return e instanceof _t.y?e.subscribe(i):(0,Cy.s)(e)(i)}var Ay=n(9342);const xy={};class ky{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Oy(t,this.resultSelector))}}class Oy extends Sy{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(xy),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Iy(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===xy?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Dy(t){return new _t.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,bt.D)(n):(0,xg.c)()).subscribe(e)})}var Ny=n(2875);function Ry(t){return function(e){const n=new Py(t),r=e.lift(n);return n.caught=r}}class Py{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ly(t,this.selector,this.caught))}}class Ly extends gg.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new gg.IY(this);this.add(r);const i=(0,gg.ft)(n,r);i!==r&&this.add(i)}}}var Fy=n(3982);function Vy(t,e){return(0,Fy.zg)(t,e,1)}function My(t){return function(e){return 0===t?(0,xg.c)():e.lift(new jy(t))}}class jy{constructor(t){if(this.total=t,this.total<0)throw new Ag}call(t,e){return e.subscribe(new Uy(t,this.total))}}class Uy extends It.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var qy=n(6599),By=n(1564);class Gy{constructor(t){this.callback=t}call(t,e){return e.subscribe(new zy(t,this.callback))}}class zy extends It.L{constructor(t,e){super(t),this.add(new bg.w(e))}}class Hy{constructor(t,e){this.id=t,this.url=e}}class $y extends Hy{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qy extends Hy{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zy extends Hy{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ky extends Hy{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wy extends Hy{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jy extends Hy{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yy extends Hy{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xy extends Hy{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tv extends Hy{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ev{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nv{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rv{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iv{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sv{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ov{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class av{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const uv="primary";class cv{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function lv(t){return new cv(t)}function hv(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function fv(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dv(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!pv(t[i],e[i]))return!1;return!0}function pv(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function gv(t){return Array.prototype.concat.apply([],t)}function mv(t){return t.length>0?t[t.length-1]:null}function yv(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function vv(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,bt.D)(Promise.resolve(t)):(0,wt.of)(t)}const _v={exact:function t(e,n,r){if(!xv(e.segments,n.segments))return!1;if(!Tv(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Ev},bv={exact:function(t,e){return dv(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>pv(t[n],e[n]))},ignored:()=>!0};function wv(t,e,n){return _v[n.paths](t.root,e.root,n.matrixParams)&&bv[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Ev(t,e,n){return Sv(t,e,e.segments,n)}function Sv(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!xv(i,n)&&!e.hasChildren()&&!!Tv(i,n,r)}if(t.segments.length===n.length){if(!xv(t.segments,n))return!1;if(!Tv(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ev(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!xv(t.segments,i)&&!!Tv(t.segments,i,r)&&!!t.children.primary&&Sv(t.children.primary,e,s,r)}}function Tv(t,e,n){return e.every((e,r)=>bv[n](t[r].parameters,e.parameters))}class Cv{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lv(this.queryParams)),this._queryParamMap}toString(){return Dv.serialize(this)}}class Iv{constructor(t,e){this.segments=t,this.children=e,this.parent=null,yv(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nv(this)}}class Av{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=lv(this.parameters)),this._parameterMap}toString(){return jv(this)}}function xv(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class kv{}class Ov{parse(t){const e=new zv(t);return new Cv(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Rv(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Lv(e)}=${Lv(t)}`).join("&"):`${Lv(e)}=${Lv(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Dv=new Ov;function Nv(t){return t.segments.map(t=>jv(t)).join("/")}function Rv(t,e){if(!t.hasChildren())return Nv(t);if(e){const e=t.children.primary?Rv(t.children.primary,!1):"",n=[];return yv(t.children,(t,e)=>{e!==uv&&n.push(`${e}:${Rv(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return yv(t.children,(t,r)=>{r===uv&&(n=n.concat(e(t,r)))}),yv(t.children,(t,r)=>{r!==uv&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===uv?[Rv(t.children.primary,!1)]:[`${n}:${Rv(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Nv(t)}/${e[0]}`:`${Nv(t)}/(${e.join("//")})`}}function Pv(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lv(t){return Pv(t).replace(/%3B/gi,";")}function Fv(t){return Pv(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vv(t){return decodeURIComponent(t)}function Mv(t){return Vv(t.replace(/\+/g,"%20"))}function jv(t){return`${Fv(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Fv(t)}=${Fv(e[t])}`).join("")}`;var e}const Uv=/^[^\/()?;=#]+/;function qv(t){const e=t.match(Uv);return e?e[0]:""}const Bv=/^[^=?&#]+/,Gv=/^[^?&#]+/;class zv{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Iv([],{}):new Iv([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Iv(t,e)),n}parseSegment(){const t=qv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Av(Vv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=qv(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=qv(this.remaining);t&&(n=t,this.capture(n))}t[Vv(e)]=Vv(n)}parseQueryParam(t){const e=function(t){const e=t.match(Bv);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Gv);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Mv(e),i=Mv(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=qv(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=uv);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Iv([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Hv{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=$v(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=$v(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Qv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Qv(t,this._root).map(t=>t.value)}}function $v(t,e){if(t===e.value)return e;for(const n of e.children){const e=$v(t,n);if(e)return e}return null}function Qv(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Qv(t,n);if(r.length)return r.unshift(e),r}return[]}class Zv{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Kv(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Wv extends Hv{constructor(t,e){super(t),this.snapshot=e,n_(this,t)}toString(){return this.snapshot.toString()}}function Jv(t,e){const n=function(t,e){const n=new t_([],{},{},"",{},uv,e,null,t.root,-1,{});return new e_("",new Zv(n,[]))}(t,e),r=new Ey([new Av("",{})]),i=new Ey({}),s=new Ey({}),o=new Ey({}),a=new Ey(""),u=new Yv(r,i,o,a,s,uv,e,n.root);return u.snapshot=n.root,new Wv(new Zv(u,[]),n)}class Yv{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ot.U)(t=>lv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ot.U)(t=>lv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xv(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class t_{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class e_ extends Hv{constructor(t,e){super(e),this.url=t,n_(this,e)}toString(){return r_(this._root)}}function n_(t,e){e.value._routerState=t,e.children.forEach(e=>n_(t,e))}function r_(t){const e=t.children.length>0?` { ${t.children.map(r_).join(", ")} } `:"";return`${t.value}${e}`}function i_(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dv(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),dv(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dv(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),dv(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function s_(t,e){return dv(t.params,e.params)&&function(t,e){return xv(t,e)&&t.every((t,n)=>dv(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||s_(t.parent,e.parent))}function o_(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return o_(t,e,r);return o_(t,e)})}(t,e,n);return new Zv(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return a_(e,t),t}}const n=new Yv(new Ey((r=e.value).url),new Ey(r.params),new Ey(r.queryParams),new Ey(r.fragment),new Ey(r.data),r.outlet,r.component,r),i=e.children.map(e=>o_(t,e));return new Zv(n,i)}var r}function a_(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)a_(t.children[n],e.children[n])}function u_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function c_(t){return"object"==typeof t&&null!=t&&t.outlets}function l_(t,e,n,r,i){let s={};return r&&yv(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Cv(n.root===t?e:h_(n.root,t,e),s,i)}function h_(t,e,n){const r={};return yv(t.children,(t,i)=>{r[i]=t===e?n:h_(t,e,n)}),new Iv(t.segments,r)}class f_{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&u_(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(c_);if(r&&r!==mv(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class d_{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function p_(t,e,n){if(t||(t=new Iv([],{})),0===t.segments.length&&t.hasChildren())return g_(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(c_(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!__(a,u,e))return s;r+=2}else{if(!__(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Iv(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Iv(t.segments.slice(r.pathIndex),t.children),g_(e,0,i)}return r.match&&0===i.length?new Iv(t.segments,{}):r.match&&!t.hasChildren()?m_(t,e,n):r.match?g_(t,0,i):m_(t,e,n)}function g_(t,e,n){if(0===n.length)return new Iv(t.segments,{});{const r=function(t){return c_(t[0])?t[0].outlets:{[uv]:t}}(n),i={};return yv(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=p_(t.children[r],e,n))}),yv(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Iv(t.segments,i)}}function m_(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(c_(s)){const t=y_(s.outlets);return new Iv(r,t)}if(0===i&&u_(n[0])){r.push(new Av(t.segments[e].path,v_(n[0]))),i++;continue}const o=c_(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&u_(a)?(r.push(new Av(o,v_(a))),i+=2):(r.push(new Av(o,{})),i++)}return new Iv(r,{})}function y_(t){const e={};return yv(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=m_(new Iv([],{}),0,t))}),e}function v_(t){const e={};return yv(t,(t,n)=>e[n]=`${t}`),e}function __(t,e,n){return t==n.path&&dv(e,n.parameters)}class b_{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),i_(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Kv(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),yv(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Kv(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Kv(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new ov(t.value.snapshot))}),t.children.length&&this.forwardEvent(new iv(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(i_(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),w_(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function w_(t){i_(t.value),t.children.forEach(w_)}class E_{constructor(t,e){this.routes=t,this.module=e}}function S_(t){return"function"==typeof t}function T_(t){return t instanceof Cv}const C_=Symbol("INITIAL_VALUE");function I_(){return mg(t=>function(...t){let e,n;return(0,Tt.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,fm.k)(t[0])&&(t=t[0]),(0,Ay.n)(t,n).lift(new ky(e))}(t.map(t=>t.pipe(kg(1),Ct(C_)))).pipe(Dt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==C_)return t;if(r===C_&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||T_(r))return r}return t},t)},C_),Ft(t=>t!==C_),(0,Ot.U)(t=>T_(t)?t:!0===t),kg(1)))}let A_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[Sb]},encapsulation:2}),t})();function x_(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];k_(r,O_(e,r))}}function k_(t,e){t.children&&x_(t.children,e)}function O_(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function D_(t){const e=t.children&&t.children.map(D_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==uv&&(n.component=A_),n}function N_(t){return t.outlet||uv}function R_(t,e){const n=t.filter(t=>N_(t)===e);return n.push(...t.filter(t=>N_(t)!==e)),n}const P_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function L_(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},P_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||fv)(n,t,e);if(!i)return Object.assign({},P_);const s={};yv(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function F_(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>V_(t,e,n)&&N_(n)!==uv)}(t,n,r)){const i=new Iv(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&N_(s)!==uv){const n=new Iv([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[N_(s)]=n}return i}(t,e,r,new Iv(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>V_(t,e,n))}(t,n,r)){const s=new Iv(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(V_(t,n,a)&&!i[N_(a)]){const n=new Iv([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[N_(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Iv(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function V_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function M_(t,e,n,r){return!!(N_(t)===r||r!==uv&&V_(e,n,t))&&("**"===t.path||L_(e,t,n).matched)}function j_(t,e,n){return 0===e.length&&!t.children[n]}class U_{constructor(t){this.segmentGroup=t||null}}class q_{constructor(t){this.urlTree=t}}function B_(t){return new _t.y(e=>e.error(new U_(t)))}function G_(t){return new _t.y(e=>e.error(new q_(t)))}function z_(t){return new _t.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class H_{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=F_(this.urlTree.root,[],[],this.config).segmentGroup,e=new Iv(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,uv).pipe((0,Ot.U)(t=>this.createUrlTree($_(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ry(t=>{if(t instanceof q_)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof U_)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,uv).pipe((0,Ot.U)(e=>this.createUrlTree($_(e),t.queryParams,t.fragment))).pipe(Ry(t=>{if(t instanceof U_)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Iv([],{[uv]:t}):t;return new Cv(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Ot.U)(t=>new Iv([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,bt.D)(r).pipe(Vy(r=>{const i=n.children[r],s=R_(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,Ot.U)(t=>({segment:t,outlet:r})))}),Dt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ft((e,n)=>t(e,n,r)):jg.y,My(1),n?Ng(e):Lg(()=>new Ig))}())}expandSegment(t,e,n,r,i,s){return(0,bt.D)(n).pipe(Vy(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(Ry(t=>{if(t instanceof U_)return(0,wt.of)(null);throw t}))),Ug(t=>!!t),Ry((t,n)=>{if(t instanceof Ig||"EmptyError"===t.name){if(j_(e,r,i))return(0,wt.of)(new Iv([],{}));throw new U_(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return M_(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):B_(e):B_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?G_(i):this.lineralizeSegments(n,i).pipe((0,Fy.zg)(n=>{const i=new Iv(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=L_(e,r,i);if(!o)return B_(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?G_(l):this.lineralizeSegments(r,l).pipe((0,Fy.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,wt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Ot.U)(t=>(n._loadedConfig=t,new Iv(r,{})))):(0,wt.of)(new Iv(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=L_(e,n,r);if(!s)return B_(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,Fy.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=F_(e,o,u,s),l=new Iv(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Ot.U)(t=>new Iv(o,t)));if(0===s.length&&0===c.length)return(0,wt.of)(new Iv(o,{}));const h=N_(n)===i;return this.expandSegment(r,l,s,c,h?uv:i,!0).pipe((0,Ot.U)(t=>new Iv(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,wt.of)(new E_(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,wt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Fy.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Ot.U)(t=>(e._loadedConfig=t,t))):function(t){return new _t.y(e=>e.error(hv(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,wt.of)(new E_([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,wt.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&S_(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!S_(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return vv(s)});return(0,wt.of)(i).pipe(I_(),(0,qy.b)(t=>{if(!T_(t))return;const e=hv(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Ot.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,wt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return z_(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Cv(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return yv(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return yv(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Iv(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function $_(t){const e={};for(const n of Object.keys(t.children)){const r=$_(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Iv(t.segments.concat(e.segments),e.children)}return t}(new Iv(t.segments,e))}class Q_{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Z_{constructor(t,e){this.component=t,this.route=e}}function K_(t,e,n){const r=t._root;return J_(r,e?e._root:null,n,[r.value])}function W_(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function J_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Kv(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!xv(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xv(t.url,e.url)||!dv(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!s_(t,e)||!dv(t.queryParams,e.queryParams);case"paramsChange":default:return!s_(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Q_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),J_(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Z_(a.outlet.component,o))}else o&&Y_(e,a,i),i.canActivateChecks.push(new Q_(r)),J_(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),yv(s,(t,e)=>Y_(t,n.getContext(e),i)),i}function Y_(t,e,n){const r=Kv(t),i=t.value;yv(r,(t,r)=>{Y_(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Z_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class X_{}function tb(t){return new _t.y(e=>e.error(t))}class eb{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=F_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,uv);if(null===e)return null;const n=new t_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},uv,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Zv(n,e),i=new e_(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Xv(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=R_(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=rb(n);return r.sort((t,e)=>t.value.outlet===uv?-1:e.value.outlet===uv?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return j_(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!M_(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?mv(n).parameters:{};i=new t_(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ob(t),N_(t),t.component,t,ib(e),sb(e)+n.length,ab(t))}else{const r=L_(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new t_(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ob(t),N_(t),t.component,t,ib(e),sb(e)+s.length,ab(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=F_(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Zv(i,t)]}if(0===a.length&&0===c.length)return[new Zv(i,[])];const l=N_(t)===r,h=this.processSegment(a,u,c,l?uv:r);return null===h?null:[new Zv(i,h)]}}function nb(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rb(t){const e=[],n=new Set;for(const r of t){if(!nb(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=rb(r.children);e.push(new Zv(r.value,t))}return e.filter(t=>!n.has(t))}function ib(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function sb(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ob(t){return t.data||{}}function ab(t){return t.resolve||{}}function ub(t){return mg(e=>{const n=t(e);return n?(0,bt.D)(n).pipe((0,Ot.U)(()=>e)):(0,wt.of)(e)})}class cb extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const lb=new r.OlP("ROUTES");class hb{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Ot.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new E_(gv(i.injector.get(lb,void 0,r.XFs.Self|r.XFs.Optional)).map(D_),i)}),Ry(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ny.c(n,()=>new dg.xQ).pipe((0,By.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,bt.D)(this.loader.load(t)):vv(t()).pipe((0,Fy.zg)(t=>t instanceof r.YKP?(0,wt.of)(t):(0,bt.D)(this.compiler.compileModuleAsync(t))))}}class fb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new db,this.attachRef=null}}class db{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new fb,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class pb{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function gb(t){throw t}function mb(t,e,n){return e.parse("/")}function yb(t,e){return(0,wt.of)(null)}const vb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_b={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bb=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dg.xQ,this.errorHandler=gb,this.malformedUriErrorHandler=mb,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:yb,afterPreactivation:yb},this.urlHandlingStrategy=new pb,this.routeReuseStrategy=new cb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Cv(new Iv([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hb(o,a,t=>this.triggerEvent(new ev(t)),t=>this.triggerEvent(new nv(t))),this.routerState=Jv(this.currentUrlTree,this.rootComponentType),this.transitions=new Ey({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ft(t=>0!==t.id),(0,Ot.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),mg(t=>{let n=!1,r=!1;return(0,wt.of)(t).pipe((0,qy.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mg(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,wt.of)(t).pipe(mg(t=>{const n=this.transitions.getValue();return e.next(new $y(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?xg.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,mg(t=>function(t,e,n,r,i){return new H_(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,Ot.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,qy.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,Fy.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new eb(t,e,n,r,i,s).recognize();return null===o?tb(new X_):(0,wt.of)(o)}catch(ug){return tb(ug)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,Ot.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qy.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Wy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new $y(n,this.serializeUrl(r),i,s);e.next(a);const u=Jv(r,this.rootComponentType).snapshot;return(0,wt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),xg.E}),ub(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,qy.b)(t=>{const e=new Jy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Ot.U)(t=>Object.assign(Object.assign({},t),{guards:K_(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Fy.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,wt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,bt.D)(t).pipe((0,Fy.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,wt.of)(!0);const o=s.map(s=>{const o=W_(s,e,i);let a;if(function(t){return t&&S_(t.canDeactivate)}(o))a=vv(o.canDeactivate(t,e,n,r));else{if(!S_(o))throw new Error("Invalid CanDeactivate guard");a=vv(o(t,e,n,r))}return a.pipe(Ug())});return(0,wt.of)(o).pipe(I_())}(t.component,t.route,n,e,r)),Ug(t=>!0!==t,!0))}(o,r,i,t).pipe((0,Fy.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,bt.D)(e).pipe(Vy(e=>St(function(t,e){return null!==t&&e&&e(new rv(t)),(0,wt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new sv(t)),(0,wt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Dy(()=>{const i=e.guards.map(i=>{const s=W_(i,e.node,n);let o;if(function(t){return t&&S_(t.canActivateChild)}(s))o=vv(s.canActivateChild(r,t));else{if(!S_(s))throw new Error("Invalid CanActivateChild guard");o=vv(s(r,t))}return o.pipe(Ug())});return(0,wt.of)(i).pipe(I_())}));return(0,wt.of)(i).pipe(I_())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,wt.of)(!0);const i=r.map(r=>Dy(()=>{const i=W_(r,e,n);let s;if(function(t){return t&&S_(t.canActivate)}(i))s=vv(i.canActivate(e,t));else{if(!S_(i))throw new Error("Invalid CanActivate guard");s=vv(i(e,t))}return s.pipe(Ug())}));return(0,wt.of)(i).pipe(I_())}(t,e.route,n))),Ug(t=>!0!==t,!0))}(r,s,t,e):(0,wt.of)(n)),(0,Ot.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,qy.b)(t=>{if(T_(t.guardsResult)){const e=hv(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Yy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ft(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),ub(t=>{if(t.guards.canActivateChecks.length)return(0,wt.of)(t).pipe((0,qy.b)(t=>{const e=new Xy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),mg(t=>{let e=!1;return(0,wt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Fy.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,wt.of)(t);let s=0;return(0,bt.D)(i).pipe(Vy(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,wt.of)({});const s={};return(0,bt.D)(i).pipe((0,Fy.zg)(i=>function(t,e,n,r){const i=W_(t,e,r);return vv(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,qy.b)(t=>{s[i]=t}))),My(1),(0,Fy.zg)(()=>Object.keys(s).length===i.length?(0,wt.of)(s):xg.E))}(t._resolve,t,e,r).pipe((0,Ot.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Xv(t,n).resolve),null)))}(t.route,e,n,r)),(0,qy.b)(()=>s++),My(1),(0,Fy.zg)(e=>s===i.length?(0,wt.of)(t):xg.E))})),(0,qy.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,qy.b)(t=>{const e=new tv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),ub(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Ot.U)(t=>{const e=function(t,e,n){const r=o_(t,e._root,n?n._root:void 0);return new Wv(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,qy.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,Ot.U)(t=>(new b_(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,qy.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new Gy(i))),Ry(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=T_(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Zy(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ky(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(No){t.reject(No)}}var i;return xg.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){x_(t),this.config=t.map(D_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return l_(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new f_(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return yv(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new f_(n,e,r)}(n);if(s.toRoot())return l_(e.root,new Iv([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new d_(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new d_(t,t===e.root,0)}const r=u_(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new d_(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?g_(o.segmentGroup,o.index,s.commands):p_(o.segmentGroup,o.index,s.commands);return l_(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=T_(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(ug){e=this.malformedUriErrorHandler(ug,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},vb):!1===e?Object.assign({},_b):e,T_(t))return wv(this.currentUrlTree,t,n);const r=this.parseUrl(t);return wv(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Qy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Zy(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(kv),r.LFG(db),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),wb=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new dg.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Eb(this.skipLocationChange),replaceUrl:Eb(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Eb(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(bb),r.Y36(Yv),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function Eb(t){return""===t||!!t}let Sb=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||uv,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Tb(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(db),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Tb{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Yv?this.route:t===db?this.childContexts:this.parent.get(t,e)}}class Cb{}class Ib{preload(t,e){return(0,wt.of)(null)}}let Ab=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new hb(e,n,e=>t.triggerEvent(new ev(e)),e=>t.triggerEvent(new nv(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ft(t=>t instanceof Qy),Vy(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,bt.D)(n).pipe((0,Et.J)(),(0,Ot.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,wt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Fy.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(bb),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Cb))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),xb=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $y?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qy&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof av&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new av(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(bb),r.LFG(F),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const kb=new r.OlP("ROUTER_CONFIGURATION"),Ob=new r.OlP("ROUTER_FORROOT_GUARD"),Db=[w,{provide:kv,useClass:Ov},{provide:bb,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new bb(null,t,e,n,r,i,s,gv(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[kv,db,w,r.zs3,r.v3s,r.Sil,lb,kb,[class{},new r.FiY],[class{},new r.FiY]]},db,{provide:Yv,useFactory:function(t){return t.routerState.root},deps:[bb]},{provide:r.v3s,useClass:r.EAV},Ab,Ib,class{preload(t,e){return e().pipe(Ry(()=>(0,wt.of)(null)))}},{provide:kb,useValue:{enableTracing:!1}}];function Nb(){return new r.PXZ("Router",bb)}let Rb=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Db,Vb(e),{provide:Ob,useFactory:Fb,deps:[[bb,new r.FiY,new r.tp0]]},{provide:kb,useValue:n||{}},{provide:m,useFactory:Lb,deps:[a,[new r.tBr(v),new r.FiY],kb]},{provide:xb,useFactory:Pb,deps:[bb,F,kb]},{provide:Cb,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ib},{provide:r.PXZ,multi:!0,useFactory:Nb},[Mb,{provide:r.ip1,multi:!0,useFactory:jb,deps:[Mb]},{provide:qb,useFactory:Ub,deps:[Mb]},{provide:r.tb,multi:!0,useExisting:qb}]]}}static forChild(e){return{ngModule:t,providers:[Vb(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ob,8),r.LFG(bb,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Pb(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new xb(t,e,n)}function Lb(t,e,n={}){return n.useHash?new b(t,e):new _(t,e)}function Fb(t){return"guarded"}function Vb(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:lb,multi:!0,useValue:t}]}let Mb=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new dg.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(bb),r=this.injector.get(kb);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,wt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(kb),n=this.injector.get(Ab),i=this.injector.get(xb),s=this.injector.get(bb),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function jb(t){return t.appInitializer.bind(t)}function Ub(t){return t.bootstrapListener.bind(t)}const qb=new r.OlP("Router Initializer");let Bb=(()=>{class t{constructor(t){this.firestore=t}agregarPelicula(t){return this.firestore.collection("peliculas").add(t)}getPeliculas(){return this.firestore.collection("peliculas",t=>t.orderBy("fechaCreacion","asc")).snapshotChanges()}eliminarPelicula(t){return this.firestore.collection("peliculas").doc(t).delete()}getPelicula(t){return this.firestore.collection("peliculas").doc(t).snapshotChanges()}actualizarPelicula(t,e){return this.firestore.collection("peliculas").doc(t).update(e)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(lm))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Gb{}const zb="*";function Hb(t,e=null){return{type:4,styles:e,timings:t}}function $b(t,e=null){return{type:2,steps:t,options:e}}function Qb(t){return{type:6,styles:t,offset:null}}function Zb(t,e,n){return{type:0,name:t,styles:e,options:n}}function Kb(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Wb(t){Promise.resolve(null).then(t)}class Jb{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Wb(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Yb{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Wb(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const Xb=["toast-component",""];function tw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",5),r.NdJ("click",function(){return r.CHM(t),r.oxw().remove()}),r.TgZ(1,"span",6),r._uU(2,"\xd7"),r.qZA(),r.qZA()}}function ew(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw(2);r.xp6(1),r.hij("[",t.duplicatesCount+1,"]")}}function nw(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.YNc(2,ew,2,1,"ng-container",4),r.qZA()),2&t){const t=r.oxw();r.Tol(t.options.titleClass),r.uIk("aria-label",t.title),r.xp6(1),r.hij(" ",t.title," "),r.xp6(1),r.Q6J("ngIf",t.duplicatesCount)}}function rw(t,e){if(1&t&&r._UZ(0,"div",7),2&t){const t=r.oxw();r.Tol(t.options.messageClass),r.Q6J("innerHTML",t.message,r.oJD)}}function iw(t,e){if(1&t&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.Tol(t.options.messageClass),r.uIk("aria-label",t.message),r.xp6(1),r.hij(" ",t.message," ")}}function sw(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"div",9),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Udp("width",t.width+"%")}}function ow(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",5),r.NdJ("click",function(){return r.CHM(t),r.oxw().remove()}),r.TgZ(1,"span",6),r._uU(2,"\xd7"),r.qZA(),r.qZA()}}function aw(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw(2);r.xp6(1),r.hij("[",t.duplicatesCount+1,"]")}}function uw(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.YNc(2,aw,2,1,"ng-container",4),r.qZA()),2&t){const t=r.oxw();r.Tol(t.options.titleClass),r.uIk("aria-label",t.title),r.xp6(1),r.hij(" ",t.title," "),r.xp6(1),r.Q6J("ngIf",t.duplicatesCount)}}function cw(t,e){if(1&t&&r._UZ(0,"div",7),2&t){const t=r.oxw();r.Tol(t.options.messageClass),r.Q6J("innerHTML",t.message,r.oJD)}}function lw(t,e){if(1&t&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.Tol(t.options.messageClass),r.uIk("aria-label",t.message),r.xp6(1),r.hij(" ",t.message," ")}}function hw(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"div",9),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Udp("width",t.width+"%")}}class fw{constructor(t,e,n,r,i,s){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=s,this._onTap=new dg.xQ,this._onAction=new dg.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const dw={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},pw=new r.OlP("ToastConfig");class gw{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class mw extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let yw=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(o))},token:t,providedIn:"root"}),t})();class vw{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let _w=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new mw(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new vw(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yw),r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(yw),r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(o))},token:t,providedIn:"root"}),t})();class bw{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new dg.xQ,this._activate=new dg.xQ,this._manualClose=new dg.xQ,this._resetTimeout=new dg.xQ,this._countDuplicate=new dg.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class ww{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===fw?this._toastPackage:this._parentInjector.get(t,e,n)}}let Ew=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const s of this.toasts){const o=i&&s.title===t;if((!i||o)&&s.message===e)return s.toastRef.onDuplicate(n,r),s}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const s=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==s)return s;this.previousToastMessage=e;let o=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(o=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=e;e&&i.enableHtml&&(u=this.sanitizer.sanitize(r.q3G.HTML,e));const c=new bw(a),l=new fw(this.index,i,u,n,t,c),h=new ww(l,this._injector),f=new gw(i.toastComponent,h),d=a.attach(f,this.toastrConfig.newestOnTop);c.componentInstance=d.instance;const p={toastId:this.index,title:n||"",message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:d};return o||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(pw),r.LFG(_w),r.LFG(r.zs3),r.LFG(ft),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(pw),r.LFG(_w),r.LFG(r.gxx),r.LFG(ft),r.LFG(r.R0b))},token:t,providedIn:"root"}),t})(),Sw=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}var e;return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ew),r.Y36(fw),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.d8E("@flyInOut",e.state),r.Tol(e.toastClasses),r.Udp("display",e.displayStyle))},attrs:Xb,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.YNc(0,tw,3,0,"button",0),r.YNc(1,nw,3,5,"div",1),r.YNc(2,rw,1,3,"div",2),r.YNc(3,iw,2,4,"div",3),r.YNc(4,sw,2,2,"div",4)),2&t&&(r.Q6J("ngIf",e.options.closeButton),r.xp6(1),r.Q6J("ngIf",e.title),r.xp6(1),r.Q6J("ngIf",e.message&&e.options.enableHtml),r.xp6(1),r.Q6J("ngIf",e.message&&!e.options.enableHtml),r.xp6(1),r.Q6J("ngIf",e.options.progressBar))},directives:[D],encapsulation:2,data:{animation:[(e=[Zb("inactive",Qb({opacity:0})),Zb("active",Qb({opacity:1})),Zb("removed",Qb({opacity:0})),Kb("inactive => active",Hb("{{ easeTime }}ms {{ easing }}")),Kb("active => removed",Hb("{{ easeTime }}ms {{ easing }}"))],{type:7,name:"flyInOut",definitions:e,options:{}})]}}),t})();const Tw=Object.assign(Object.assign({},dw),{toastComponent:Sw});let Cw=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:pw,useValue:{default:Tw,config:e}}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[P]]}),t})(),Iw=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state&&(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ew),r.Y36(fw),r.Y36(r.z2F))},t.\u0275cmp=r.Xpm({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.Tol(e.toastClasses),r.Udp("display",e.displayStyle))},attrs:Xb,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.YNc(0,ow,3,0,"button",0),r.YNc(1,uw,3,5,"div",1),r.YNc(2,cw,1,3,"div",2),r.YNc(3,lw,2,4,"div",3),r.YNc(4,hw,2,2,"div",4)),2&t&&(r.Q6J("ngIf",e.options.closeButton),r.xp6(1),r.Q6J("ngIf",e.title),r.xp6(1),r.Q6J("ngIf",e.message&&e.options.enableHtml),r.xp6(1),r.Q6J("ngIf",e.message&&!e.options.enableHtml),r.xp6(1),r.Q6J("ngIf",e.options.progressBar))},directives:[D],encapsulation:2}),t})();function Aw(t,e){1&t&&(r.TgZ(0,"h5",7),r._uU(1,"No hay peliculas registradas"),r.qZA())}Object.assign(Object.assign({},dw),{toastComponent:Iw});const xw=function(t){return["/editPelicula/",t]};function kw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._UZ(10,"i",10),r.TgZ(11,"i",11),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(2).eliminarPelicula(e.id)}),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.nombre),r.xp6(2),r.Oqu(t.director),r.xp6(2),r.Oqu(t.protagonista),r.xp6(2),r.Oqu(t.estudio),r.xp6(2),r.Q6J("routerLink",r.VKq(5,xw,t.id))}}function Ow(t,e){if(1&t&&(r.TgZ(0,"table",8),r.TgZ(1,"thead"),r.TgZ(2,"tr"),r.TgZ(3,"th"),r._uU(4,"Nombre"),r.qZA(),r.TgZ(5,"th"),r._uU(6,"Director"),r.qZA(),r.TgZ(7,"th"),r._uU(8,"Protagonista"),r.qZA(),r.TgZ(9,"th"),r._uU(10,"Estudio"),r.qZA(),r._UZ(11,"th"),r.qZA(),r.qZA(),r.TgZ(12,"tbody"),r.YNc(13,kw,12,7,"tr",9),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(13),r.Q6J("ngForOf",t.peliculas)}}let Dw=(()=>{class t{constructor(t,e){this._peliculaService=t,this.toastr=e,this.peliculas=[]}ngOnInit(){this.getPeliculas()}getPeliculas(){this._peliculaService.getPeliculas().subscribe(t=>{this.peliculas=[],t.forEach(t=>{this.peliculas.push(Object.assign({id:t.payload.doc.id},t.payload.doc.data()))}),console.log(this.peliculas)})}eliminarPelicula(t){this._peliculaService.eliminarPelicula(t).then(()=>{console.log("Pelicula eliminada con exito"),this.toastr.error("La pelicula fue eliminada","REGISTRO ELIMINADO",{positionClass:"toast-bottom-right"})}).catch(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Bb),r.Y36(Ew))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-list-peliculas"]],decls:9,vars:2,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["routerLink","/create-pelicula",1,"btn","btn-primary","btn-lg",2,"float","right"],["style","margin-top:30px",4,"ngIf"],["class","table table-striped table-hover mt-5",4,"ngIf"],[2,"margin-top","30px"],[1,"table","table-striped","table-hover","mt-5"],[4,"ngFor","ngForOf"],[1,"fas","fa-edit","fa-lg","text-info",2,"margin-right","5px",3,"routerLink"],[1,"fas","fa-trash-alt","fa-lg","text-danger",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"span",3),r._uU(4,"Listado de Peliculas "),r.qZA(),r.TgZ(5,"button",4),r._uU(6,"Agregar"),r.qZA(),r.YNc(7,Aw,2,0,"h5",5),r.YNc(8,Ow,14,1,"table",6),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(7),r.Q6J("ngIf",0==e.peliculas.length),r.xp6(1),r.Q6J("ngIf",e.peliculas.length>0))},directives:[wb,D,k],styles:["i[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function Nw(t,e){1&t&&(r.TgZ(0,"div",16),r.TgZ(1,"span",17),r._uU(2,"Loading..."),r.qZA(),r.qZA())}function Rw(t,e){1&t&&(r.TgZ(0,"span",18),r._uU(1,"TODOS LOS CAMPOS SON OBLIGATORIOS"),r.qZA())}let Pw=(()=>{class t{constructor(t,e,n,r,i){this.fb=t,this._peliculaService=e,this.router=n,this.toastr=r,this.aRoute=i,this.submitted=!1,this.loading=!1,this.titulo="Agregar/Editar Peliculas",this.createPelicula=this.fb.group({nombre:["",Im.required],director:["",Im.required],protagonista:["",Im.required],estudio:["",Im.required]}),this.id=this.aRoute.snapshot.paramMap.get("id"),console.log(this.id)}ngOnInit(){this.esEditar()}agregarEditarPelicula(){this.submitted=!0,this.createPelicula.invalid||(null===this.id?(this.titulo="Agregar Pelicula",this.agregarPelicula()):(this.titulo="Editar Pelicula",this.editarPelicula(this.id)))}agregarPelicula(){const t={nombre:this.createPelicula.value.nombre,director:this.createPelicula.value.director,protagonista:this.createPelicula.value.protagonista,estudio:this.createPelicula.value.estudio,fechaCreacion:new Date,fechaActualizacion:new Date};this.loading=!0,this._peliculaService.agregarPelicula(t).then(()=>{this.toastr.info("TODOS LOS DATOS ESTAN CORRECTOS","LA PELICULA SE REGISTRO",{positionClass:"toast-bottom-right"}),this.loading=!1,this.router.navigate(["/list-peliculas"])}).catch(t=>{console.log(t),this.loading=!1})}editarPelicula(t){const e={nombre:this.createPelicula.value.nombre,director:this.createPelicula.value.director,protagonista:this.createPelicula.value.protagonista,estudio:this.createPelicula.value.estudio,fechaActualizacion:new Date};this.loading=!0,this._peliculaService.actualizarPelicula(t,e).then(()=>{this.loading=!1,this.toastr.info("La pelicula se actualizo correctamente","PELICULA ACTUALIZADA",{positionClass:"toast-bottom-right"}),this.router.navigate(["/list-peliculas"])})}esEditar(){null!==this.id&&(this.loading=!0,this._peliculaService.getPelicula(this.id).subscribe(t=>{this.loading=!1,console.log(t.payload.data().nombre),this.createPelicula.setValue({nombre:t.payload.data().nombre,director:t.payload.data().director,protagonista:t.payload.data().protagonista,estudio:t.payload.data().estudio})}))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(wy),r.Y36(Bb),r.Y36(bb),r.Y36(Ew),r.Y36(Yv))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-create-pelicula"]],decls:24,vars:4,consts:[[1,"cotainer","pt-4"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card","text-center"],[1,"card-body"],["class","spinner-border text-primary ","style","float: right;","role","status",4,"ngIf"],["class","badge badge-danger","style","background-color:red",4,"ngIf"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control","form-control-lg"],["type","text","formControlName","director","placeholder","Director",1,"form-control","form-control-lg","mt-3"],["type","text","formControlName","protagonista","placeholder","Protagonista",1,"form-control","form-control-lg","mt-3"],["type","text","formControlName","estudio","placeholder","Estudio",1,"form-control","form-control-lg","mt-3"],[1,"mt-3"],["type","text","routerLink","/list-peliculas",1,"btn","btn-secondary","btn-lg",2,"margin-right","3px"],["type","submit",1,"btn","btn-dark","btn-lg"],["role","status",1,"spinner-border","text-primary",2,"float","right"],[1,"visually-hidden"],[1,"badge","badge-danger",2,"background-color","red"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"h3"),r._uU(6),r.YNc(7,Nw,3,0,"div",5),r.qZA(),r.YNc(8,Rw,2,0,"span",6),r.TgZ(9,"form",7),r.NdJ("ngSubmit",function(){return e.agregarEditarPelicula()}),r.TgZ(10,"div",1),r.TgZ(11,"div",8),r._UZ(12,"input",9),r.qZA(),r.qZA(),r.TgZ(13,"div",1),r.TgZ(14,"div",8),r._UZ(15,"input",10),r.qZA(),r.TgZ(16,"div",8),r._UZ(17,"input",11),r.qZA(),r.qZA(),r._UZ(18,"input",12),r.TgZ(19,"div",13),r.TgZ(20,"button",14),r._uU(21,"Volver"),r.qZA(),r.TgZ(22,"button",15),r._uU(23,"Agregar"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(6),r.hij("",e.titulo," "),r.xp6(1),r.Q6J("ngIf",e.loading),r.xp6(1),r.Q6J("ngIf",e.submitted&&e.createPelicula.invalid),r.xp6(1),r.Q6J("formGroup",e.createPelicula))},directives:[D,fy,Hm,my,bm,zm,vy,wb],styles:[""]}),t})();const Lw=[{path:"",redirectTo:"list-peliculas",pathMatch:"full"},{path:"list-peliculas",component:Dw},{path:"create-pelicula",component:Pw},{path:"editPelicula/:id",component:Pw},{path:"**",redirectTo:"list-peliculas",pathMatch:"full"}];let Fw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Rb.forRoot(Lw)],Rb]}),t})();function Vw(){return"undefined"!=typeof window&&void 0!==window.document}function Mw(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function jw(t){switch(t.length){case 0:return new Jb;case 1:return t[0];default:return new Yb(t)}}function Uw(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case zb:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function qw(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Bw(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Bw(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Bw(n,"destroy",t)))}}function Bw(t,e,n){const r=n.totalTime,i=Gw(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function Gw(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function zw(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Hw(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let $w=(t,e)=>!1,Qw=(t,e)=>!1,Zw=(t,e,n)=>[];const Kw=Mw();(Kw||"undefined"!=typeof Element)&&($w=Vw()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),Qw=(()=>{if(Kw||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Qw}})(),Zw=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let Ww=null,Jw=!1;function Yw(t){Ww||(Ww=("undefined"!=typeof document?document.body:null)||{},Jw=!!Ww.style&&"WebkitAppearance"in Ww.style);let e=!0;return Ww.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Ww.style,!e&&Jw)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Ww.style),e}const Xw=Qw,tE=$w,eE=Zw;function nE(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let rE=(()=>{class t{validateStyleProperty(t){return Yw(t)}matchesElement(t,e){return Xw(t,e)}containsElement(t,e){return tE(t,e)}query(t,e,n){return eE(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new Jb(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),iE=(()=>{class t{}return t.NOOP=new rE,t})();const sE="ng-enter",oE="ng-leave",aE="ng-trigger",uE=".ng-trigger",cE="ng-animating",lE=".ng-animating";function hE(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fE(parseFloat(e[1]),e[2])}function fE(t,e){switch(e){case"s":return 1e3*t;default:return t}}function dE(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=fE(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=fE(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function pE(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function gE(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else pE(t,n);return n}function mE(t,e,n){return n?e+":"+n+";":""}function yE(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=mE(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=mE(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function vE(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=IE(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),Mw()&&yE(t))}function _E(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=IE(e);t.style[n]=""}),Mw()&&yE(t))}function bE(t){return Array.isArray(t)?1==t.length?t[0]:$b(t):t}const wE=new RegExp("{{\\s*(.+?)\\s*}}","g");function EE(t){let e=[];if("string"==typeof t){let n;for(;n=wE.exec(t);)e.push(n[1]);wE.lastIndex=0}return e}function SE(t,e,n){const r=t.toString(),i=r.replace(wE,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function TE(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const CE=/-+([a-z0-9])/g;function IE(t){return t.replace(CE,(...t)=>t[1].toUpperCase())}function AE(t,e){return 0===t||0===e}function xE(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=OE(t,e)})}}return e}function kE(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function OE(t,e){return window.getComputedStyle(t)[e]}const DE="*";function NE(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(LE(i,o)),"<"!=s[0]||i==DE&&o==DE||e.push(LE(o,i))}(t,n,e)):n.push(t),n}const RE=new Set(["true","1"]),PE=new Set(["false","0"]);function LE(t,e){const n=RE.has(t)||PE.has(t),r=RE.has(e)||PE.has(e);return(i,s)=>{let o=t==DE||t==i,a=e==DE||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?RE.has(t):PE.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?RE.has(e):PE.has(e)),o&&a}}const FE=new RegExp("s*:selfs*,?","g");function VE(t,e,n){return new ME(t).build(e,n)}class ME{constructor(t){this._driver=t}build(t,e){const n=new jE(e);return this._resetContextStyleTimingState(n),kE(this,bE(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(UE(t)){const e=t;Object.keys(e).forEach(t=>{EE(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=TE(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=kE(this,bE(t.animation),e);return{type:1,matchers:NE(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:qE(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>kE(this,t,e)),options:qE(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=kE(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:qE(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return BE(dE(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=BE(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||dE(r,e),BE(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Qb({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Qb(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==zb?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(UE(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=EE(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(UE(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(UE(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=f+d.delay+o,d.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:kE(this,bE(t.animation),e),options:qE(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:qE(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:qE(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(FE,"")),[t=t.replace(/@\*/g,uE).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,lE),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,zw(e.collectedStyles,e.currentQuerySelector,{});const o=kE(this,bE(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:qE(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:dE(t.timings,e.errors,!0);return{type:12,animation:kE(this,bE(t.animation),e),timings:n,options:null}}}class jE{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function UE(t){return!Array.isArray(t)&&"object"==typeof t}function qE(t){var e;return t?(t=pE(t)).params&&(t.params=(e=t.params)?pE(e):null):t={},t}function BE(t,e,n){return{duration:t,delay:e,easing:n}}function GE(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class zE{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const HE=new RegExp(":enter","g"),$E=new RegExp(":leave","g");function QE(t,e,n,r,i,s={},o={},a,u,c=[]){return(new ZE).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class ZE{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new zE;const l=new WE(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),kE(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[GE(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?hE(n.duration):null,s=null!=n.delay?hE(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),kE(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=KE);const t=hE(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>kE(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?hE(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),kE(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return dE(e.params?SE(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?hE(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=KE);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),kE(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;kE(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const KE={};class WE{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=KE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new JE(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=hE(n.duration)),null!=n.delay&&(r.delay=hE(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=SE(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new WE(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=KE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new YE(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(HE,"."+this._enterClassName)).replace($E,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class JE{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new JE(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||zb,this._currentKeyframe[t]=zb}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=zb})):gE(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=SE(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:zb),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=gE(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==zb&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?TE(t.values()):[],s=e.size?TE(e.values()):[];if(n){const t=r[0],e=pE(t);t.offset=0,e.offset=1,r=[t,e]}return GE(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class YE extends JE{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=gE(t[0],!1);a.offset=0,i.push(a);const u=gE(t[0],!1);u.offset=XE(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=gE(t[r],!1);o.offset=XE((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return GE(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function XE(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class tS{}class eS extends tS{normalizePropertyName(t,e){return IE(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(nS[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const nS=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rS(t,e,n,r,i,s,o,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const iS={};class sS{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||iS,f=this.buildStyles(n,o&&o.params||iS,l),d=a&&a.params||iS,p=this.buildStyles(r,d,l),g=new Set,m=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:QE(t,e,this.ast.animation,i,s,f,p,_,u,l);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return rS(e,this._triggerName,n,r,v,f,p,[],[],m,y,w,l);b.forEach(t=>{const n=t.element,r=zw(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=zw(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const E=TE(g.values());return rS(e,this._triggerName,n,r,v,f,p,b,E,m,y,w)}}class oS{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=pE(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=SE(s,r,e)),n[t]=s})}}),n}}class aS{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new oS(t.style,t.options&&t.options.params||{})}),uS(this.states,"true","1"),uS(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new sS(t,e,this.states))}),this.fallbackTransition=new sS(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function uS(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const cS=new zE;class lS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=VE(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=Uw(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=QE(this._driver,e,i,sE,oE,{},{},n,cS,r),s.forEach(t=>{const e=zw(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,zb)})});const a=jw(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=Gw(e,"","","");return qw(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const hS="ng-animate-queued",fS="ng-animate-disabled",dS=".ng-animate-disabled",pS=[],gS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},mS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class yS{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=pE(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const vS="void",_S=new yS(vS);class bS{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,AS(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=zw(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=zw(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(AS(t,aE),AS(t,"ng-trigger-"+e),a[e]=_S),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new ES(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(AS(t,aE),AS(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new yS(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=_S),u.value!==vS&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{_E(t,n),vE(t,r)})}return}const c=zw(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(AS(t,hS),s.onStart(()=>{xS(t,hS)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,uE,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,vS,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&jw(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||_S,a=new yS(vS),u=new ES(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==gS||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){AS(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=Gw(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,qw(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class wS{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new bS(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(SS(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!SS(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),AS(t,fS)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),xS(t,fS))}removeNode(t,e,n,r){if(SS(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return SS(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,uE,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,lE,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return jw(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=gS,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,dS)&&this.markElementAsDisabled(t,!1),this.driver.query(t,dS,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)AS(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?jw(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new zE,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=IS(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=sE+p++;d.set(e,n),t.forEach(t=>AS(t,n))});const g=[],m=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,_=IS(h,Array.from(m));_.forEach((t,e)=>{const n=oE+p++;v.set(e,n),t.forEach(t=>AS(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>xS(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>xS(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>_E(i,p.fromStyles)),e.onDestroy(()=>vE(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>_E(i,p.fromStyles)),e.onDestroy(()=>vE(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>zw(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,S=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{zw(E,e,[]).push(t),t.destroy()})});const T=g.filter(t=>DS(t,a,u)),C=new Map;CS(C,this.driver,y,u,zb).forEach(t=>{DS(t,a,u)&&T.push(t)});const I=new Map;f.forEach((t,e)=>{CS(I,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=C.get(t),n=I.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const A=[],x=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>vE(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,E,i,I,C);if(s.setRealPlayer(n),t===k)A.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=jw(e)),r.push(s)}}else _E(e,o.fromStyles),s.onDestroy(()=>vE(e,o.toStyles)),x.push(s),c.has(e)&&r.push(s)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=jw(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<g.length;O++){const t=g[O],e=t.__ng_removed;if(xS(t,oE),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,lE,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?kS(this,t,r):this.processLeaveNode(t)}return g.length=0,A.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),A}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==vS;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=zw(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}_E(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new Jb(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return OS(t,e),e}((n.get(h)||pS).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=s.get(h),y=Uw(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new ES(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{zw(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>AS(t,cE));const f=jw(h);return f.onDestroy(()=>{c.forEach(t=>xS(t,cE)),vE(a,e.toStyles)}),l.forEach(t=>{zw(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Jb(t.duration,t.delay)}}class ES{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Jb,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>qw(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){zw(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function SS(t){return t&&1===t.nodeType}function TS(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function CS(t,e,n,r,i){const s=[];n.forEach(t=>s.push(TS(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=mS,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>TS(t,s[a++])),o}function IS(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function AS(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function xS(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function kS(t,e,n){jw(n).onDone(()=>t.processLeaveNode(e))}function OS(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Yb?OS(r.players,e):e.push(r)}}function DS(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class NS{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new wS(t,e,n),this._timelineEngine=new lS(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=VE(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new aS(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Hw(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Hw(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function RS(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=LS(e[0]),e.length>1&&(r=LS(e[e.length-1]))):e&&(n=LS(e)),n||r?new PS(t,n,r):null}let PS=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&vE(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vE(this._element,this._initialStyles),this._endStyles&&(vE(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(_E(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_E(this._element,this._endStyles),this._endStyles=null),vE(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function LS(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];FS(i)&&(e=e||{},e[i]=t[i])}return e}function FS(t){return"display"===t||"position"===t}const VS="animation",MS="animationend";class jS{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=HS(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),zS(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),GS(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){US(this._element,this._name,"paused")}resume(){US(this._element,this._name,"running")}setPosition(t){const e=qS(this._element,this._name);this._position=t*this._duration,zS(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),GS(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=HS(t,"").split(","),r=BS(n,e);r>=0&&(n.splice(r,1),zS(t,"",n.join(",")))}(this._element,this._name))}}function US(t,e,n){zS(t,"PlayState",n,qS(t,e))}function qS(t,e){const n=HS(t,"");return n.indexOf(",")>0?BS(n.split(","),e):BS([n],e)}function BS(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function GS(t,e,n){n?t.removeEventListener(MS,e):t.addEventListener(MS,e)}function zS(t,e,n,r){const i=VS+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function HS(t,e){return t.style[VS+e]||""}class $S{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new jS(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:OE(this.element,n))})}this.currentSnapshot=t}}class QS extends Jb{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=nE(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class ZS{constructor(){this._count=0}validateStyleProperty(t){return Yw(t)}matchesElement(t,e){return Xw(t,e)}containsElement(t,e){return tE(t,e)}query(t,e,n){return eE(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>nE(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof $S),u={};AE(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=xE(t,e,u));if(0==n)return new QS(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const f=RS(t,e),d=new $S(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class KS{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:OE(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class WS{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(JS().toString()),this._cssKeyframesDriver=new ZS}validateStyleProperty(t){return Yw(t)}matchesElement(t,e){return Xw(t,e)}containsElement(t,e){return tE(t,e)}query(t,e,n){return eE(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof KS);AE(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=RS(t,e=xE(t,e=e.map(t=>gE(t,!1)),u));return new KS(t,e,a,l)}}function JS(){return Vw()&&Element.prototype.animate||{}}let YS=(()=>{class t extends Gb{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?$b(t):t;return eT(this._renderer,null,e,"register",[n]),new XS(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class XS extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new tT(this._id,t,e||{},this._renderer)}}class tT{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return eT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function eT(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const nT="@",rT="@.disabled";let iT=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new sT("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new oT(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(NS),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class sT{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==nT&&e==rT?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class oT extends sT{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==nT?"."==e.charAt(1)&&e==rT?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==nT){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=nT&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let aT=(()=>{class t extends NS{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(iE),r.LFG(tS))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const uT=new r.OlP("AnimationModuleType"),cT=[{provide:Gb,useClass:YS},{provide:tS,useFactory:function(){return new eS}},{provide:NS,useClass:aT},{provide:r.FYo,useFactory:function(t,e,n){return new iT(t,e,n)},deps:[nt,NS,r.R0b]}],lT=[{provide:iE,useFactory:function(){return"function"==typeof JS()?new WS:new ZS}},{provide:uT,useValue:"BrowserAnimations"},...cT],hT=[{provide:iE,useClass:rE},{provide:uT,useValue:"NoopAnimations"},...cT];let fT=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?hT:lT}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:lT,imports:[yt]}),t})(),dT=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-navbar"]],decls:4,vars:0,consts:[[1,"navbar","navbar-dark","bg-primary"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r.TgZ(2,"span",2),r._uU(3,"PROYECTO CON BASE DE DATOS"),r.qZA(),r.qZA(),r.qZA())},styles:[""]}),t})(),pT=(()=>{class t{constructor(){this.title="peliculas"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(r._UZ(0,"app-navbar"),r._UZ(1,"router-outlet"))},directives:[dT,Sb],styles:[""]}),t})();const gT={apiKey:"AIzaSyBozEMxNdABj9JJQE9kowrp3-7jxUOpzjU",authDomain:"peliculas-1e1e2.firebaseapp.com",projectId:"peliculas-1e1e2",storageBucket:"peliculas-1e1e2.appspot.com",messagingSenderId:"543121562329",appId:"1:543121562329:web:b0bc66c5b67ece3cb77cc8"};let mT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[pT]}),t.\u0275inj=r.cJS({providers:[],imports:[[yt,Fw,Ut.hO.initializeApp(gT),hm,by,Cw.forRoot(),fT]]}),t})();(0,r.G48)(),gt().bootstrapModule(mT).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=766)}]);